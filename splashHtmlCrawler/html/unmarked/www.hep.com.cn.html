<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><!--[if IE]><link rel="icon" href="/favicon.ico"><![endif]--><title>高等教育出版社有限公司 | 高等教育出版社官方网站 |高教社官网|高等教育出版社门户网站</title><meta name=keywords content=高等教育出版社,高校教材,本科教材,高职教材,国家规划教材,获奖教材,教学资源,教学方案,学术期刊,学术著作,高教社,hep><meta name=description content=高等教育出版社是中国教育出版传媒集团有限公司的成员单位，是以出版高等教育、职业教育、成人及社会教育等教育类、专业类、科技类出版物为主的综合性大型出版社，本门户网站提供企业资讯、出版图书、数字化产品及课程、教学资源信息。><link href=/css/chunk-012221bc.4a826940.css rel=prefetch><link href=/css/chunk-01332c88.555b68f6.css rel=prefetch><link href=/css/chunk-09e90296.dc9f147c.css rel=prefetch><link href=/css/chunk-17128c2a.364f0ebf.css rel=prefetch><link href=/css/chunk-1a06a72c.70210116.css rel=prefetch><link href=/css/chunk-1a2e9cc4.dcf42c21.css rel=prefetch><link href=/css/chunk-1a765d6e.ef951cb7.css rel=prefetch><link href=/css/chunk-1f4730b7.6543776e.css rel=prefetch><link href=/css/chunk-23efc244.de50c797.css rel=prefetch><link href=/css/chunk-26e2e57c.a48ade41.css rel=prefetch><link href=/css/chunk-2934c797.147a4eb8.css rel=prefetch><link href=/css/chunk-2e01b207.b9030e4b.css rel=prefetch><link href=/css/chunk-3320f906.32add886.css rel=prefetch><link href=/css/chunk-34fb8779.1c2d26da.css rel=prefetch><link href=/css/chunk-44c3f5ff.881c817d.css rel=prefetch><link href=/css/chunk-4c474d3e.dfc1e966.css rel=prefetch><link href=/css/chunk-4e3fcc96.293865ab.css rel=prefetch><link href=/css/chunk-508a4e16.5e257087.css rel=prefetch><link href=/css/chunk-5672d654.6543776e.css rel=prefetch><link href=/css/chunk-5e351240.79a134cc.css rel=prefetch><link href=/css/chunk-5fcc39e6.a570b207.css rel=prefetch><link href=/css/chunk-640dc4e7.8d57f492.css rel=prefetch><link href=/css/chunk-65ac8c2c.633a6a13.css rel=prefetch><link href=/css/chunk-73fae304.25b87ea6.css rel=prefetch><link href=/css/chunk-747337b5.f0b56757.css rel=prefetch><link href=/css/chunk-7652c048.66bf0139.css rel=prefetch><link href=/css/chunk-784c4cbf.e4b7ab42.css rel=prefetch><link href=/css/chunk-852fb278.8ecd138d.css rel=prefetch><link href=/css/chunk-8fca571a.93469c2e.css rel=prefetch><link href=/css/chunk-99eef7de.52215c2a.css rel=prefetch><link href=/css/chunk-a440af3e.32add886.css rel=prefetch><link href=/css/chunk-a4cf31f0.af9fc17d.css rel=prefetch><link href=/css/chunk-b075b452.2b4a17e3.css rel=prefetch><link href=/css/chunk-b731c1c2.05dc90b1.css rel=prefetch><link href=/css/chunk-b923228c.d5152d4a.css rel=prefetch><link href=/css/chunk-c19179c6.6543776e.css rel=prefetch><link href=/css/chunk-cd3246b0.881c817d.css rel=prefetch><link href=/css/chunk-cda9599c.b260f8f1.css rel=prefetch><link href=/css/chunk-d12130c4.99f59d76.css rel=prefetch><link href=/css/chunk-f615d61a.1ded5ba2.css rel=prefetch><link href=/css/chunk-fa7a645e.364f0ebf.css rel=prefetch><link href=/js/chunk-012221bc.2dee681c.js rel=prefetch><link href=/js/chunk-01332c88.08b01715.js rel=prefetch><link href=/js/chunk-09e90296.567f7732.js rel=prefetch><link href=/js/chunk-17128c2a.affecc38.js rel=prefetch><link href=/js/chunk-1a06a72c.aa08ceba.js rel=prefetch><link href=/js/chunk-1a2e9cc4.90dc5361.js rel=prefetch><link href=/js/chunk-1a765d6e.8c5f2e7f.js rel=prefetch><link href=/js/chunk-1f4730b7.6fc4caf8.js rel=prefetch><link href=/js/chunk-23efc244.0bbe940c.js rel=prefetch><link href=/js/chunk-26e2e57c.71ee43cc.js rel=prefetch><link href=/js/chunk-2934c797.aae2616d.js rel=prefetch><link href=/js/chunk-2e01b207.a091e888.js rel=prefetch><link href=/js/chunk-3320f906.2a0deff8.js rel=prefetch><link href=/js/chunk-34fb8779.335a68f5.js rel=prefetch><link href=/js/chunk-44c3f5ff.a4196e31.js rel=prefetch><link href=/js/chunk-4c474d3e.f6fcc284.js rel=prefetch><link href=/js/chunk-4e3fcc96.685f6b07.js rel=prefetch><link href=/js/chunk-508a4e16.3ed6a681.js rel=prefetch><link href=/js/chunk-5672d654.142fce77.js rel=prefetch><link href=/js/chunk-5e351240.ac088580.js rel=prefetch><link href=/js/chunk-5fcc39e6.6c52a47e.js rel=prefetch><link href=/js/chunk-640dc4e7.e725d0e7.js rel=prefetch><link href=/js/chunk-65ac8c2c.c26a5102.js rel=prefetch><link href=/js/chunk-73fae304.7dcb0b79.js rel=prefetch><link href=/js/chunk-747337b5.709e91f0.js rel=prefetch><link href=/js/chunk-7652c048.78938056.js rel=prefetch><link href=/js/chunk-784c4cbf.9f75e8fc.js rel=prefetch><link href=/js/chunk-852fb278.2a05a202.js rel=prefetch><link href=/js/chunk-8fca571a.c9af628e.js rel=prefetch><link href=/js/chunk-99eef7de.f9b0f86d.js rel=prefetch><link href=/js/chunk-a440af3e.3ab1e8bc.js rel=prefetch><link href=/js/chunk-a4cf31f0.9160874e.js rel=prefetch><link href=/js/chunk-b075b452.605844a8.js rel=prefetch><link href=/js/chunk-b731c1c2.78b05187.js rel=prefetch><link href=/js/chunk-b923228c.5fff0c0e.js rel=prefetch><link href=/js/chunk-c19179c6.63953bf1.js rel=prefetch><link href=/js/chunk-cd3246b0.f530827c.js rel=prefetch><link href=/js/chunk-cda9599c.5796e259.js rel=prefetch><link href=/js/chunk-d12130c4.ff9a59f6.js rel=prefetch><link href=/js/chunk-f615d61a.1d0924fc.js rel=prefetch><link href=/js/chunk-fa7a645e.8b7a471f.js rel=prefetch><link href=/css/app.7c473242.css rel=preload as=style><link href=/css/chunk-vendors.8ca1733b.css rel=preload as=style><link href=/js/app.a60e2555.js rel=preload as=script><link href=/js/chunk-vendors.328b87b8.js rel=preload as=script><link href=/css/chunk-vendors.8ca1733b.css rel=stylesheet><link href=/css/app.7c473242.css rel=stylesheet><link rel=icon type=image/png sizes=32x32 href=/img/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/icons/favicon-16x16.png><link rel=manifest href=/manifest.json><meta name=theme-color content=#4DBA87><meta name=apple-mobile-web-app-capable content=no><meta name=apple-mobile-web-app-status-bar-style content=default><meta name=apple-mobile-web-app-title content=hep-portal-index-page><link rel=apple-touch-icon href=/img/icons/apple-touch-icon-152x152.png><link rel=mask-icon href=/img/icons/safari-pinned-tab.svg color=#4DBA87><meta name=msapplication-TileImage content=/img/icons/msapplication-icon-144x144.png><meta name=msapplication-TileColor content=#000000></head><body class=yui-skin-sam><!--[if IE]>
    <div style="padding:.5em;color:darkred;">
      你的浏览器是IE啊，某些功能可能不被支持。建议你安装Chrome浏览器访问。
    </div>
  <![endif]--><noscript><strong>实在抱歉，请启用Javascript 然后访问本网站。</strong></noscript><div id=app></div><script src=https://cdn.staticfile.org/jquery/2.1.0/jquery.min.js></script><script src=https://cdn.authing.co/packages/authing-sso/1.x/AuthingSSO.umd.min.js></script><script src=https://static.hep.com.cn/static/js/udesk.js></script><script>var base = 'https://www.hep.com.cn';
    // var base = 'http://localhost.hep.com.cn:4031';


    // (function () {
    //   // var ssoToken = getCookie('ssoToken')
    //   // if(!token){
    //   var plugin = new Ucenter();
    //   plugin.checkLogin(
    //     "https://sso.hep.com.cn",
    //     function AlreadyLoggedIn(res) {
    //       // console.log('login ,set cookie',res)
    //       var token = getCookie('id-token')
    //       // console.log('cookie compare',token,res.data.token)
    //       if (token !== res.data.token) {
    //         clearCookie()
    //       }
    //       setCookie('id-token', res.data.token, '1d')
    //       // 换取门户的token
    //       getPortalToken(res.data.token)
    //     },
    //     function NotLoggedIn(res) {
    //       clearCookie()
    //       // console.log(res,'not  NotLoggedIn')
    //     }
    //   );
    //   // }

    // })();

    // let auth = new AuthingSSO({
    //   appId: '5e43ab1b1855341e86adafcb',
    //   appDomain: '2d.u.hep.com.cn',
    //   baseUrl: 'https://core.u.hep.com.cn',
    //   redirectUrl: 'https://www.hep.com.cn/',
    //   host: {
    //     user: 'https://users.u.hep.com.cn/graphql',
    //     oauth: 'https://oauth.u.hep.com.cn/graphql',
    //   }
    // });
    let auth = new AuthingSSO({
      //1.0
      //- appId: '5e43ab1b1855341e86adafcb',
      //- appDomain: '2d.u.hep.com.cn',
      //2.0
      appId: '5e855f6945b37a36f91ca8f0',
      appDomain: 'hep-center.u2.hep.com.cn',
      baseUrl: 'https://core.u2.hep.com.cn',
      // redirectUrl: 'http://localhost.hep.com.cn:8080/',
      redirectUrl: window.location.href,
      host: {
        user: 'https://users.u2.hep.com.cn/graphql',
        oauth: 'https://oauth.u2.hep.com.cn/graphql',
      },
      //- state:JSON.stringify({'from':'aixiti'})
    });


    (function () {
      checkAuth()
    })();
    async function checkAuth() {
      let res = await auth.trackSession();
      if (res.session != null) {
        console.log('login ,set cookie', res)
        token = getCookie('id-token')

        if (token !== res.userInfo.token) {
          clearCookie()
          // setCookie('id-token', res.userInfo.token, '1d')
          // 换取门户的token
          getPortalToken(res.userInfo.token)

          // authing.identify(res.userInfo.id, {
          //   name: res.userInfo.nickname?res.userInfo.nickname:res.userInfo.username,
          //   //预定义属性
          //   avatar: res.userInfo.photo,
          //   //预定义属性
          //   '邮箱': res.userInfo.email, //⾃自定义属性 
          //   '手机': res.userInfo.phone //⾃自定义属性 
          // });
        }else{
          setTimeout(async () => {
            window.vue.getUserIndexNoUser()
          }, 1000)       
        }
      } else {
        let hasVuex = localStorage.getItem('vuex')
        clearCookie()
        console.log(res, 'not login')
        if (hasVuex) window.location.href = window.location.href
        // window.location.href = '/'
      }
    }

    async function getPortalToken(ssoToken) {
      $.post(base + "/api/v1/users/quick-login-by-id-token", { token: ssoToken },
        function (data, textStatus, jqXHR) {
          if (data && data.success == true) {
            let token = data.data
            let hep_token = getCookie('id-token')
            // if (!hep_token) {
            //   setCookie('id-token', token)
            //   window.vue.getUserIndex(token)
            //   // window.location.reload()
            // }
            setCookie('id-token', token)
            window.vue.getUserIndex(token)
          } else {
            logout()
          }
          // console.log(data)
        },
        "json"
      );
    }

    function getCookie(cname) {
      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function setCookie(cname, cvalue, exdays) {
      var d = new Date();
      d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
      var expires = "expires=" + d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/;domain=.hep.com.cn";
    }
    function clearCookie() {
      setCookie('id-token', '', -1)
      // setCookie('id-token', '', -1)
      localStorage.removeItem('vuex')
    }
    async function logout() {
      await auth.logout();
      clearCookie()
      location.reload();
    }</script><script src=/js/chunk-vendors.328b87b8.js></script><script src=/js/app.a60e2555.js></script></body></html>