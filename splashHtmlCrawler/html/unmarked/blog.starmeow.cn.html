<!DOCTYPE html>


<html lang="en">
<head>
    <script type="text/javascript">
        var _speedMark = new Date();
    </script>  <!--腾讯分析-网站测速-->
    <meta charset="UTF-8">
    <title>Flask搭建微电影视频网站 - 吾星喵乐分享</title>
    <meta name="keywords" content="Django,Python,吾星喵,个人博客,网站搭建,后台开发"/>
    <meta name="description"
          content="Hi，欢迎来到『吾星喵』的个人博客，我的博客主要是 Python&Ops&Svr 相关技术的学习分享和交流，开发自己的博客，可以让自己进步的更快，做一个不负己的 Coder…"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/static/blog_v0_2/favicon.ico">
    <link rel="stylesheet" href="/static/bootstrap/v3.3.7/bootstrap.min.css">
    <link rel="stylesheet" href="/static/blog_v0_2/css/base.css">
    <link rel="stylesheet" href="/static/blog_v0_2/css/m.css">
    <link rel="stylesheet" href="/static/blog_v0_2/asidenav/asidenav.css">
    <link rel="stylesheet" href="/static/font-awesome/v5.10.0-11/font-awesome.min.css">
    <link rel="stylesheet" href="/static/toastr/v2.1.3/toastr.min.css">
    <style>
        @media screen and (max-width: 1023px) {
            article {
                padding-top: 10px;
            }
        }

        * {
            box-sizing: initial;
        }

        .col-sm-4 {
            padding-right: 0;
            padding-left: 0;
        }

        .card p {
            padding: 0 20px 0 20px;
        }

        /*滚动条整体部分*/
        body::-webkit-scrollbar {
            width: 12px; /*滚动条宽度*/
            height: 6px; /*滚动条高度*/
        }

        /*滚动条的轨道（里面装有Thumb）*/
        body::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
            border-radius: 10px; /*滚动条的背景区域的圆角*/
            background-color: #d4d2d3; /*滚动条的背景颜色*/
        }

        /*滚动条里面的小方块，能向上向下移动（或往左往右移动，取决于是垂直滚动条还是水平滚动条）*/
        body::-webkit-scrollbar-thumb {
            border-radius: 10px; /*滚动条的圆角*/
            -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);
            background-color: #1DA7DA; /*滚动条的背景颜色*/
        }

        /*隐藏整篇滚动条*/
    </style>
    
    <style>
        
    </style>


    <script src="/static/jquery/v3.4.1/jquery.min.js"></script>
    <script src="/static/blog_v0_2/easyfader/jquery.easyfader.js"></script>
    <script src="/static/bootstrap/v3.3.7/bootstrap.min.js"></script>

    
        <script type="text/javascript" src="//tajs.qq.com/stats?sId=66446422" charset="UTF-8"></script>  <!--腾讯分析-->

        <!--百度统计-->
        <script>
            var _hmt = _hmt || [];
            (function () {
                var hm = document.createElement("script");
                hm.src = "https://hm.baidu.com/hm.js?ae419f58fb6b59f44d4f69954a5bb4a7";
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(hm, s);
            })();
        </script>


        <script>
            (function () {
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
                } else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>  <!--百度链接主动推送-->

    

</head>
<body style="background-image: url(/static/blog_v0_2/images/background/bg5.jpg); background-attachment:fixed;background-repeat:no-repeat;background-size:cover">
<!--top begin-->
<header id="header" style="position:fixed;z-index: 999;top:0;left:0;transition: top 0.5s;">  <!-- 加入style悬浮顶部导航 -->
    <div class="navbox">
        <h2 id="mnavh"><span class="navicon"></span></h2>
        <div class="logo"><a href="//blog.starmeow.cn/">StarMeow</a></div>
        <nav>
            <ul id="starlist">
                <li><a href="//blog.starmeow.cn/">首页</a></li>
                
                    <li><a href="//blog.starmeow.cn/list/8/">Django</a>
                    </li>
                
                    <li><a href="//blog.starmeow.cn/list/11/">Flask</a>
                    </li>
                
                    <li><a href="//blog.starmeow.cn/list/9/">Python</a>
                    </li>
                
                    <li><a href="//blog.starmeow.cn/list/10/">服务部署</a>
                    </li>
                
                <li class="menu">
                    <a href="//blog.starmeow.cn/list/">更多全部</a>
                    <ul class="sub">
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/17/">Kubernetes</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/14/">网页前端</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/7/">系统软件</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/13/">数据库</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/16/">Shell</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/4/">学习总结</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/5/">项目记录</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/15/">网络爬虫</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/1/">编程开发</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/6/">疑难问题</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/18/">Docker</a>
                            </li>
                        
                            <li>
                                <a href="//blog.starmeow.cn/list/19/">Ceph</a>
                            </li>
                        
                    </ul>
                    <span></span>
                </li>
                <li><a href="//blog.starmeow.cn/timeaxis/">时间轴</a></li>
                <li><a href="#">关于我</a></li>
            </ul>
        </nav>
        <div class="searchico"></div>
    </div>
</header>
<div style="height: 60px"></div>
<div class="searchbox">  <!-- 加入style悬浮顶部导航后，搜索框位置 -->
    <div class="search">
        <form action="//blog.starmeow.cn/search/" method="get">
            <!--
            <input name="keyboard" id="keyboard" class="input_text" value="请输入关键字词" style="color: rgb(153, 153, 153);" onfocus="if(value==='请输入关键字词'){this.style.color='#000';value=''}"
                   onblur="if(value===''){this.style.color='#999';value='请输入关键字词'}" type="text">
            <input name="show" value="title" type="hidden">
            <input name="tempid" value="1" type="hidden">
            <input name="tbname" value="news" type="hidden">
            <input name="Submit" class="input_submit" value="搜索" type="submit">
            -->
            <input name="keywords" class="input_text" placeholder="请输入搜索关键字" value="" required>
            <button class="input_submit" type="submit"
                    style="border: 0;background: 0;color: #fff;outline: none;position: absolute;top: 10px;right: 10%;">
                搜索
            </button>
        </form>
    </div>
    <div class="searchclose"></div>
</div>
<!--top end-->



    <article>
        <!--lbox begin-->
        <div class="lbox">
            
                <div class="whitebg lanmu">
                    <img src="/media/blog/cover/2019/05/FEATURE_COVER_20190521_165546_23.png">
                    <h1>Flask搭建微电影视频网站</h1>
                    <p>利用Flask搭建微电影视频网站
Github地址：https://github.com/xyliurui/FlaskMovie</p>
                </div>
            
            <div class="whitebg bloglist">
                <h2 class="htitle">
                    <span class="hnav">
                        <a href="/">功能一</a>
                        <a href="/">功能一</a>
                    </span>
                    Flask搭建微电影视频网站
                </h2>
                

<ul>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/e369853df766fa44e1ed0ff613f563bd/">【Flask微电影】01.环境搭建项目目录分析</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/e369853df766fa44e1ed0ff613f563bd/"> <img src="/media/blog/images/2018/10/BLOG_20181017_215128_90.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/e369853df766fa44e1ed0ff613f563bd/"> <img src="/media/blog/images/2018/10/BLOG_20181017_215133_39.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/e369853df766fa44e1ed0ff613f563bd/"> <img src="/media/blog/images/2018/10/BLOG_20181017_215143_15.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden"># 环境搭建

```
pip3 install virtualenvwrapper-win
mkvirtualenv FlaskMovie
(FlaskMovie) C:\Users\xxx&gt;pip list
Package    Version
---------- -------
pip        18.1
setuptools </p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月17日 21:50</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/e369853df766fa44e1ed0ff613f563bd/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/1c383cd30b7c298ab50293adfecb7b18/">【Flask微电影】02.使用蓝图构建项目目录</a></h3>
            
                <!--单图设计-->
                <span class="blogpic imgscale">
                    <i><a href="//blog.starmeow.cn/list/11/">Flask</a></i>
                    <a href="//blog.starmeow.cn/detail/1c383cd30b7c298ab50293adfecb7b18/" title=""><img src="/media/blog/cover/2018/10/BLOG_COVER_20181017_215753_71.jpg" alt=""></a>
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden"># 蓝图构建项目目录
## 什么是蓝图

一个应用中或者跨应用制作应用组件和支持通用的模式

## 蓝图的作用

- 将不同的功能模块化
- 构建大型应用
- 优化项目结构
- 增强可读性、易于维护

## 构建方法·定义注册调用
1. 定义蓝图(`app/admin/__init__.py`)

```python
from</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月17日 21:52</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/1c383cd30b7c298ab50293adfecb7b18/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/">【Flask微电影】03.安装mysql数据库及配置</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/"> <img src="/media/blog/images/2018/10/BLOG_20181028_122213_58.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/"> <img src="/media/blog/images/2018/10/BLOG_20181028_122220_14.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/"> <img src="/media/blog/images/2018/10/BLOG_20181028_122240_15.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/"> <img src="/media/blog/images/2018/10/BLOG_20181028_122247_66.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 安装数据库连接依赖包
安装包`flask-sqlalchemy`

```python
pip install flask-sqlalchemy


pip list
Package          Version
---------------- -------
Click            7.0
Flask      </p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月28日 12:20</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/d9d4f495e875a2e075a1a4a6e1b9770f/">【Flask微电影】04.定义数据模型，生成数据表和初始用户</a></h3>
            
                <!--单图设计-->
                <span class="blogpic imgscale">
                    <i><a href="//blog.starmeow.cn/list/11/">Flask</a></i>
                    <a href="//blog.starmeow.cn/detail/d9d4f495e875a2e075a1a4a6e1b9770f/" title=""><img src="/media/blog/cover/default-cover.png" alt=""></a>
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 定义数据模型
### mysql中创建数据库
创建项目所需要的数据库名`movie`

```sql
mysql&gt; create database movie;
Query OK, 1 row affected (0.01 sec)
```

**写在前面：`add_time`总是和实际添加时间相差8小时，是因为，在models.py</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月28日 12:25</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/14/">
                            MySQL | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/d9d4f495e875a2e075a1a4a6e1b9770f/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/">【Flask微电影】05.搭建前台页面-会员登录注册和会员中心</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/"> <img src="/media/blog/images/2018/10/BLOG_20181028_123128_12.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/"> <img src="/media/blog/images/2018/10/BLOG_20181028_123136_63.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/"> <img src="/media/blog/images/2018/10/BLOG_20181028_123226_90.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/"> <img src="/media/blog/images/2018/10/BLOG_20181028_123246_88.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 搭建前台主页页面
静态文件放入`static`目录下

### 创建基础页面base.html
创建base.html用于公用的页面顶部和底部

**app/templates/home/base.html**

修改静态文件为`{{ url_for(&#x27;static&#x27;, filename=&#x27;base/css/bootstrap.min.</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月28日 12:29</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/">【Flask微电影】06.搭建前台页面-电影列表、搜索播放页面</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/"> <img src="/media/blog/images/2018/10/BLOG_20181028_123953_83.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/"> <img src="/media/blog/images/2018/10/BLOG_20181028_124010_34.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/"> <img src="/media/blog/images/2018/10/BLOG_20181028_124049_45.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/"> <img src="/media/blog/images/2018/10/BLOG_20181028_124052_51.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 搭建电影列表页面

### 修改base.html添加内容外层数据块

```html
&lt;!--内容--&gt;
{% block container %}
&lt;div class=&quot;container&quot; style=&quot;margin-top:76px&quot;&gt;
    {% block content %}{% endblock content %}</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月28日 12:37</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/c0c7c76d30bd3dcaefc96f40275bdc0a/">【Flask微电影】07.搭建后台页面-后台登陆、后台主页页面</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/c0c7c76d30bd3dcaefc96f40275bdc0a/"> <img src="/media/blog/images/2018/10/BLOG_20181031_170546_62.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/c0c7c76d30bd3dcaefc96f40275bdc0a/"> <img src="/media/blog/images/2018/10/BLOG_20181031_171009_35.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">Github地址：https://github.com/xyliurui/FlaskMovie

## 搭建后台登陆页面
### 添加login.html登录页面
**app/templates/admin/login.html**

```html
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta char</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月31日 17:02</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/c0c7c76d30bd3dcaefc96f40275bdc0a/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/2838023a778dfaecdc212708f721b788/">【Flask微电影】08.搭建后台页面-密码修改、主页控制面板</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/2838023a778dfaecdc212708f721b788/"> <img src="/media/blog/images/2018/10/BLOG_20181031_171903_62.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/2838023a778dfaecdc212708f721b788/"> <img src="/media/blog/images/2018/10/BLOG_20181031_171914_17.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">Github地址：https://github.com/xyliurui/FlaskMovie

## 搭建后台修改密码页面

### 添加pwd.html修改密码模板

```html
{% extends &#x27;admin/base.html&#x27; %}

{% block content %}
    &lt;section class=&quot;con</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月31日 17:18</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/2838023a778dfaecdc212708f721b788/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/">【Flask微电影】09.搭建后台页面-标签管理、电影管理、预告管理</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/"> <img src="/media/blog/images/2018/11/BLOG_20181103_190400_27.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/"> <img src="/media/blog/images/2018/11/BLOG_20181103_190413_42.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/"> <img src="/media/blog/images/2018/11/BLOG_20181103_190445_14.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/"> <img src="/media/blog/images/2018/11/BLOG_20181103_190459_87.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">Github地址：https://github.com/xyliurui/FlaskMovie

## 搭建后台标签管理页面
### 添加tag_add.html添加标签页面

```html
{% extends &#x27;admin/base.html&#x27; %}

{% block content %}
    &lt;section class=&quot;c</p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年10月31日 17:24</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/9f61408e3afb633e50cdf1b20de6f466/">【Flask微电影】10.搭建后台页面-会员管理、评论管理</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/9f61408e3afb633e50cdf1b20de6f466/"> <img src="/media/blog/images/2018/11/BLOG_20181103_190948_25.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/9f61408e3afb633e50cdf1b20de6f466/"> <img src="/media/blog/images/2018/11/BLOG_20181103_190959_78.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/9f61408e3afb633e50cdf1b20de6f466/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191033_16.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 搭建后台会员管理页面

### 添加user_list.html会员列表页面

```html
{% extends &#x27;admin/base.html&#x27; %}

{% block content %}
    &lt;section class=&quot;content-header&quot;&gt;
        &lt;h1&gt;微电影管理系统&lt;/h1&gt;
    </p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年11月3日 19:06</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/9f61408e3afb633e50cdf1b20de6f466/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/72b32a1f754ba1c09b3695e0cb6cde7f/">【Flask微电影】11.搭建后台页面-收藏管理、日志管理</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/72b32a1f754ba1c09b3695e0cb6cde7f/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191444_70.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/72b32a1f754ba1c09b3695e0cb6cde7f/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191513_62.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/72b32a1f754ba1c09b3695e0cb6cde7f/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191522_64.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/72b32a1f754ba1c09b3695e0cb6cde7f/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191542_35.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 搭建后台收藏管理页面
### 添加collect_list.html收藏列表页面

```html
{% extends &#x27;admin/base.html&#x27; %}

{% block content %}
    &lt;section class=&quot;content-header&quot;&gt;
        &lt;h1&gt;微电影管理系统&lt;/h1&gt;
   </p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年11月3日 19:11</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/72b32a1f754ba1c09b3695e0cb6cde7f/" class="viewmore">阅读更多</a>
        </li>
    
        <li>
            <h3 class="blogtitle"><a href="//blog.starmeow.cn/detail/66f041e16a60928b05a7e228a89c3799/">【Flask微电影】12.搭建后台页面-权限管理、角色管理、管理员管理</a></h3>
            
                <!--多图模式 置顶设计-->
                <span class="bplist">
                    
                        <a href="//blog.starmeow.cn/detail/66f041e16a60928b05a7e228a89c3799/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191839_86.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/66f041e16a60928b05a7e228a89c3799/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191849_69.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/66f041e16a60928b05a7e228a89c3799/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191911_97.png" alt=""></a>
                    
                        <a href="//blog.starmeow.cn/detail/66f041e16a60928b05a7e228a89c3799/"> <img src="/media/blog/images/2018/11/BLOG_20181103_191922_57.png" alt=""></a>
                    
                </span>
            
            <p class="blogtext" style="height: 62px; overflow: hidden">## 搭建后台权限管理页面

### 添加auth_add.html权限添加页面

```html
{% extends &#x27;admin/base.html&#x27; %}

{% block content %}
    &lt;section class=&quot;content-header&quot;&gt;
        &lt;h1&gt;微电影管理系统&lt;/h1&gt;
     </p>
            <p class="bloginfo">
                <i class="avatar"><img src="/media/usercenter/image/2018/08/admin_image.jpg"></i>
                <span>admin</span>
                <span>2018年11月3日 19:17</span>
                <span>
                    【
                        
                            <a href="//blog.starmeow.cn/tag/13/">
                            Flask | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/4/">
                            Html | 
                        </a>
                        
                            <a href="//blog.starmeow.cn/tag/1/">
                            Python
                        </a>
                        】
                    
                </span>
            </p>
            <a href="//blog.starmeow.cn/detail/66f041e16a60928b05a7e228a89c3799/" class="viewmore">阅读更多</a>
        </li>
    
</ul>
                <!--pagelist-->
                <div class="pagelist">
    <a title="Total record">&nbsp;<b>共3页</b> </a>
    &nbsp;&nbsp;&nbsp;
    

    
        
            <b>1</b>&nbsp;
        
    
        
            <a href="?page=2">2</a>&nbsp;
        
    
        
            <a href="?page=3">3</a>&nbsp;
        
    

    
        <a href="?page=2">下一页</a>
    
</div>

                <!--pagelist end-->
            </div>

            <!--bloglist end-->
        </div>
        <div class="rbox">
            
                <div class="whitebg notice">
    <h2 class="htitle">当前用户</h2>
    
        未登录，点击 &nbsp; <a href="javascript:void(0);" onclick="show_oauth()" style="background: #4ac9e6; color: white">登录</a>
    

</div>

<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
</script>
            

            <!-- 热门排行 -->
            
<div class="whitebg paihang">
    <h2 class="htitle">热门排行</h2>
    <section class="topnews imgscale">
        
            
                <a href="//blog.starmeow.cn/detail/e369853df766fa44e1ed0ff613f563bd/"><img src="/media/blog/cover/2018/10/BLOG_COVER_20181017_215652_48.jpg"><span>【Flask微电影】01.环境搭建项目目录分析</span></a>
            
        
    </section>
    <ul>
        
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/d9d4f495e875a2e075a1a4a6e1b9770f/">【Flask微电影】04.定义数据模型，生成数据表和初始用户</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/43ec517d68b6edd3015b3edc9a11367b/">【Flask微电影】30.项目完成检查，nginx部署网站</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/">【Flask微电影】05.搭建前台页面-会员登录注册和会员中心</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/1c383cd30b7c298ab50293adfecb7b18/">【Flask微电影】02.使用蓝图构建项目目录</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/642e92efb79421734881b53e1e1b18b6/">【Flask微电影】06.搭建前台页面-电影列表、搜索播放页面</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/6c8349cc7260ae62e3b1396831a8398f/">【Flask微电影】03.安装mysql数据库及配置</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/f033ab37c30201f73f142449d037028d/">【Flask微电影】29.电影收藏功能，增加电影播放弹幕</a></li>
            
        
            
                <li><i></i><a href="//blog.starmeow.cn/detail/c0c7c76d30bd3dcaefc96f40275bdc0a/">【Flask微电影】07.搭建后台页面-后台登陆、后台主页页面</a></li>
            
        
    </ul>
</div>

            <!-- 猜你喜欢 -->
            
<div class="whitebg tuijian">
    <h2 class="htitle">猜你喜欢</h2>
    <section class="topnews imgscale">
        
            <a href="//blog.starmeow.cn/detail/65b9eea6e1cc6bb9f0cd2a47751a186f/">
                <img src="/media/blog/cover/2018/12/BLOG_COVER_20181202_193351_69.jpg" style=""><span>Django发送邮件，服务器限制25端口，使用465端口发送</span>
            </a>
        
    </section>
    <ul>
        
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/e2c420d928d4bf8ce0ff2ec19b371514/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】21.基于角色访问控制-权限管理：增删查改</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】09.搭建后台页面-标签管理、电影管理、预告管理</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/2838023a778dfaecdc212708f721b788/">
                        <i><img src="/media/blog/cover/2018/10/BLOG_COVER_20181031_172142_27.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】08.搭建后台页面-密码修改、主页控制面板</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/14bfa6bb14875e45bba028a21ed38046/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】19.用户收藏电影：收藏列表和删除</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/ea5d2f1c4608232e07d3aa3d998e5135/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】14.电影标签管理：增删查改</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/a3f390d88e4c41f2747bfa2f1b5f87db/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】18.电影评论管理：评论列表和删除</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/03afdbd66e7929b125f8597834fa83a4/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】13.管理员登录、退出、装饰器进行访问控制</p>
                    </a>
                </li>
            
        
            
                <li>
                    <a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/">
                        <i><img src="/media/blog/cover/default-cover.png" style="margin-top:9px;max-height:40px"></i>
                        <p>【Flask微电影】05.搭建前台页面-会员登录注册和会员中心</p>
                    </a>
                </li>
            
        
    </ul>
</div>

            <div class="ad whitebg imgscale">
                <ul>
                    <li>
<ul>
    <li><a href="https://cloud.tencent.com/redirect.php?redirect=1025&cps_key=c275889408c42f3262cb901a9cc7e80a&from=console" target="_blank"><img src="/static/blog_v0_2/images/ads/tx01-560x300.jpg"></a></li>
</ul></li>
                </ul>
            </div>

            <!-- 标签云 -->
            
<div class="whitebg cloud">
    <h2 class="htitle">标签云</h2>
    <ul>
        
            <a href="//blog.starmeow.cn/tag/27/">Ceph</a>
        
            <a href="//blog.starmeow.cn/tag/7/">Clonezilla</a>
        
            <a href="//blog.starmeow.cn/tag/2/">Django</a>
        
            <a href="//blog.starmeow.cn/tag/24/">Docker</a>
        
            <a href="//blog.starmeow.cn/tag/13/">Flask</a>
        
            <a href="//blog.starmeow.cn/tag/4/">Html</a>
        
            <a href="//blog.starmeow.cn/tag/23/">iptables</a>
        
            <a href="//blog.starmeow.cn/tag/3/">JavaScript</a>
        
            <a href="//blog.starmeow.cn/tag/26/">Jenkins</a>
        
            <a href="//blog.starmeow.cn/tag/9/">JQuery</a>
        
            <a href="//blog.starmeow.cn/tag/22/">keepalived</a>
        
            <a href="//blog.starmeow.cn/tag/25/">Kubernetes</a>
        
            <a href="//blog.starmeow.cn/tag/10/">Linux</a>
        
            <a href="//blog.starmeow.cn/tag/6/">Mac</a>
        
            <a href="//blog.starmeow.cn/tag/14/">MySQL</a>
        
            <a href="//blog.starmeow.cn/tag/17/">Nginx</a>
        
            <a href="//blog.starmeow.cn/tag/29/">OpenCore</a>
        
            <a href="//blog.starmeow.cn/tag/28/">OpenStack</a>
        
            <a href="//blog.starmeow.cn/tag/20/">Powershell</a>
        
            <a href="//blog.starmeow.cn/tag/1/">Python</a>
        
            <a href="//blog.starmeow.cn/tag/15/">Redis</a>
        
            <a href="//blog.starmeow.cn/tag/18/">Shell</a>
        
            <a href="//blog.starmeow.cn/tag/19/">Vue</a>
        
            <a href="//blog.starmeow.cn/tag/21/">Windows</a>
        
            <a href="//blog.starmeow.cn/tag/30/">Zabbix</a>
        
            <a href="//blog.starmeow.cn/tag/8/">文件</a>
        
            <a href="//blog.starmeow.cn/tag/11/">权限</a>
        
            <a href="//blog.starmeow.cn/tag/16/">爬虫</a>
        
            <a href="//blog.starmeow.cn/tag/12/">认证</a>
        
    </ul>
</div>

            <!-- 站长推荐 -->
            
<div class="whitebg wenzi">
    <h2 class="htitle">站长推荐</h2>
    <ul>
        
            <li><a href="//blog.starmeow.cn/detail/35f4a8d465e6e1edc05f3d8ab658c551/">【Flask微电影】27.电影页面上映轮播预告，搜索、标签筛选列表</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/e2c420d928d4bf8ce0ff2ec19b371514/">【Flask微电影】21.基于角色访问控制-权限管理：增删查改</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/9a1158154dfa42caddbd0694a4e9bdc8/">【Flask微电影】09.搭建后台页面-标签管理、电影管理、预告管理</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/2838023a778dfaecdc212708f721b788/">【Flask微电影】08.搭建后台页面-密码修改、主页控制面板</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/14bfa6bb14875e45bba028a21ed38046/">【Flask微电影】19.用户收藏电影：收藏列表和删除</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/ea5d2f1c4608232e07d3aa3d998e5135/">【Flask微电影】14.电影标签管理：增删查改</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/a3f390d88e4c41f2747bfa2f1b5f87db/">【Flask微电影】18.电影评论管理：评论列表和删除</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/03afdbd66e7929b125f8597834fa83a4/">【Flask微电影】13.管理员登录、退出、装饰器进行访问控制</a></li>
        
            <li><a href="//blog.starmeow.cn/detail/67c6a1e7ce56d3d6fa748ab6d9af3fd7/">【Flask微电影】05.搭建前台页面-会员登录注册和会员中心</a></li>
        
    </ul>
</div>

            <div class="ad whitebg imgscale">
                <ul>
                    <li>
<ul>
    <li><a href="https://cloud.tencent.com/redirect.php?redirect=1014&cps_key=c275889408c42f3262cb901a9cc7e80a&from=console" target="_blank"><img src="/static/blog_v0_2/images/ads/tx02-560x300.jpg"></a></li>
</ul></li>
                </ul>
            </div>

            <!-- 站点信息 -->
            
<div class="whitebg tongji">
    <h2 class="htitle">站点信息</h2>
    <ul>
        <li><b>建站时间</b>：网站已运行1289天</li>
        <li><b>系统信息</b>：Linux</li>
        <li><b>后台程序</b>：Python: 3.8.10</li>
        <li><b>网站框架</b>：Django: 3.2.6</li>
        <li><b>文章统计</b>：256 篇</li>
        <li><b>文章评论</b>：57 条</li>
        <li><b>腾讯分析</b>：<a href="https://v2.ta.qq.com" target="_blank">网站概况-腾讯分析</a></li>
        <li><b>百度统计</b>：<a href="https://tongji.baidu.com/web/welcome/ico?s=ae419f58fb6b59f44d4f69954a5bb4a7" target="_blank">网站概况-百度统计</a></li>
        <li><b>公众号</b>：微信扫描二维码，关注我们</li>
        <img src="/static/blog_v0_2/images/qrcode_wx_public.jpg" class="tongji_gzh">
        <li><b>QQ群</b>：QQ加群，下载网站的学习源码</li>
        <img src="/static/blog_v0_2/images/qrcode_qq_group.png" class="tongji_gzh">
    </ul>
</div>

        </div>
    </article>



<footer id="id_show_dashang">
    <div class="box">
        
        <div class="endnav">
            <p><b>站点声明：<br>
                
            </b></p>
            <p>1. 本站文章均可转载，不介意附上本文链接</p>
            <p>2. 如出现侵权内容，请直接联系我删除</p>
            <p>
                Copyright © <a href="http://blog.starmeow.cn" target="_blank">www.starmeow.cn</a> All Rights Reserved.
            </p>
            <p>
            <p>
                <a target="_blank" href="http://beian.miit.gov.cn/">
                    <img src="/static/blog_v0_2/images/shubeian.png"
                         style="max-height: 13px;display:inline-block;"><span> 蜀ICP备18033933号-1</span>
                </a>
                <a href="#">
                    <span style="display: none">http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=51012202000405</span>
                    <img src="/static/blog_v0_2/images/beian.png" style="max-height: 13px;display:inline-block;"><span>  川公网安备 51012202000405号</span>
                </a>
            </p>
        </div>
    </div>
    <!-- 原来的返回顶部按钮
    <a href="#">
        <div class="top"></div>
    </a>
    -->
</footer>

<!--jquery悬浮扇形弹性展开菜单特效插件可拖拽-->
<div style="height: 0">
    <svg width="0" height="0">
        <defs>
            <filter id="goo">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"></feGaussianBlur>
                <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9"
                               result="goo"></feColorMatrix>
                <feComposite in="SourceGraphic" in2="goo" operator="atop"></feComposite>
            </filter>
        </defs>
    </svg>
    <div class="aside-nav bounceInUp animated" id="aside-nav">
        <label for="" class="aside-menu" title="按住拖动">菜单</label>

        <a href="javascript:window.scroll(0, 0);" title="返回顶部" class="menu-item menu-line menu-first">返回<br>顶部</a>
        <a href="javascript:void(0)" title="显示标题导航" id="id_show_title" class="menu-item menu-second">标题</a>
        <a href="javascript:if ($('pre code').css('white-space') === 'pre') {$('pre code').css('white-space', 'pre-wrap')} else {$('pre code').css('white-space', 'pre')}"
           title="切换代码自动换行" class="menu-item menu-third">换行</a>
        <a href="javascript:void(0)" onclick="show_oauth()" title="登录网站" class="menu-item menu-line menu-fourth">登录<br>网站</a>
    </div>
</div>

<!--显示登录模态框-->
<div class="modal fade" id="id_oauth_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">OAuth认证登录</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="text-center">
                            <a href="//blog.starmeow.cn/oauth/github_login/?current_url=
                                    http://
                                    blog.starmeow.cn/feature/3/">
                                <img class="img-circle center-block"
                                     src="/static/blog_v0_2/images/github_logo.png">
                                <small>GitHub</small>
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="text-center">
                            <a href="//blog.starmeow.cn/oauth/qq_login/?current_url=
                                    http://
                                    blog.starmeow.cn/feature/3/">
                                <img class="img-circle center-block" src="/static/blog_v0_2/images/qq_logo.png">
                                <small>QQ</small>
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="text-center">
                            <a href="//blog.starmeow.cn/oauth/github_login/?current_url=
                                    http://
                                    blog.starmeow.cn/feature/3/">
                                <img class="img-circle center-block" src="/static/blog_v0_2/logo.png">
                                <small>StarMeow</small>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script src="/static/blog_v0_2/js/comm.js"></script>
<!--[if lt IE 9]><script src="/static/blog_v0_2/js/modernizr.js"></script><![endif]-->

<script src="/static/blog_v0_2/asidenav/asidenav.js"></script>  <!--jquery悬浮扇形弹性展开菜单特效插件可拖拽-->


<script>
    $(function () {
        //页面初始化的时候，获取滚动条的高度（上次高度）
        let start_height = $(document).scrollTop();
        //获取导航栏的高度(包含 padding 和 border)
        let navigation_height = $('#header').outerHeight();
        $(window).scroll(function () {
            //触发滚动事件后，滚动条的高度（本次高度）
            let end_height = $(document).scrollTop();
            //触发后的高度 与 元素的高度对比
            if (end_height > navigation_height) {
                //$('#header').slideUp(1000);
                $('#header').css('top', '-60px');
            } else {
                //$('#header').removeClass('hide');
                //$('#header').slideDown(1000);
                $('#header').css('top', '0');
            }
            //触发后的高度 与 上次触发后的高度
            if (end_height < start_height) {
                //$('#header').removeClass('hide');
                //$('#header').slideDown(1000);
                $('#header').css('top', '0');
            }
            //再次获取滚动条的高度，用于下次触发事件后的对比
            start_height = $(document).scrollTop();
        });
    });

    //打开或关闭模态框
    function show_oauth() {
        $('#id_oauth_modal').modal()
    }

    //显示或隐藏打赏界面
    $("#id_show_dashang").mouseover(function () {
        $("#id_show_payment_code").toggle();
        $("#id_dashang").toggle()
    }).mouseout(function () {
        $("#id_show_payment_code").toggle();
        $("#id_dashang").toggle()
    })
</script>
<script type="text/javascript" src="/static/toastr/v2.1.3/toastr.min.js"></script>
<script type="text/javascript" src="/static/jquery/jquery.cookie/v1.4.1/jquery.cookie.js"></script>

<script>
    toastr.options = { // toastr配置
        "closeButton": true,
        "debug": false,
        "progressBar": true,
        "positionClass": "toast-bottom-full-width",
        "showDuration": "400",
        "hideDuration": "1000",
        "timeOut": "30000",
        "extendedTimeOut": "1000",
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "fadeIn",
        "hideMethod": "fadeOut",
        "width": "2000px"
    };

    $(function () {
        let ref = document.referrer;
        let reg = /^http(s)?:\/\/(.*?)\//;  //使用正则匹配域名；如果是替换域名：url.replace(reg, '被替换的域名')
        if (ref) {
            let domain = reg.exec(ref)[2];
            let old_domain = $.cookie('domain');
            if (old_domain !== domain && domain !== "blog.starmeow.cn") {  //如果cookie保存的历史域名不用，且当前的域名不等于指定域名，执行
                let domain_upper = domain.toUpperCase();
                toastr.info(`来自 ${domain_upper} 的朋友，我的博客 《 吾星喵 》`, "欢迎");
                $.cookie('domain', domain, {expires: 1, path: '/'});
            }
        }
        //$.cookie('domain', null)
    })
</script>

</body>
</html>
