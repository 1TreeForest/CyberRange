<!DOCTYPE html> <html lang="th" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#"> <head> <script>
    
        // html head
        var ENABLE_CONTENT_TRANSFORMER = '1' === '1';
        var useJqueryUICss = '' === '1';
        var use_nanoscroller = '' === '1';
        var action = 'view';
        var article_type_list_json = {"MULTI_CHAPTER":"\u0e21\u0e35\u0e2b\u0e25\u0e32\u0e22\u0e15\u0e2d\u0e19","SINGLE_CHAPTER":"\u0e15\u0e2d\u0e19\u0e40\u0e14\u0e35\u0e22\u0e27\u0e08\u0e1a","NO_CHAPTER":"\u0e15\u0e2d\u0e19\u0e40\u0e14\u0e35\u0e22\u0e27\u0e08\u0e1a"};
        var article_species_list_json = {"FICTION":"\u0e19\u0e34\u0e22\u0e32\u0e22","CHAT":"\u0e19\u0e34\u0e22\u0e32\u0e22\u0e41\u0e0a\u0e17","CARTOON":"\u0e01\u0e32\u0e23\u0e4c\u0e15\u0e39\u0e19","NONFICTION":"\u0e1a\u0e17\u0e04\u0e27\u0e32\u0e21","TOPIC":"\u0e01\u0e23\u0e30\u0e17\u0e39\u0e49","AUTHOR_INFO":"\u0e2b\u0e19\u0e49\u0e32\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27","COLLAB":"\u0e40\u0e02\u0e35\u0e22\u0e19\u0e40\u0e1b\u0e47\u0e19\u0e01\u0e25\u0e38\u0e48\u0e21"};
        var article_species_type_list_json = {"CARTOON":["MULTI_CHAPTER"],"FICTION":["MULTI_CHAPTER","SINGLE_CHAPTER"],"NONFICTION":["MULTI_CHAPTER","SINGLE_CHAPTER"],"TOPIC":["NO_CHAPTER"],"CHAT":["MULTI_CHAPTER"]};
        var device_name = 'Google Chrome-98.0.4758.102-windows';
        var check_browser = '1';
        var read_mode ='normal';
        var is_bgWhite = '' === '1';

        var CDN_ROOT_ASSET_IMAGE = `https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/`;
        var ROOT_ASSET_IMAGE = `https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/`;
        var ASSET_CSS_VERSION = 't_8a0ee';
        var ASSET_JS_VERSION = 't_8a0ee';
        var ASSET_IMAGES_VERSION = 't_8a0ee';

        var preview = '0';

                
        var RAW_GLOBAL_CONFIG = {article_guid: '19ca937b7b849800d51c543928d66bd0'};

        var header_type = 'reading';
                
        var article_cover_path = 'https://1417094351.rsc.cdn77.org/articles/6167/6166655/thumbnail/small.gif?1';
        var article_guid = RAW_GLOBAL_CONFIG.article_guid;
        var article_name = '《蝙蝠俠》-高清电影((2022]]~完整版在线观看'.replace(/'/g,'&apos;');
        var article_species = 'NONFICTION';
        var article_status = '2';
        var article_synopsis = '《蝙蝠俠》-高清电影((2022]]~完整版在线观看';
        var article_thumbnail_path = 'https://1417094351.rsc.cdn77.org/articles/6167/6166655/thumbnail/';
        var article_type = 'MULTI_CHAPTER';
        var article_has_shared_thumbnail = Number('0');
        var path_share_thumbnail_file = "";

        var comment_count = '0';
        var comment_count_full = '0';
        var favorite_count = '0';
        var favorite_count_full = '0';
        var rating_count = '0';
        var rating_count_full = '0';
        var view_count  = '8';
        var view_count_full = '8';
        var bubble_count  = '0';
        var bubble_count_full = '0';

        var is_collab = '0' || '0';

        var allow_copy_content = '0';
        var author_guid = '5925a52278869f654afcf7d69cdbd1c1';
        var author_name = '《蝙蝠俠》-高清电影((2022]]~完整版在线观看'.replace(/'/g,'&apos;').replace(/"/g,'&quot;');
        var category_id = '38';
        var category_name = 'สาระความรู้';
        var chapter_count = '0';
        var collaborator_list_json = [];
        var content_rating = parseInt('1');
        var last_edit_thai_date = '3 วันที่ผ่านมา';
        var enable_pm = '1' === '1';
        var is_end = '0' === '1';
        var is_hide_rating = '0' === '1';
        var user_id_publisher = '7102525';
        var publisher_thumbnail_edition = '1';
        var rating_total = '0';
                var tag_list_json = [{"tag_id":10663,"tag_group_id":2070,"tag_name":"batman","tag_type":2}];
        var thumbnail_edition = '1';
        var unpromoted_content_image = '';
        var unpromoted_cover_image = '0';
        var unpromoted_cover_image_path = '';
        var allow_comment = '1' === '1';
        var allow_sticker = '1' === '1';
                var chapter_list = 'null';
        var sell_chapter_list = '[]';
        var published_article_url = '';
        var chapter_sort_type = '';
        // paper version
            // publisher website
        var published_article_thumbnail = 'https://1417094351.rsc.cdn77.org/articles/6167/6166655/thumbnail/book/small.gif?1646198851';
            // RAW preorder
        var pre_order_thumbnail_path = '';
        var pre_order_guid = '';

                var meb_book_id = '';
        var meb_book_seller_link = 'https://www.mebmarket.com/index.php?action=BookDetails&amp;data=YToyOntzOjc6InVzZXJfaWQiO3M6NzoiNzEwMjUyNSI7czo3OiJib29rX2lkIjtOO30';
        
                var chapter_opt_key = '';
        var chapter_content_path = '';
        var single_chapter_guid = '';

                var current_chapter_guid = '';
        var track_chapter_guid = '';
        var twitter_address = '';
        var facebook_address = '';

        var chapter_title = '';
        var chapter_subtitle = '';

        var display_style = '0';
        var is_single_cover = '0';
        var chapter_guid_reading_history = '';
        const content_font_set = null;
        const content_font_path = '';
        let content_version = '' || '1';
        let chapter_censor_word = '';

        var trophy_data = null;
    
</script> <title>《蝙蝠俠》-高清电影((2022]]~完整版在线观看: สาระความรู้</title> <link rel="canonical" href="https://www.readawrite.com/a/19ca937b7b849800d51c543928d66bd0"> <meta name="description" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看"> <meta name="keywords" content="readawrite,รี้ดอะไร้ต์,รีดอะไรท์,รี้ดอะไรท์,รี้ดอะไร,นิยายออนไลน์,อ่านนิยาย,นิยาย,อ่านนิยายออนไลน์,นักเขียน,นักอ่าน,งานเขียน,บทความ,เรื่องสั้น,ฟิค,แต่งฟิค,แต่งนิยาย,《蝙蝠俠》-高清电影((2022]]~完整版在线观看,สาระความรู้,《蝙蝠俠》-高清电影((2022]]~完整版在线观看,spuspita,batman,ไม่ติดเหรียญ"> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta http-equiv="Content-Language" content="th"> <meta name="viewport" content="width=320"> <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"> <meta name="theme-color" content="#A6E6E0" /> <meta property="fb:app_id" content="1390259954548286"> <meta property="fb:admins" content="643127227"> <meta property="article:section" content="สาระความรู้"> <meta property="article:modified_time" content="2022-02-26 22:34:40"> <meta property="article:tag" content="batman"> <meta property="og:type" content="article"> <meta property="og:description" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看"> <meta property="og:image" content="https://1417094351.rsc.cdn77.org/articles/6167/6166655/thumbnail/small.gif?1"> <meta property="og:title" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看: สาระความรู้"> <meta property="og:url" content="https://www.readawrite.com/a/19ca937b7b849800d51c543928d66bd0"> <meta property="og:site_name" content="ReadAWrite"> <meta name="google-site-verification" content="ND9E3fx5Vb5A2hJ_przO1Wn4a5I2j_xi2YyMOzhqRsY" /> <meta property="og:image:width" content="200"> <meta property="og:image:height" content="200"> <meta itemprop="name" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看: สาระความรู้"> <meta itemprop="description" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看"> <meta itemprop="image" content="https://1417094351.rsc.cdn77.org/articles/6167/6166655/thumbnail/small.gif?1"> <meta itemprop="is_twitter_large" content=""> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看: สาระความรู้"> <meta name="twitter:description" content="《蝙蝠俠》-高清电影((2022]]~完整版在线观看"> <meta name="twitter:image" content="https://1417094351.rsc.cdn77.org/articles/6167/6166655/thumbnail/small.gif?1"> <meta name="viewport" content="width=device-width, initial-scale=1"> <style></style> <!--[if IE 9 ]>
        <meta http-equiv="X-UA-Compatible" content="IE=8;FF=3;OtherUA=4"/>
        <script type="text/javascript" src="https://www.readawrite.com/web/frontend/dist/assets/js/meb-jslib/vendor/typedarray.js?t_8a0ee"></script>
        <script type="text/javascript" src="https://www.readawrite.com/web/frontend/dist/assets/js/meb-jslib/vendor/jszip-utils.min.js?t_8a0ee"></script>
        <script type="text/javascript" src="https://www.readawrite.com/web/frontend/dist/assets/js/meb-jslib/vendor/aes-js.js?t_8a0ee"></script>
        <![endif]--> <!--[if lt IE 10]>
        <link rel="stylesheet" type="text/css" href="https://www.readawrite.com/web/frontend/dist/assets/css/ie10-viewport-bug-workaround.css?t_8a0ee">
        <![endif]--> <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]--> <link rel="shortcut icon" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/browser-icon.ico?t_8a0ee"> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/bootstrap.min.css?t_8a0ee"> <link id="colorCodeTheme" rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/article/normal-color-code.css?t_8a0ee"> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/article/default.css?t_8a0ee"> <link id="cssTheme" rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/article/theme-support.css?t_8a0ee"> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/article/modal-popup.css?t_8a0ee"> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/article/font_web.css?t_8a0ee"> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/meb-jslib/MebUtil.ContentTransformer.min.js?t_8a0ee"></script> <script language="javascript" type="text/javascript" src="https://www.readawrite.com/web/frontend/Config.js.php"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/jMeb.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/jquery-2.2.4.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/cookies.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/TextDecoder.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/meb-jslib/MebUtil.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/meb-jslib/MebUtil.MebZip.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/meb-jslib/vendor/jszip.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/meb-jslib/MebUtil.MebCrypto.min.js?1"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/sweetalert-for-ie.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/sweetalert2-ie9.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/jquery.matchHeight.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/article_helper.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/bootstrap-select.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/js.cookie.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/storage.min.js?t_8a0ee"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-SGF9XKKZK4"></script> <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-SGF9XKKZK4');
        </script> <script>
            function includeScript(filename,script_type) {
                const head = document.getElementsByTagName('head')[0];
                const tag_elem = document.createElement('script');
                tag_elem.src = filename;
                if (script_type.length >0)
                    tag_elem.type = script_type;
                head.appendChild(tag_elem)
            }
            function includeStyleSheet(filename,stylesheet_type){
                const head = document.getElementsByTagName('head')[0];
                const tag_elem = document.createElement('link');
                tag_elem.rel = 'stylesheet';
                if(stylesheet_type.length > 0)
                    tag_elem.type = stylesheet_type;
                tag_elem.href = filename;
                head.appendChild(tag_elem)
            }

            function decodeString(text_in){
                var parser = new DOMParser;
                var dom = parser.parseFromString(
                    '<!doctype html><body>' + text_in,
                    'text/html');
                return dom.body.textContent;
            }

            if (useJqueryUICss){
                includeScript('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/vendor/jquery-ui-1.11.4/jquery-ui.min.js','');
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/vendor/jquery-ui-1.11.4/jquery-ui.min.css','text/css');
            }
            if (use_nanoscroller){
                includeScript('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/jquery.nanoscroller.min.js','');
            }
            if ((action === 'view' || action === 'view_chapter') && ENABLE_CONTENT_TRANSFORMER){
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/article/view.css?t_8a0ee','')
            }
            else if(action === "view" || action === "view_chapter"){
                includeStyleSheet('https://fonts.googleapis.com/css?family=Pridi:300,400,500,700|Taviraj:300,300i,400,400i,500,500i,700,700i|Trirong:300,300i,400,400i,700,700i&amp;subset=thai','')
            }
        </script> <script>
            if (typeof history.replaceState === 'undefined') {
                history.replaceState = function () {
                };
            }
            if (typeof history.pushState === 'undefined') {
                history.pushState = function () {
                };
            }

            function loadScript(id, src) {
                var js, fjs = document.getElementsByTagName('script')[0];
                if (document.getElementById(id)) {
                    return;
                }
                js = document.createElement('script');
                js.id = id;
                js.src = src;
                fjs.parentNode.insertBefore(js, fjs);
            }

            function loadStyleSheet(src) {
                if (document.createStyleSheet) {
                    document.createStyleSheet(src);
                } else {
                    var stylesheet = document.createElement('link');
                    stylesheet.href = src;
                    stylesheet.rel = 'stylesheet';
                    stylesheet.type = 'text/css';
                    document.getElementsByTagName('head')[0].appendChild(stylesheet);
                }
            }

            function loadCustomCSS(stylesheet) {
                var wrapper = document.createElement('div');
                wrapper.innerHTML = stylesheet;
                var linkElement = wrapper.firstChild;
                document.getElementsByTagName('head')[0].appendChild(wrapper);
            }

            /*(adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-2892406724587485",
                enable_page_level_ads: true
            });*/

            !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
                n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
                n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
                t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
                document,'script','https://connect.facebook.net/en_US/fbevents.js');

            fbq('set', 'autoConfig', false, '622255647879770');
            fbq('init', '622255647879770'); // Insert your pixel ID here.
            fbq('track', 'PageView');

            var articleH = ArticleHelper.getInstance({
                article_type_list_json: article_type_list_json,
                article_species_list_json: article_species_list_json,
                article_species_type_list_json: article_species_type_list_json,
                browser_name: device_name,
            });
            $(function () {
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/bootstrap-glyphicons.css','text/css');
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/sweetalert2-ie9.min.css','text/css');
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/fontawesome.min.css','text/css');
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/solid.min.css','text/css');
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/font-awesome.min.css','text/css');

                                                                
                                    loadCustomCSS('<link rel="stylesheet" type="text/css" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/parsley.min.css"><link rel="stylesheet" type="text/css" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/ckeditor/ckeditor.all.css">');
                
                if(use_nanoscroller){
                    includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/nanoscroller.min.css','text/css');
                }
                includeStyleSheet('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/bootstrap-select.min.css','text/css');

                                            });
        </script> <script type="text/javascript">

            var storage = new Storage();
            if (storage.checkSupportLocalStorage) {
                Object.keys(localStorage).forEach(function (key) {
                    storage[key] = localStorage.getItem(key);
                });
            }

            //storage.storageType = 1;
            //console.log(storage.getStorage('token'));
            var amountScrolled = 300;

            var device_pc = true;
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) {
                device_pc = false;
            }

            $(window).scroll(function () {
                if ($(window).scrollTop() > amountScrolled) {
                    $('a.back-to-top').fadeIn('slow');
                } else {
                    $('a.back-to-top').fadeOut('slow');
                }
            });

            /* 20170119: temporary remove/hide some elements */
            // $(function () {
            //     $('.myPickElement').remove();
            //     $('.trophyElement').remove();
            // });
        </script> <noscript> <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=622255647879770&ev=PageView&noscript=1"/> </noscript> <script type="application/ld+json">
                    {"@context":"http:\/\/schema.org","@type":"Product","image":"https:\/\/1417094351.rsc.cdn77.org\/articles\/6167\/6166655\/thumbnail\/small.gif?1","name":"\u300a\u8759\u8760\u4fe0\u300b-\u9ad8\u6e05\u7535\u5f71((2022]]~\u5b8c\u6574\u7248\u5728\u7ebf\u89c2\u770b: \u0e2a\u0e32\u0e23\u0e30\u0e04\u0e27\u0e32\u0e21\u0e23\u0e39\u0e49","description":"\u300a\u8759\u8760\u4fe0\u300b-\u9ad8\u6e05\u7535\u5f71((2022]]~\u5b8c\u6574\u7248\u5728\u7ebf\u89c2\u770b: \u0e2a\u0e32\u0e23\u0e30\u0e04\u0e27\u0e32\u0e21\u0e23\u0e39\u0e49\n \u300a\u8759\u8760\u4fe0\u300b-\u9ad8\u6e05\u7535\u5f71((2022]]~\u5b8c\u6574\u7248\u5728\u7ebf\u89c2\u770b","offers":{"@type":"Offer","price":"0.00","priceCurrency":"THB"}}
                </script> </head> <body class="read-mode-normal"> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/content_helper.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/jPaginator.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/dateTime.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/list_article.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/trophy.js?t_8a0ee"></script> <script>
        var os = '';
        var a_crypto = window.crypto || window.msCrypto;
        var a_cryptoSubtle = null, warning_crypto = null;

        var check_browser = '1';
        check_browser = !jMeb.empty(check_browser) ? check_browser : false;

        if (a_crypto) {
            a_cryptoSubtle = a_crypto.subtle || a_crypto.webkitSubtle;
        }

        if (!a_cryptoSubtle) {
            warning_crypto = function () {
                if (storage.getStorage('warning_crypto') != '1') {
                    if (!a_cryptoSubtle && check_browser) {
                        swal({
                            allowOutsideClick: false,
                            //html: true,
                            title: 'Browser ของคุณเป็นรุ่นเก่า อาจใช้เวลาโหลดนาน กรุณารอสักครู่',
                            html: 'เพื่อประสบการณ์การใช้งานที่ดี กรุณาอัพเดท Browser จร้า <a href="https://www.google.com/chrome/browser/desktop/">Chrome</a> , <a href="https://www.mozilla.org/en-US/firefox/">Firefox</a> , or <a href="https://www.microsoft.com/en-us/download/internet-explorer.aspx">Internet Explorer</a>',
                            type: 'warning',
                            confirmButtonText: "OK",
                            confirmButtonColor: "#52c1b2"
                        }).then(function () {
                            if (typeof callback === 'function') {
                                callback();
                            }
                        });
                    }
                    storage.setStorage('warning_crypto', '1');
                }
            }
        }

        if (typeof warning_crypto === 'function') {
            warning_crypto();
        }
    </script> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/pixabay-auto-complete.css?t_8a0ee"> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/pixabay-auto-complete.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/header.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/newsfeed.js?t_8a0ee"></script> <script defer src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js//article/ManageModal.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/login.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/parsley.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/parsley.th.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/user_consent.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/jquery.validate.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/vendor/jquery-ui-1.11.4/jquery-ui.min.js?t_8a0ee"></script> <link href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/parsley.min.css?t_8a0ee" rel="stylesheet"> <link rel="stylesheet" type="text/css" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/vendor/jquery-ui-1.11.4/jquery-ui.min.css?t_8a0ee"> <style type="text/css">
    #popup_login_and_register .form-control, #form_fogot_pop .form-control {
        height: unset;
        padding: 9px 12px;
        border-radius: 5px;
        max-width: unset;
        text-align: left;
    }

    #popup_login_and_register *, #form_fogot_pop * {
        font-family: Helvetica;
    }

    #popup_login_and_register label.error {
        position: absolute;
        top: 0;
        right: 0;
    }

    #popup_login_and_register label#username-error.error {
        position: relative;
        left: 0;
    }

    .btn_go_register {
        text-decoration-line: underline;
        color: #1fb49f;
    }

    .btn_go_register:hover, .btn_go_register:focus {
        color: #1ea28f;
    }

    #form_fogot_pop .btn {
        padding: 10px 20px;
        border-radius: 20px;
    }

    #divGender {
        vertical-align: top;
        width: 100%;
    }

    #gender {
        width: 180px;
    }

    #divBirthday {
        vertical-align: top;
        width: 100%;
    }

    #birthday {
        width: 130px;
    }

    .select>select {
        -webkit-appearance: none;
        -moz-appearance: none;
        -ms-appearance: none;
        appearance: none;
        background: #ffffff;
        background-image: none;
     }
    /* Remove IE arrow */
    .select>select::-ms-expand {
        display: none;
    }
    /* Custom Select */
    .select {
        position: relative;
        display: flex;
        width: 180px;
        line-height: 3;
        background: #ffffff;
        overflow: hidden;
        border-radius: 5px;
    }
    .select>select {
        flex: 1;
        padding: 0 12px;
        cursor: pointer;
    }
    /* Arrow */
    .select::after {
        content: '\25BC';
        position: absolute;
        top: 0;
        right: 0;
        padding: 0;
        padding-right: 12px;
        background: transparent;
        cursor: pointer;
        pointer-events: none;
        -webkit-transition: .25s all ease;
        -o-transition: .25s all ease;
        transition: .25s all ease;
        box-shadow: inset 0 1px 1px rgba(0,0,0,.075)
    }
    /* Transition */
    .select:hover::after {
        color: #303030;
    }

    @media (min-width: 768px) {
        #popup_login_and_register .modal-dialog {
            max-width: 800px;
            width: 90vw;
        }

        .borderRightDash {
            border-right: 1px dashed rgba(0, 0, 0, 0.3);
        }

        .borderRightSolid {
            border-right: 1px solid rgba(0, 0, 0, 0.3);
        }
    }

    @media (max-width: 767px) {

        #divGender {
            width: 110px;
        }

        #gender {
            width: 110px;
        }

        #divBirthday {
            width: calc(100% - 120px);
        }

        #birthday {
            width: 110px;
        }

        .select {
            width: 110px;
        }


    }

    @media (max-width: 359px) {

        #divGender {
            width: 100%;
        }

        #divBirthday {
            width: 100%;
        }


    }

</style> <div class="modal fade" id="popup_login_and_register" style="width: 100%"> <div class="modal-dialog" role="document" style="/*margin-top: 60px;*/"> <div class="modal-content" style="border-radius: 17px;"> <button style="position: absolute;right: 10px;top: 10px;z-index: 10;" id="close_popup_login_and_register" aria-label="Close" data-dismiss="modal" class="close" type="button"><span aria-hidden="true">✖</span></button> <div class="modal-body paddingAllNone" id="modal_body_form_login_and_register" style="border-radius: 17px;"> </div> </div> </div> </div> <script type="text/javascript">
var setting = {};
var Login = Login.getInstance(setting);
    
</script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/reading_helper.js?t_8a0ee"></script> <style type="text/css">

    .img-icon-search {
        width: 22px;
        height: 22px;
        display: inline-block;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-search-white@2x.png?t_8a0ee");
    }

    .img-icon-notification {
        width: 22px;
        height: 22px;
        display: inline-block;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-notification-white@2x.png?t_8a0ee");
    }

    .img-icon-menu {
        width: 22px;
        height: 22px;
        display: inline-block;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_icon_white@2x.png?t_8a0ee");
    }

    .img-icon-search:focus, .img-icon-search:hover {
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-search@2x.png?t_8a0ee");
    }

    .img-icon-notification:focus, .img-icon-notification:hover {
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-notification@2x.png?t_8a0ee");
    }

    .img-icon-menu:focus, .img-icon-menu:hover {
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_icon@2x.png?t_8a0ee");
    }


    /*theme*/
    .read-mode-night .img-icon-search, .read-mode-dark .img-icon-search {
        width: 22px;
        height: 22px;
        display: inline-block;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-search@2x.png?t_8a0ee");
    }

    .read-mode-night .img-icon-notification, .read-mode-dark .img-icon-notification {
        width: 22px;
        height: 22px;
        display: inline-block;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-notification@2x.png?t_8a0ee");
    }

    .read-mode-night .img-icon-menu, .read-mode-dark .img-icon-menu {
        width: 22px;
        height: 22px;
        display: inline-block;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_icon@2x.png?t_8a0ee");
    }

    .read-mode-night .img-icon-search:focus, .read-mode-night .img-icon-search:hover,
    .read-mode-dark .img-icon-search:focus, .read-mode-dark .img-icon-menu:hover {
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-search-white@2x.png?t_8a0ee");
    }

    .read-mode-night .img-icon-notification:focus, .read-mode-night .img-icon-notification:hover,
    .read-mode-dark .img-icon-search:focus, .read-mode-dark .img-icon-menu:hover {
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/ic-notification-white@2x.png?t_8a0ee");
    }

    .read-mode-night .img-icon-menu:focus, .read-mode-night .img-icon-menu:hover,
    .read-mode-dark .img-icon-search:focus, .read-mode-dark .img-icon-menu:hover {
        background-image: url("https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_icon_white@2x.png?t_8a0ee");
    }

    /*theme*/

    @media (min-width: 768px) {
        #headerMenu {
            height: 54px;
        }
    }

    
    .dropdown-menu > div > li > a {
        display: inline-block;
        padding: 3px 20px;
        clear: both;
        font-weight: normal;
        line-height: 1.42857143;
        color: #333;
        white-space: nowrap;
    }

    .dropdown-menu > div > li > a:hover,
    .dropdown-menu > div > li > a:focus {
        color: #262626;
        text-decoration: none;
        background-color: #f5f5f5;
    }

    .navbar-xs {
        min-height: 36px;
        border-radius: 0;
        margin-bottom: 0;
    }

    .navbar-xs .navbar-brand {
        padding: 2px 8px;
        font-size: 14px;
        line-height: 14px;
    }

    .navbar-xs .navbar-nav > li > a {
        border-right: 1px solid #ddd;
        padding-top: 2px;
        padding-bottom: 2px;
        line-height: 16px
    }

    #theme_label button, #theme_label button:active, #headerMenuMobile button, #headerMenuMobile button:active {
        padding: 0;
        background-color: transparent;
    }

    #theme_label button .caret, #headerMenuMobile button .caret {
        right: 4px;
    }

    .themeLabel > a {
        padding: 2px 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: transparent !important;
        color: #000;
    }

    .themeLabel > a:focus, .themeLabel > a:active {
        background-color: transparent !important;
        color: #000;
    }

    @media (max-width: 459px) {
        .hidden-459-down {
            display: none !important;
        }
    }

    @media (min-width: 460px) and (max-width: 599px) {
        .hidden-460-599 {
            display: none !important;
        }
    }

    @media (min-width: 600px) and (max-width: 767px) {
        .hidden-600-767 {
            display: none !important;
        }
    }

    /*@media (max-width: 767px) {*/
    /*#headerMenuMobile #logo_readawrite {*/
    /*margin-left: -20px;*/
    /*}*/
    /*}*/

    #csDropChapterList > li > a {
        background-color: rgba(255, 255, 255, 0.5);
    }

    #csDropChapterList > li > a.beforeCurrent:visited {
        background-color: #efefef;
    }

    #csDropChapterList > li > a:hover,
    #csDropChapterList > li > a:focus {
        color: #262626;
        text-decoration: none;
        background-color: #f5f5f5;
    }

    #csDropdownChapter > .dropdown-menu > .nano > .nano-pane {
        width: 7px;
        background: transparent;
    }

    .chatHead-it {
        padding: 13px 15px;
    }

    @media screen and (max-width: 767px) {
        .chatHead-it {
            padding: 13px 0;
        }

        .chatHead-xs {
            width: 37px;
        }

        .chatHead-sm {
            width: 90px;
        }

        .chatHead-md {
            width: calc(100% - 254px);
        }

        @media screen and (max-width: 359px) {

            .chatHead-xs {
                width: 32px;
            }

            .chatHead-sm {
                width: 85px;
            }

            .chatHead-sm li img {
                width: 22px;
            }

            .chatHead-md {
                width: calc(100% - 234px);
            }
    }
</style> <div class="modal fade" id="search_bar" style="width: 100%"> <div class="modal-dialog bgMainTheme" role="document" style="width: 100%;margin:0;height: unset;"> <div class="search-box-header" style="width: calc(100% - 20px);margin: 0 auto;text-align: center;max-width: 1180px;"> <form id="frmSearch" class="navbar-form paddingRightNone" action="https://www.readawrite.com/?action=search_article" method="post" style="padding-left:0;width: calc(100% - 32px);margin: 0;display: inline-block;"> <div class="bgWhite borderRound" > <input type="text" id="search_key" name="search_key" placeholder="ค้นหา" class="borderNone borderRound paddingAll5 showInlineBlock width100Percent"> <input type="hidden" id="exact_search" name="exact_search"/> </div> </form> <i class="fa fa-times close_search" aria-hidden="true" style="font-size: 20px;cursor: pointer;display: inline-block;margin: 6px 0 6px 10px;"></i> </div> </div> </div> <nav id="headerMenu" class="header-menu header-div navbar navbar-inverse bgMainTheme hidden-xs bottomBorder marginBottomNone"> <div class="container header" style="padding: 5px 0;"> <div class="collapse navbar-collapse header_menu paddingLeftRightNone" id="myNavbar"> <div class="col-xs-5" style="padding: 0;"> <ul class="nav navbar-nav"> <li class="header_label cursorPointer" id="reading_label"> <a href="https://www.readawrite.com/">นิยาย</a> </li> <li class="header_label cursorPointer" id="chat_label"> <a href="https://www.readawrite.com/?action=index_chat">นิยายแชท</a> </li> <li class="header_label cursorPointer" id="topic_label"> <a href="https://www.readawrite.com/?action=cat_popular_new&article_species=TOPIC">กระทู้</a> </li> <li class="header_label cursorPointer" id="writing_label"> <a id="my_writing_tab" href="" class="my_writing_link">เขียน</a> </li> <li class="header_label cursorPointer" id="proof_label"> <a href="https://www.readawrite.com/?action=my_writing_proof">ตรวจ</a> </li> </ul> </div> <div class="navbar-header col-xs-2" style="padding: 0;text-align: center;"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a href="https://www.readawrite.com/" style=""> <img alt="หน้าหลัก" id="logo_readawrite" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/readawrite-logo-svg.svg?t_8a0ee"> </a> </div> <div class="col-xs-5" style="padding: 0;float: right;"> <ul class="nav navbar-nav pull-right"> <li class="hidden-xs"> <span title="ค้นหา" id="Search_button" class="borderNone txtSize16 txtDavyGrey showInlineBlock pull-left cursorPointer search_button" style="padding: 0;margin-left: 24px;" aria-hidden="true" onclick=""> <div class="img-icon-search" style="margin-top: 12px;margin-bottom: 4px;"></div> </span> </li> <li id="menuLogin"><a style="padding-left: 0;padding-right: 0;margin-left: 24px;" href="javascript:Login.showFormLoginAndRegister('login')" >เข้าสู่ระบบ / สมัครสมาชิก</a></li> </ul> </div> </div> </div> </nav> <nav id="headerMenuMobile" class=""> <nav class="header-menu navbar navbar-inverse hidden-sm hidden-md hidden-lg width100Percent navbar-xs bgMainTheme borderNone paddingTopBottom5 bottomShadow" role="navigation"> <div> <div class="col-xs-4" style="padding: 6px 0;"> <div id="menu_select_comment_div" class="dropdown-select-menu-header" style="display: inline-block;"> <div id="menu_select_comment" class="dropdown dropdown-select-border-menu-header"> <a class="dropdown-toggle dropdown-select-toggle-menu-header" data-toggle="dropdown" href="#"> <div class="img-icon-menu"></div> </a> <ul id="" class="dropdown-menu dropdown-menu-option" style="margin-top: 16px;left: 6px;box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.32);border: 0;"> <div class="arrow-up-box" style="left: 15px;"></div> <li class="reading_link_sm"> <a href="https://www.readawrite.com/" class="" style="font-size: 13px;">นิยาย</a> </li> <li class="chat_link_sm"> <a href="https://www.readawrite.com/?action=index_chat" class="" style="font-size: 13px;">นิยายแชท</a> </li> <li class="topic_link_sm"> <a href="https://www.readawrite.com/?action=cat_popular_new&article_species=TOPIC" class="" style="font-size: 13px;">กระทู้</a> </li> <li class="writing_link_sm"> <a id="my_writing_tab" href="" class="my_writing_link" style="font-size: 13px;">เขียน</a> </li> <li class="proof_link_sm"> <a href="https://www.readawrite.com/?action=my_writing_proof" class="" style="font-size: 13px;">ตรวจ</a> </li> </ul> </div> </div> <span> <span title="ค้นหา" class="search_button cursorPointer" style="padding: 0;border-radius: 5px; margin-left: 5px;"><div class="img-icon-search"></div></span> </span> </div> <div class="navbar-header col-xs-4" style="padding: 0;text-align: center;"> <a href="https://www.readawrite.com/"> <img alt="หน้าหลัก" id="logo_readawrite" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/readawrite-logo-svg.svg?t_8a0ee" style="width: 120px; padding-top: -6px;"> </a> </div> <div class="col-xs-4" style="padding: 3px 0;float: right;text-align: right;padding-top: 6px;padding-bottom: 6px;"> <span class="marginRight10"> <a href="javascript:Login.showFormLoginAndRegister('login')" style="font-size: 13px;"> <i class="fa fa-user" style="font-size: 24px;vertical-align: middle;"></i> </a> </span> </div> </div> </nav> </nav> <form id="form-submit-to-coin" method="post" action="https://mebcoin.mebmarket.com/?action=buy" target="_blank"> <input type="hidden" name="token" value=""/> <input type="hidden" name="business_id" value="QE2GIFRQEEIWGJQJ"/> </form> <script type="text/javascript">
    
    var header_variable = {
        action : 'view',
        device_id_key : '551e786d1b041b3030a226529bfd58a1',
        device_name_key : 'Google Chrome-98.0.4758.102-windows',
        header_type : 'reading',
        article_species: 'NONFICTION',
        show_submenu: '1' === '1',
        fixed_top: '1' === '1'
    };
    

    var setting = {
        header_type: header_variable.header_type,
        device_id_key: header_variable.device_id_key,
        device_name_key: header_variable.device_name_key,
        action: header_variable.action,
        show_submenu: header_variable.show_submenu,
        fixed_top: header_variable.fixed_top
    };

    var Header = Header.getInstance(setting);
    var NewsFeed = NewsFeed.getInstance();
    $(function () {
        Header.ready();
        NewsFeed.popupNewsFeed();
    });

    (function (user_token, header_type, action, show_submenu) {
        const logged_in = !jMeb.empty(CookiesJS.getCookie('user_token'));

        if(show_submenu){
            $('body').addClass('show_submenu');
        }

        if(header_type === 'writing' || header_type === 'preorder' || header_type === 'proof'){
            $('.themeLabel').remove();
        }

        $('.my_writing_link').attr('href', WEB_URL_HTTPS + (logged_in ? '?action=main_manage_article' : '?action=why_readawrite'));
        // meb coin form
        $('#form-submit-to-coin input[name=token]').val(user_token);
        // header link sm
        $('.' + header_type + '_link_sm').addClass('active').children().addClass('txtBold');
        // header link desktop
        $('#' + header_type + '_label').children().addClass('txtBold menuSelected');

        if(action !== 'view' && action !== 'view_chapter' && action !== 'manage_article' && action !== 'manage_chapter' && action !== 'manage_cartoon' && action !== 'manage_topic' && header_variable.fixed_top == 1){
            $('#headerMenu.hidden-xs').addClass('navbar-fixed-top');
            $('#headerMenuMobile').addClass('navbar-fixed-top');
            $('#subHeaderMenu').addClass('navbar-fixed-top');
        }

        // submenu object
        const submenu_items = {
            reading_link_obj:{
                raw_index_link:{
                    link_display_name:'หน้าแรก',
                    link_address:WEB_URL_HTTPS,
                    link_logged_in:false
                },
                cat_popular_new_link: {
                    link_display_name:'ใหม่มาแรง',
                    link_address:WEB_URL_HTTPS + '?action=cat_popular_new',
                    link_logged_in:false
                },
                cat_tophits_link:{
                    link_display_name:'เรื่องฮิต',
                    link_address:WEB_URL_HTTPS + '?action=cat_tophits',
                    link_logged_in:false
                },
                cat_newentry_link:{
                    link_display_name:'มาใหม่',
                    link_address:WEB_URL_HTTPS + '?action=cat_newentry',
                    link_logged_in:false
                },
                cat_update_link:{
                    link_display_name:'อัปเดต',
                    link_address:WEB_URL_HTTPS + '?action=cat_update',
                    link_logged_in:false
                },
                cat_end_link:{
                    link_display_name:'จบแล้ว',
                    link_address:WEB_URL_HTTPS + '?action=cat_end',
                    link_logged_in:false
                },
                list_category_link:{
                    link_display_name:'หมวดหมู่',
                    link_address:WEB_URL_HTTPS + '?action=list_category',
                    link_logged_in:false
                },
                my_page_link:{
                    link_display_name:'My Reading',
                    link_address:WEB_URL_HTTPS  + '?action=my_page',
                    link_logged_in:true
                },
                list_history_article_link:{
                    link_id:'list_history_article_link',
                    link_display_name:'อ่านล่าสุด',
                    link_address:WEB_URL_HTTPS + '?action=list_history_article',
                    link_logged_in:false
                }
            },
            chat_link_obj:{
                index_chat_link:{
                    link_display_name:'นิยายแชท',
                    link_address:WEB_URL_HTTPS + '?action=index_chat',
                    link_logged_in:false
                },
                cat_popular_new_link:{
                    link_display_name:'ใหม่มาแรง',
                    link_address:WEB_URL_HTTPS + '?action=cat_popular_new&article_species=CHAT',
                    link_logged_in:false
                },
                cat_tophits_link:{
                    link_display_name:'เรื่องฮิต',
                    link_address:WEB_URL_HTTPS + '?action=cat_tophits&article_species=CHAT',
                    link_logged_in:false
                },
                cat_newentry_link:{
                    link_display_name:'มาใหม่',
                    link_address:WEB_URL_HTTPS + '?action=cat_newentry&article_species=CHAT',
                    link_logged_in:false
                },
                cat_update_link:{
                    link_display_name:'อัปเดต',
                    link_address:WEB_URL_HTTPS + '?action=cat_update&article_species=CHAT',
                    link_logged_in:false
                },
                cat_end_link:{
                    link_display_name:'จบแล้ว',
                    link_address:WEB_URL_HTTPS + '?action=cat_end&article_species=CHAT',
                    link_logged_in:false
                },
                list_category_link:{
                    link_display_name:'หมวดหมู่',
                    link_address:WEB_URL_HTTPS + '?action=list_category&article_species=CHAT',
                    link_logged_in:false
                },
                my_page_link:{
                    link_display_name:'My Reading',
                    link_address:WEB_URL_HTTPS  + '?action=my_page',
                    link_logged_in:true
                },
                list_history_article_link:{
                    link_display_name:'อ่านล่าสุด',
                    link_address:WEB_URL_HTTPS + '?action=list_history_article',
                    link_logged_in:false
                }
            },
            topic_link_obj:{
                topic_index_link:{
                    link_display_name:'หน้าแรกกระทู้',
                    link_address:'/#index_topic',
                    link_logged_in:false
                },
                cat_popular_new_link:{
                    link_display_name:'กระทู้มาแรง',
                    link_address:WEB_URL_HTTPS +'?action=cat_popular_new&article_species=TOPIC',
                    link_logged_in:false
                },
                cat_newentry_link:{
                    link_display_name:'กระทู้มาใหม่',
                    link_address:WEB_URL_HTTPS + '?action=cat_newentry&article_species=TOPIC',
                    link_logged_in:false
                }
            },
            writing_login_link_obj:{
                raw_index_link:{
                    link_display_name:'หน้าแรก',
                    link_address:WEB_URL_HTTPS,
                    link_logged_in:false
                },
                main_manage_article_link:{
                    link_display_name:'My Writing',
                    link_address:WEB_URL_HTTPS + '?action=main_manage_article',
                    link_logged_in:false
                },
                new_article_link:{
                    link_display_name:'เพิ่มงานเขียนใหม่',
                    link_address:WEB_URL_HTTPS + '?action=main_manage_article&create=1',
                    link_logged_in:false
                },
                last_edit_link:{
                    link_display_name:'แก้ไขงานล่าสุด',
                    link_address:'',
                    link_logged_in:false
                }
            },
            writing_nlogin_link_obj:{
                raw_index_link:{
                    link_display_name:'หน้าแรก',
                    link_address:WEB_URL_HTTPS,
                    link_logged_in:false
                },
                register_link:{
                    link_display_name:'สมัครเขียน',
                    link_address:"javascript:Login.showFormLoginAndRegister('register')",
                    link_logged_in:false
                },
                why_readawrite_link:{
                    link_display_name:'ทำไมต้อง readAwrite',
                    link_address:WEB_URL_HTTPS + '?action=why_readawrite',
                    link_logged_in:false
                },
                about_meb_link:{
                    link_display_name:'รู้จัก meb',
                    link_address:WEB_URL_HTTPS + '?action=about_meb',
                    link_logged_in:false
                }
            },
            proof_link_obj:{
                raw_index_link:{
                    link_display_name:'หน้าแรก',
                    link_address:WEB_URL_HTTPS,
                    link_logged_in:false
                },
                my_writing_proof_link:{
                    link_display_name:'ตรวจงานเขียนของฉัน',
                    link_address:WEB_URL_HTTPS + '?action=my_writing_proof',
                    link_logged_in:false
                },
                public_proof_link:{
                    link_display_name:'ก๊อบปี้ วาง แล้วตรวจ',
                    link_address:WEB_URL_HTTPS + '?action=public_proof',
                    link_logged_in:false
                }
            }
        };

        // render submenu function
        function submenuLinkElem(link_id,link_address,link_display_name,active=false){
            return (
                `<li class="sub_header_label cursorPointer ${link_id} ${active?'submenuSelected':''}">
                    <a href="${link_address}" style="padding: 11px 0;text-decoration: none;font-size: 15px;color:#555;">${link_display_name}</a>
                </li>\n`
            )
        }
        function subMenuLinkList(item_list_obj, active_item){
            let ret_html = '<ul class="nav submenu_link" style="display:flex;flex-flow:row wrap;">';
            Object.keys(item_list_obj).forEach(
                function(elem){
                    // generate html function here
                    const link_obj = item_list_obj[elem];
                    if (link_obj.link_logged_in === false){
                        ret_html += submenuLinkElem(elem,link_obj.link_address,link_obj.link_display_name,active_item === elem);
                    }else{
                        if (logged_in){
                            ret_html += submenuLinkElem(elem,link_obj.link_address,link_obj.link_display_name,active_item === elem);
                        }
                    }
                }
            );
            ret_html += '</ul>';
            return ret_html;
        }
        function subMenuPreview(action){
            return(
                `<div class="txtSize22 fontWeight500" style="text-align: center;">
                    <span class="subheaderTitle" style="margin-left: 40px;vertical-align: sub;">
                        ${action === 'view_preorder_detail' ? (
                            'Pre-order'
                        ) : (
                            action === 'create_preorder_payslip' || action === 'complete_create_payslip' ? 'แจ้งโอนเงิน' : ''
                        )}
                    </span>
                </div>`
            );
        }

        let buff_action = action;
        switch (action) {
            case '':
            case 'index_new':
                buff_action = 'raw_index';
                break;
            case 'my_writing_proof':
            case 'my_writing_chapter_proof':
                buff_action = 'my_writing_proof';
                break;
            case 'manage_article':
                buff_action = 'latest_edit_article';
                break;
        }

        let object_keyname = '';
        switch (header_type) {
            case 'reading':
            case 'chat':
            case 'topic':
            case 'proof':
                object_keyname = header_type;
                break;
            case 'writing':
                object_keyname = header_type + '_' + (logged_in ? '' : 'n') + 'login';
                break;
            default :
                object_keyname = 'reading';
                break;
        }

        object_keyname += '_link_obj';
        let submenu_linklist_html = '';
        if (header_type === 'preorder_show_submenu') {
            submenu_linklist_html = subMenuPreview(action);
        }
        else{
            submenu_linklist_html = subMenuLinkList(submenu_items[object_keyname], buff_action + '_link');
        }
        $('.header_no_preview').html(submenu_linklist_html);

    })(CookiesJS.getCookie('user_token'), header_variable.header_type, header_variable.action, header_variable.show_submenu);
</script> <div id="containerOfContentOfAction" style="min-height: 100%; position: relative; background-color: #f4f4f4;"> <div class="container content " style="padding-bottom: 80px;"> <div id="content"> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/comment_helper.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/meb-jslib/client-security.min.js?t_8a0ee"></script> <script>var RAW_GLOBAL_CONFIG = {article_guid: '19ca937b7b849800d51c543928d66bd0'}; </script><script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/reading_history.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/social_plugin.js?t_8a0ee"></script> <script type="text/javascript" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/sanitize-html.min.js?t_8a0ee"></script> <script>
            
    if(jMeb.empty(allow_copy_content))
    {
        allow_copy_content = 0;
    }

    $(document).ready(function ()
    {
                const tokenn = CookiesJS.getCookie('user_token');
        if (article_thumbnail_path.length > 0  && (article_status === '2' || preview === '1' && user_id_publisher === CookiesJS.getCookie('user_id'))) {
            contentH.downloadArticleContent(preview, tokenn, article_guid,
                function (success, ret_data, res_code) {
                    if (success) {
                        const response_data = ret_data.data;
                        const article_content_path = response_data.article_content_path;
                        const disable_word_transform_for_blind = response_data.disable_word_transform_for_blind;
                        contentH.getContent(response_data.opt_key, article_content_path, content_rating, article_guid, null, 'articleContents', 'articleContentScript', disable_word_transform_for_blind, 0, 0, displayArticleContents);
                    } else {
                        console.error(ret_data);
                        const err_s = ret_data.split('_')[2];
                        contentH.showPopupCheckIdCard(err_s);
                    }
                });
        }

        contentBlocker(allow_copy_content);
    });

    function displayArticleContents()
    {
        // var twitter_address = twitter_address;
        // var facebook_address = facebook_address;

        if(!jMeb.empty(twitter_address) || !jMeb.empty(facebook_address))
        {
            $('#socialPlugin').css('position','').css('left','');
            $('#contentArticle').addClass('smMarginTopNone').css('display', '');
        }else if(jMeb.empty(twitter_address) && jMeb.empty(facebook_address)){
            $('#socialPlugin').css('display','none');
        }

        var articleContents = $('#articleContents');
        var p = $('#articleContents').find('p');
        var article_content_length = p.length;

        if (article_content_length == 0 || jMeb.empty(contentH.stripHtml(articleContents.html()).trim()))
        {
            if(articleContents.find('img').length == 0){
                $('.articleContentsDiv').css('display','none');
            }
        }
        else
        {
            $('#fb_hr').css('display', '');
        }

        if(!jMeb.empty(facebook_address))
        {
            setTimeout(function() {
                // window.fbAsyncInit = function() {
                FB.init({
                    appId      : '1390259954548286',//meb : 1390259954548286, one : 1414543498838829 , article : 1794862740759275 // App ID 203902922962100
                    status     : true, // check login status
                    cookie     : true, // enable cookies to allow the server to access the session
                    xfbml      : true  // parse XFBML
                });
                FB.Event.subscribe('xfbml.render', function(response) {
                    //code...
                });
            }, 4000);
            // };
        }

        //-- set reading history --//
        var article_detail = [];
        article_detail['article_guid'] = article_guid;
        article_detail['article_name'] = article_name;
        article_detail['article_species'] = article_species;
        article_detail['user_id_publisher'] = user_id_publisher;
        article_detail['author_name'] = author_name;
        article_detail['author_guid'] = author_guid;
        article_detail['article_thumbnail_path'] = article_thumbnail_path;
        article_detail['thumbnail_edition'] = thumbnail_edition;
        article_detail['unpromoted_cover_image'] = unpromoted_cover_image;

        if (jMeb.empty(CookiesJS.getCookie('user_token')))
        {
            setReadingHistory(article_detail);
        }
        else
        {
            setUserReadingHistory({
                article_guid : article_detail['article_guid'],
                chapter_guid : "-",
                article_species : article_detail['article_species'],
                paragraph_no : 0,
                is_finish_reading : 0
            });
        }
        //-- set reading history --//

        //-- content blocker section --//
        contentBlocker(allow_copy_content);
        //-- content blocker section --//

        /* facebook page plugin */
        var encode_id = btoa(encodeURI(facebook_address));
        getFBPage(encode_id,'show_fb_page','socialPlugin');
    }

    //-- content blocker section --//
    function contentBlocker(allow_copy_content)
    {
        // console.log(typeof(allow_copy_content));

        // console.log(allow_copy_content);

        securityTool.disableRightClick();
        securityTool.disableCtrlS();
        securityTool.disableCtrlP();
        securityTool.disableF12();
        securityTool.disableSelectable('body');

        if(allow_copy_content == 0)
        {
            // securityTool.disableRightClick();
            securityTool.disableElementForPrintThisPage('body');
            securityTool.disablePrintThisPage();
            securityTool.disablePrintScreen();
            // securityTool.disableCtrlS();
            // securityTool.disableCtrlP();
            // securityTool.disableF12();
            // securityTool.disableSelectable('body');
        }
        else {
            // securityTool.enableRightClick();
            securityTool.enableElementForPrintThisPage('body');
            securityTool.enablePrintThisPage();
            securityTool.enablePrintScreen();
            // securityTool.enableCtrlS();
            // securityTool.enableCtrlP();
            // securityTool.enableF12();
            // securityTool.enableSelectable('body');
        }
    }
    //-- content blocker section --//

</script> <style>
    .swiper-scrollbar {
        background-color: var(--secondMainBgColor);
    }
    .swiper-scrollbar-drag {
        background-color: var(--lineColor);
    }
    #box-swiper-tags .swiper-wrapper{
        padding-bottom: 20px;
    }
    #box-swiper-tags .swiper-slide{
        margin-right: 5px !important;
        width: fit-content !important;
        width: -moz-fit-content !important;
    }
    #settingAA{
        position: absolute;
        --remain: calc(100% - 980px);
        right: calc(var(--remain)/2);
        width: 300px;
        border-radius: 0px;
        box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16);
        background-color: #ffffff;
        z-index: 4;
        padding: 25px 15px;
        top: 80px;
    }
    #fixedArticleInfoBar{
        position: fixed;
        top: 0;
        left: 0;
        background-color: #95dbd5;
        width: 100%;
        height: 52px;
        z-index: 10;
    }
    .read-mode-dark #fixedArticleInfoBar {
        background-color: #000;
    }
    #fixedArticleFooterBar{
        display: none;
    }
    #articleNameInFixed{
        font-family: 'NotoSans','Thonburi';
        display: inline-block;
        float: left;
        width: calc(100% - 215px);
        color: var(--textWhiteColorOnFixedTopMainCover);        
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        padding: 10px 20px 10px 0px;
        margin-top: 5px;
    }
    #articleSettingInFixed{
        display: inline-block;
        float: right;
        width: 215px;
        color: var(--textWhiteColorOnFixedTopMainCover);
        margin-top: 10px;
    }
    #articleSettingInFixed img#icnAAFixedBar, #articleSettingInFixed img#icnMenuCovFixedBar {
        filter: invert(var(--invertFixedTopIconMainCover));
    }
    #articleSettingInFixed .txtWhite{
        color: var(--textWhiteColorOnFixedTopMainCover);
    }
    #desktopArticleName{
        line-height: 1.4;
        display: -webkit-box; 
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    .articleSynopsis{
        line-height: 1.5;
        display: -webkit-box; 
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
    #btn_add_shelf_desktop, #btn_cont_read_desktop{
        min-width: 150px;
        margin-left: 15px;
    }
    .lblCategory{
        
    }
    .txtSize36{
        font-size: 36px;
    }
    .txtSize36sm28{
        font-size: 36px;
    }
    .txtSize18sm15{
        font-size: 18px;
    }
    .txtSize16sm12{
        font-size: 16px;
    }
    #containerOfContentOfAction
    {
        background-color: #ffffff !important;
    }

    #main-cover a:hover, #main-cover a:focus
    {
        color: #4fb2a3;
    }

    #main-cover .btn:focus {
        outline: 5px auto #54c0b1;
        outline-offset: -2px;
    }

    .author_publihser a{
        color: #FFF !important;
    }
    .articleName > a{
        font-family: 'NotoSans';
        text-decoration: none !important;
    }
    .divShowTags {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }
    .widthWithSeeMore {
        max-width: calc(100% - 90px) !important;
    }

    #modal_show_tags {
        text-align: center;
    }
    #modal_show_tags:before {
        content: '';
        display: inline-block;
        height: 100%;
        vertical-align: middle;
    }
    #modal_dialog_tags {
        display: inline-block;
        text-align: left;
        vertical-align: middle;
    }

    #divArticleBasicInfo {
        /*height: 260px;*/
        padding-left: 5px;
    }

    .main_cover_background_thumbnail {
        margin-left: -25%;
        margin-top: -10%;
        opacity: 0.4;
        min-height: 480px;
    }

    .add_shelf.btnBorderBlue {
        color: #0001fc !important;
    }

    .smallFitDiv button {
        width: 130px;
    }

    .rating_item_img_cover:hover{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart25@2x.png?t_8a0ee');        
        width: 30px;
        height: 30px;
    }

    .rating_item_img_cover {
        background-size: contain;
        width: 20px;
        height: 18px;
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/heart@2x.png?t_8a0ee');
        margin: 0 auto;
    }

    .animation_img_cover{
        transform: translate(-50%, -60%);
    }

    .btn-continue-chat {
        color: white;
        background-color: #0fc3ae;
        border-radius: 22px;
    }

    #cover_background {
        background-color: black !important;
    }

    .themeReadLabelCover, .themeReadLabelCover > button {
        background-color: transparent !important;
        border-color: #ffffff !important;
    }

    .read-mode-dark .themeReadLabelCover, .themeReadLabelCover > button {
        background-color: transparent !important;
        border-color: gray !important;
    }

    .themeReadLabelCover > button > * {
        background-color: transparent !important;
        filter: brightness(0) invert(1);
        color: #ffffff;
    }

    .read-mode-dark .themeReadLabelCover > button > * {
        background-color: transparent !important;
        filter: brightness(0.7) invert(1);
        color: gray;
    }

    #icnAA{
        width: 33px;
    }

    #icnMenuCov{
        width: 40px;
        height: 40px;
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/hori-setting@2x.png?t_8a0ee');
        background-size: contain;
        background-repeat: no-repeat;
        display:block;
    }
    #icnMenuCov:after{
        display:none;
	    content: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/hori-setting@2x.png?t_8a0ee') url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover@2x.png?t_8a0ee');
    }

    #icnAAFixedBar, #icnMenuCovFixedBar{
        width: 33px;
    }

    #icnReport{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon-report@2x.png?t_8a0ee');
        width: 25px;
        height: 25px;
        background-size: contain;
        display: inline-block;
    }

    #icnShare{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/share@2x.png?t_8a0ee');
        width: 25px;
        height: 25px;
        background-size: contain;
        display: inline-block;
    }

    #icnRe-readall{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon-reset@2x.png?t_8a0ee');
        width: 25px;
        height: 25px;
        background-size: contain;
        display: inline-block;
    }
    .dropdown-menu{
        overflow:hidden;
    }
    .dropdown-menu>li>a:focus, .dropdown-menu>li>a:hover {
        border-radius: 0px;
    }
    .dropdown-menu.borderRound10>li:first-child>a:focus, .dropdown-menu.borderRound10>li:first-child>a:hover {
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
    }
    .dropdown-menu.borderRound10>li:last-child>a:focus, .dropdown-menu.borderRound10>li:last-child>a:hover {
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
    }

    li.reset_article_btn{
        border-bottom: solid 1px #7070701a;
    }

    .icnViewMini{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/topic_view@2x.png?t_8a0ee');
        width: 14px;
        height: 14px;
        background-size: contain;
        display: inline-block;
        margin-right: 5px;
    }

    .icnCommentMini{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/comment@2x.png?t_8a0ee');
        width: 14px;
        height: 14px;
        background-size: contain;
        display: inline-block;
    }

    .icnInShelfMini{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-add@2x.png?t_8a0ee');
        width: 14px;
        height: 14px;
        background-size: contain;
        display: inline-block;
    }

    .icnReadMini{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/Read@2x.png?t_8a0ee');
        width: 14px;
        height: 14px;
        background-size: contain;
        display: inline-block;
    }

    .articleSynopsisBox {
        height: 92px;
        margin-top:9px;
    }
    
    .showFadingRightSide{
        width: 100%;
        height: 100%;
        top: 0;
        right: -2px;
        position: absolute;
        background: linear-gradient(to right, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.43) 79%, #000000) !important;
    }    

    #tool_setting{
        margin-top: 9px;
    }

    #tool_menu{
        margin-top: 9px;
    }

    #blockArticlNameAndSynopsis{
        display:block;
        height: 275px;
    }

    /*#cover_data{
        padding-left: 40px;
        padding-right: 40px;
    }*/

    /*@media screen and (min-width: 768px) and (max-width: 991px) {
        #divThumbnailImage, #divThumbnailImage img{
            width: 270px !important;
            height: 270px !important;
        }
        #divSetHeightArticleName{
            max-height: 90px !important;
        }
        #desktopArticleName{
            font-size: 28px !important;
        }
        .author_publihser a{
            font-size: 16px !important;
        }
        #divArticleBasicInfo {
            padding-left: 25px !important;
            padding-right: 0px !important;
        }
        #divArticleInfo{
            width: calc(100% - 270px) !important;
        }
        #divRatingAllValue{
            width: 270px !important;
        }
        #divBtnAddShelfContinueRead{
            padding-left: 0px !important;
            padding-right: 0px !important;
        }
        #settingAA{
            right: 20px;
        }
        #cover_data{
            padding-left: 0px;
            padding-right: 0px;
        }
        
        #btn_add_shelf_desktop, #btn_cont_read_desktop{
            margin-left: 15px;
        }
    }*/

    @media screen and (max-width: 767px) { 
        #showFadingRightSide{ display: none; }
        #cover_data{
            padding-left: 20px;
            padding-right: 20px;
            background-color: #000 !important;
            border-radius: 0px;
            height: auto !important;
            min-height: auto !important;
            position: unset !important;
        }
        .showFading{
            width: 100% !important;/* calc(100% + 30px) !important;*/
            height: 50px;
            margin-top: -48px;
            position: absolute;
            background: linear-gradient(#0000, #000) !important;
        }
        .toolBoxRight{
            position: absolute;
            top: 0;
            left: -30px;
            width: calc(100% + 30px) !important;
            background: linear-gradient(#000,#0000);
        }
        #divArticleBasicInfo {
            height: unset;
            /*max-height: 220px;*/
        }
        #divSetHeightArticleName{
            max-height: 85px !important;
        }
        .articleSynopsis{
            line-height: 1.2;
            max-height: unset !important; /*4.8em !important;*/
            display: -webkit-box; 
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        #main-cover.content-container{
            max-width: unset !important;
            width: calc(100% + 30px);
            margin-left: -15px;
        }

        #main-cover #cover_background{
            height: auto !important;
            min-height: auto !important;
            width: calc(100% + 30px);
            position: unset !important;
        }

        .main_cover_background_thumbnail {
            width: 100%;
            margin-left: 0;
            margin-top: 0;
            opacity: 1;
            min-height: 100% !important;
            -webkit-filter: grayscale(var(--greyScaleImg));
            filter: grayscale(var(--greyScaleImg));
        }

        #tool_setting{
            margin-top: 5px;
        }
        #tool_menu{
            margin-top: 5px;
        }
        .articleImgThumbnail {
            height: 180px !important;
            width: 180px !important;
            border-radius: 5px !important;
        }

        .smallFitDiv {
            width: 100%;
            max-width: 425px;
        }

        .smallFitDiv button {
            width: 40%;
        }

        .rating_item_list .main_cover > img{
            width: 50px;
        }

        #icnAA{
            width: 33px;
        }
        #icnMenuCov{
            width: 40px;
            height: 40px;
            background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover@2x.png?t_8a0ee');
            background-size: contain;
            background-repeat: no-repeat;
            display:block;
        }

        .rating_item_img_cover {
            background-size: contain;
            width: 27px;
            height: 24px;
            background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/heart@2x.png?t_8a0ee');
            margin: 0 auto;
            background-repeat: no-repeat;
            background-position: center;
        }

        .icnViewMini{
            width: 13px;
            height: 13px;
        }

        .icnCommentMini{
            width: 13px;
            height: 13px;
        }

        .icnInShelfMini{
            width: 13px;
            height: 13px;
        }
        .icnReadMini{
            width: 13px;
            height: 13px;
        }
        .txtSize36sm28{
            font-size: 28px;
        }
        .txtSize18sm15{
            font-size: 15px;
        }
        .articleSynopsisBox {
            max-height: auto !important;/*82px;*/
            height: auto;
            margin-bottom: 10px;
            margin-top:unset;
        }
        .txtSize16sm12{
            font-size: 12px;
        }
        .smPaddingLeftNone{
            padding-left: 0;
        }
        .smPaddingRightNone{
            padding-right: 0;
        }
        #settingAA{
            --remain: calc(100% - 300px);
            right: calc(var(--remain)/2);
            top: 100px;
        }
        #fixedArticleInfoBar{
            height: 50px;
        }
        #fixedArticleFooterBar{
            position: fixed;
            bottom: 0;
            left: 0;
            background-color: #ffffff;
            width: 100%;
            height: 50px;
            z-index: 10;
        }
        #articleNameInFixed{
            width: calc(100% - 70px);
        }
        #articleSettingInFixed{
            width: 70px;
            padding: 6px 0px;
            margin-top: unset;
        }
        #icnAAFixedBar, #icnMenuCovFixedBar{
            width: 33px;
        }
        #blockArticlNameAndSynopsis{
            display:block;
            height: auto;
        }
    }

    @media screen and (min-width: 768px) {
        #divThumbnailImage {
            max-width: 460px;
        }
    }

    @media screen and (min-width:768px) and (max-width:1024px) {         
        .hidden-tablet{
            display: none !important;
        }
        .visible-tablet{
            display: block !important;
        }
        .visible-tablet-inline-block{
            display: inline-block !important;
        }        
        .main_cover_background_thumbnail {
            -webkit-filter: blur(0) grayscale(var(--greyScaleImg)) !important;
            filter: blur(0) grayscale(var(--greyScaleImg)) !important;
            display: block !important;
            height: auto !important;            
            opacity: 1;
        }
        #divArticleInfo {
            display: block;
            width: 100% !important;
            margin-top: 10px;
        }
        #divArticleBasicInfo{
            padding-left: 60px;
            padding-right: 60px;
        }
        #divThumbnailImage {
            display: none !important;
        }
        #zoneButtonMobile{
            padding-bottom: 20px;
        }
        #id_article_thumbnail, .showFadingRightSide{ display: none !important; }
        #cover_data {
            padding-left: 20px;
            padding-right: 20px;
            background-color: #000 !important;
            border-radius: 0px;
            height: auto !important;
            min-height: auto !important;
            position: unset !important;
        }
        #main-cover #cover_background {
            height: auto !important;
            min-height: auto !important;
            width: calc(100% + 30px);
            position: unset !important;
        }
        #main-cover.content-container {
            max-width: unset !important;
            width: calc(100% + 30px);
            margin-left: -15px;
        }
        .toolBoxRight {
            position: absolute;
            top: 0;
            left: -30px;
            width: calc(100% + 30px) !important;
            background: linear-gradient(#000,#0000);
        }        
        .showFading{
            width: 100% !important;/* calc(100% + 30px) !important;*/
            height: 50px;
            margin-top: -48px;
            position: absolute;
            background: linear-gradient(#0000, #000) !important;
        }
        .rating_btn_parent .btn_chapter{
            width: 55px !important;
            height: 55px !important;
        }
        .myshelf_btn, .btn-continue-chat{
            padding: 16px !important;
        }
        .mobile_rating_btn_parent{
            width: 60px !important;
        }
        .mobile_button_parent{
            width: calc(100% - 60px) !important;
        }        
        #icnMenuCov{
            width: 40px;
            height: 40px;
            background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover@2x.png?t_8a0ee');
            background-size: contain;
            background-repeat: no-repeat;
            display:block;
        }
        #settingAA{
            right: 50px;
        }
    }

    @media screen and (orientation:landscape) and (min-width:768px) and (max-width:1024px) {        
        #divArticleBasicInfo{
            padding-right: 40px;
        }
        #zoneButtonMobile{
            width: 60% !important;
        }        
        #icnMenuCov{
            width: 33px;
            height: 33px;
            background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover@2x.png?t_8a0ee');
            background-size: contain;
            background-repeat: no-repeat;
            display:block;
        }
    }

    @media screen and (orientation:landscape) and (max-width:1024px) {
        #main-cover #cover_background{
            height: 60vh !important;
        }
        .main_cover_background_thumbnail {
            margin-top: -50% !important;
        }
        #divArticleBasicInfo{
            margin-top: -15%;
            position: relative !important;
            /*background: linear-gradient(#0000 2%,#000 25%);*/
            left:0;
            padding-left: 60px;
            padding-right: 60px;
            width:100% !important;
        }
        .articleSynopsis{
            -webkit-line-clamp: 2;
        }
    }

</style> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/user_data.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/my_purchase_chapter.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/main_cover.js?t_8a0ee"></script> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/swiper-4.4.6.min.css?t_8a0ee"> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/swiper-4.4.6.min.js?t_8a0ee"></script> <style type="text/css">
    .form-control {
        border-radius: 0;
    }
    .restrict_chap_list{
        margin-bottom: 10px;
        max-width: 500px;
        margin-right: auto;
        margin-left: auto;
        color: #E01D1D;
        border: 1px solid #E01D1D;
        border-radius: 7px;
        overflow: hidden;
    }
    .toggle_restr_btn{
        text-align: right;
        text-decoration: underline;
        cursor: pointer;
    }
    #restr_chapter_table{
        width: 100%;
        text-align: left;
        font-size: 14px;
    }
    #restr_chapter_table>thead{
        background: rgb(224, 29, 29, 0.1);
    }
    #restr_chapter_table>tbody{
        border-top: 1px solid #E01D1D;
        background: white;
    }
    #restr_chapter_table>tbody>tr>td, #restr_chapter_table>tbody>tr>th, #restr_chapter_table>tfoot>tr>td, #restr_chapter_table>tfoot>tr>th, #restr_chapter_table>thead>tr>td, #restr_chapter_table>thead>tr>th{
        padding: 8px;
        line-height: 1;
        vertical-align: top;
    }

    #buy-list th:first-child{
        border-radius:7px 0 0 7px;
    }
    #buy-list th:last-child{
        border-radius:0 7px 7px 0;
    }
    #buy-list tbody>tr:first-child>td{
        border-top: 0px;
    }
    #buy-list thead>tr:last-child>th{
        border-bottom: 0px;
    }
</style> <div class="modal fade" id="popup_pay_via_mebcoin" style="width: 100%"> <div class="modal-dialog" style="max-width: 800px;" role="document"> <div class="modal-content" style="border-radius: 0; "> <div class="modal-header" style="border: none;padding-bottom: 5px;padding-top: 5px;"> <button type="button" id="close-btn" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">✖</span> </button> <h4 class="modal-title" id="modal_title_pay_via_mebcoin"> </h4> </div> <div id="modal-restrict-chapter" class="restrict_chap_list" style="display:none;"> </div> <div class="modal-body paddingAll20" id="modal_body_pay_via_mebcoin" style="border-radius: 3px;padding-top: 0;padding-bottom: 0;"> </div> <div class="modal-footer" style="border: none;" id="restrict_chapter_list"> </div> </div> </div> </div> <div id="modal-buy-all" class="modal fade" role="dialog"> <div class="modal-dialog" style="max-width: 800px;"> <div class="modal-content"> <div class="modal-header" id="modal-header-buy-all"> </div> <div class="modal-body" style="max-height: 70vh;overflow-y: auto;"> <div id="modal-restrict-chapter-all" class="restrict_chap_list" style="display:none;">> </div> <div id="modal-body-buy-all"> </div> </div> <div class="modal-footer" style="text-align: center;"> <div id="restrict_chapter_list2"> </div> </div> </div> </div> </div> <script type="text/javascript">

    var check_loaded_modal = false;
    var action = typeof action === 'undefined'? jMeb.gup('action'):action;
    var url = window.location.href;
    var url_arr = url.split('/');
    var chapter_list = '';
    const chapter_pay_arr = {};
    var chapter_list_conf = 'Array';

    if(chapter_list != '')
    {
        chapter_list = 'null';
    }

    if(chapter_list_conf != '')
    {
        chapter_list_conf = '[]';
    }

    $(document).ready(function ()
    {
        if(!jMeb.empty(chapter_list))
        {
            const chapter_ar_temp = JSON.parse(chapter_list)
            for(let __i = 0 ; __i < chapter_ar_temp.length ; __i++) {
                const __item = {
                    chapter_guid: chapter_ar_temp[__i].chapter_guid,
                    chapter_title: chapter_ar_temp[__i].chapter_title,
                    chapter_subtitle: chapter_ar_temp[__i].chapter_subtitle,
                    chapter_order: chapter_ar_temp[__i].chapter_order,
                    baht_price: chapter_ar_temp[__i].baht_price,
                }
                chapter_pay_arr[chapter_ar_temp[__i].chapter_guid] = __item;
            }
            delete chapter_ar_temp;
        }

    });

    function updateChapterArr(chap_lst){
        for(let __i = 0 ; __i < chap_lst.length ; __i++) {
            const __item = {
                chapter_guid: chap_lst[__i].chapter_guid,
                chapter_title: chap_lst[__i].chapter_title,
                chapter_subtitle: chap_lst[__i].chapter_subtitle,
                chapter_order: chap_lst[__i].chapter_order,
                baht_price: chap_lst[__i].baht_price,
            }
            chapter_pay_arr[chap_lst[__i].chapter_guid] = __item;
        }
    }

    function setCloseModalPayViaMebcoin()
    {

        $('#popup_pay_via_mebcoin').on('hidden.bs.modal', function (e) {

            var action = typeof action === 'undefined'? jMeb.gup('action'):action;
            var url = window.location.href;
            var url_arr = url.split('/');

            Header.getMebcoinBalance();
            MyPurchaseChapterObj.config({article_guid: '', article_species: '', action: 'view_chapter', chapter_guid: '', article_name : '《蝙蝠俠》-高清电影((2022]]~完整版在线观看'});
            //MyPurchaseChapterObj.ready();
            MyPurchaseChapterObj.processMyPurchaseChapter();
                                                                        var url_modal = $('#popup_pay_via_mebcoin').find('iframe').attr('src');
            if(!url_modal.match(/product_type=DONATE/))
            {
                // old url
                var chapter_guid = jMeb.gup('chapter_id');
                if(action == 'view_chapter'){
                    paid_chapter = MyPurchaseChapterObj.checkPurchasedChapter('', chapter_guid);
                    //             console.log(paid_chapter);

                    if (paid_chapter)
                    {
                        $('.button_purchase_chapter').css('display', 'none');

                    }

                    contentH.reGetChapter('', chapter_guid, 'chapterContents');
                }
                else{
                    // new url
                    var url_param_arr = url_arr[4].split('&');
                    var url_param_arr = url_param_arr[0].split('?');
                    var chapter_guid = url_param_arr[0];

                    if(url_arr[3] == 'c'){
                        paid_chapter = MyPurchaseChapterObj.checkPurchasedChapter('', chapter_guid);
                        //             console.log(paid_chapter);

                        if (paid_chapter)
                        {
                            $('.button_purchase_chapter').css('display', 'none');
                        }

                                                contentH.reGetChapter('', chapter_guid, 'chapterContents');
                                            }
                }
            }
        });
    }

    function popupFlexiblePricing(product_guid, product_type)
    {
        var description = 'คุณสามารถให้กำลังใจนักเขียนได้เป็นกรณีพิเศษ โดยให้ Tip เพิ่มจากราคาปกติ';
        var html = '';

        $.ajax({
            method: 'POST',
            url: "?action=ajax&ajax=1&ajax_case=CallWrapper",
            data: {
                api_call: 'Article',
                method_call: 'userGetChapterInfo',
                chapter_guid: product_guid
            },
            dataType: "json",
            beforeSend: function () {

            }
        }).done(function (data) {
            // flexible price
            if (data.status.success && data.data.flexible_pricing_enable == 1)
            {
                var order_price = data.data.baht_price;
                if(data.data.flexible_pricing_description != '' && data.data.flexible_pricing_description != null)
                {
                    description = data.data.flexible_pricing_description;
                }
                html = `<div id="divDescription" style="margin-top:20px;margin-bottom:10px;text-align: left;">${description}</div>
                        <div style="text-align: left;">ผลงานตอนนี้มีราคาเริ่มต้นที่ <strong>${parseInt(order_price)} คอยน์ </strong></div>
                        <div id="restr-flexible" class="restrict_chap_list" style="display:none; margin-top: 10px;"></div>
                        <div style="margin-top:10px;margin-bottom:30px;width:100%;" class="form_flexible_price">
                            <section>
                                <div class="div_flexible_price">
                                    <input type="radio" id="control_01" name="flexible_price" value="${parseInt(order_price)}" checked="">
                                    <label for="control_01" style="height: unset;margin: 0;"><p style="margin: 0;">${parseInt(order_price)} คอยน์</p></label>
                                </div>
                                <div class="div_flexible_price">
                                    <input type="radio" id="control_02" name="flexible_price" value="${parseInt(order_price)*3}">
                                    <label for="control_02" style="height: unset;margin: 0;"><p style="margin: 0;">${parseInt(order_price)*3} คอยน์</p></label>
                                </div>
                                <div class="div_flexible_price">
                                    <input type="radio" id="control_03" name="flexible_price" value="${parseInt(order_price)*5}">
                                    <label for="control_03" style="height: unset;margin: 0;"><p style="margin: 0;">${parseInt(order_price)*5} คอยน์</p></label>
                                </div>
                                <div class="div_flexible_price">
                                    <input type="radio" id="control_04" name="flexible_price" value="custom">
                                    <label for="control_04" style="height: unset;margin: 0;"><p style="margin: 0;">กำหนดเอง</p></label>
                                </div>
                            </section>
                            <div class="input_flexible_price" style="display:none;">
                                <input type="text" id="flexible_price" value="${parseInt(order_price)}" onkeypress="return isNumberKey(this);" style="border: 2px solid #f1b040;width: calc(100% - 53px);margin-top: 10px;border-radius: 5px;padding-left: 5px;"> คอยน์
                            </div>
                        </div>
                        <div style="margin-top:10px;margin-bottom:10px;">
                            <input type="button" id="btn_flexible_price" class="btn flexible_price_btn" value="ยืนยันการซื้อ" style="font-size: 20px;">
                        </div>`;

                articleH.jPopup('', html);
                listRestrictChapter($('#restr-flexible'))

                $('input[name=flexible_price]').change(function(){
                    var select_price = $('input[name=flexible_price]:checked').val();
                    var flexible_price = $('#flexible_price').val();

                    if(select_price == 'custom')
                    {
                        $('.input_flexible_price').show();
                    }
                    else
                    {
                        $('.input_flexible_price').hide();
                    }
                });

                $('#btn_flexible_price').click(function(){
                    var select_price = $('input[name=flexible_price]:checked').val();
                    var flexible_price = $('#flexible_price').val();

                    swal.close();
                    if(select_price == 'custom')
                    {
                        if(parseFloat(flexible_price) < order_price || parseFloat(flexible_price) <= 0)
                        {
                            articleH.jAlert('', 'ไม่สามารถกรอกจำนวนเงินน้อยกว่าราคา '+parseInt(order_price)+' คอยน์<br>กรุณาเปลี่ยนราคา', function(){
                                popupFlexiblePricing(product_guid, product_type);
                            }, 'warning');
                            return false;
                        }

                        setParamModal(product_guid, product_type, parseFloat(flexible_price));
                    }
                    else
                    {
                        setParamModal(product_guid, product_type, parseFloat(select_price));
                    }
                    displayModalPayViaMebcoin();
                });

            }
            else
            {
                setParamModal(product_guid, product_type);
                displayModalPayViaMebcoin();
            }
        }).fail(function (xhr, textStatus, errorThrown) {
            console.error(xhr.responseText, textStatus, errorThrown);
            articleH.jAlert('', 'ขออภัยจ้า เกิดข้อผิดพลาดไม่สามารถซื้อตอนได้', '', 'error');
            return false;
        });

    }

    function isNumberKey(field){

        var charCode = event.keyCode
        if((charCode > 31 && (charCode != 46 &&(charCode < 48 || charCode > 57))) || ((field.value).match(/\./) && charCode == 46))
        {
            return false;
        }
        else
        {
            // isNumberInput(field);
            if((field.value).match(/\.[0-9]{2}/))
            {
                return false;
            }
            else if((field.value).match(/[0-9]{4}/))
            {
                if((field.value).match(/[0-9]{4}\.[0-9]{0,1}/))
                {
                    return true;
                }
                else if(charCode >= 48 && charCode <= 57)
                {
                    return false;
                }
            }
            else
            {
                return true;
            }

        }
    }

    function startPayViaMebcoin(product_guid, product_type, flexible_pricing_enable)
    {
        var user_token = CookiesJS.getCookie('user_token');

        if (user_token) {
            var is_activate_coin_user = CookiesJS.getCookie('is_activate_coin_user');
            // if(is_activate_coin_user != 1)
            // {
            //     var html = '';
            //     html += '<div class="marginTop20">ยังไม่ได้ลงทะเบียนเมพคอยน์เลย ไปลงทะเบียนก่อนนะจ๊ะ</div>';
            //
            //     html += '<div class="marginTop20">';
            //         html += '<button id="regis_mebcoin" class="btn btn-lg btn-warning ">';
            //             html += 'ดำเนินการต่อ'
            //         html += '</button>';
            //         html += '<a href="' + WEB_URL_HTTPS + '?action=how_to_buy" target="_blank">'
            //             html += '<button class="btn btn-lg btn-info marginLeft10">';
            //                 html += 'วิธีการใช้เหรียญ'
            //             html += '</button>';
            //         html += '</a>'
            //     html += '</div>';
            //
            //     articleH.jPopupWidth('', html);
            //
            //     $('#regis_mebcoin').click(function(){
            //         Header.submitFormByElementId('form-submit-to-coin');
            //         articleH.jUnblockUI();
            //     });
            //
            //     return false;
            // }
            // flexible price
            if(flexible_pricing_enable == 1)
            {
                popupFlexiblePricing(product_guid, product_type);
            }
            // normal price
            else
            {
                // buy chapter
                getRestrictChapter(function(data){
                    if(!data.status.success)
                    {
                        setParamModal(product_guid, product_type);
                        displayModalPayViaMebcoin();
                    }
                    else
                    {
                        buyAllChapter(article_name, [chapter_pay_arr[product_guid]], product_type)
                        /*
                        const html = `
                            <div id="restr-static" class="restrict_chap_list" style="display:none; margin-top: 10px;"></div>
                            <div style="margin-top:10px;margin-bottom:10px;">
                                <input type="button" class="btn flexible_price_btn" value="ยืนยันการซื้อ" style="font-size: 20px;" onclick="buyIgnoreResctrictChapter('`+product_guid+`','`+product_type+`');">
                            </div>`;
                        articleH.jPopup('', html);
                        const container_element = $('#restr-static')
                        renderRestrictChapter(data.data.restrict_chapter_list, container_element, function(){
                            container_element.show();
                        })
                        //*/
                    }
                })
            }
        }
        else {
            //Login.ShowLogin();
            Login.showFormLoginAndRegister('login');
        }
    }
    function buyIgnoreResctrictChapter(product_guid, product_type){
        swal.close();
        setParamModal(product_guid, product_type);
        displayModalPayViaMebcoin();
    }
    function startDonateViaMebcoin(user_id_publisher, article_guid, chapter_guid, product_type, order_amount, is_show_donator, donate_item_id, donor_message)
    {
        var user_token = CookiesJS.getCookie('user_token');

        if (user_token) {
            var is_activate_coin_user = CookiesJS.getCookie('is_activate_coin_user');
            // if(is_activate_coin_user != 1)
            // {
            //     Header.submitFormByElementId('form-submit-to-coin');
            //     return false;
            // }
            if(user_id_publisher == '' && article_guid == '' && chapter_guid == '')
            {
                articleH.jAlert('', 'ขออภัยจ้า ไม่พบรายการผู้รับ Donate ที่ท่านต้องการ Donate ในระบบ', '', 'error');
                return false;
            }
            setParamDonateModal(user_id_publisher, article_guid, chapter_guid, product_type, order_amount, is_show_donator, donate_item_id, donor_message);
            displayModalPayViaMebcoin();
        }
        else {
            //Login.ShowLogin();
            Login.showFormLoginAndRegister('login');
        }
    }

    // function submitFormByElementId(element_id)
    // {
    //     console.log('submit')
    //      $('#' + element_id).submit();
    // }

    function setParamModal(product_guid, product_type, flexible_baht_price)
    {
        product_guid = (Array.isArray(product_guid) && product_guid.length === 1) ? product_guid[0]['chapter_guid'] : product_guid;
        //console.log(product_guid, product_type, flexible_baht_price);
        var html = '';
        html += '<iframe name="iframe_sell" style="width: 100%;height: 71vh;border: none;"';

        if(!Array.isArray(product_guid))
        {
            html += ' src="https://www.readawrite.com/?action=fast_pay_via_mebcoin&product_type=' + product_type;
            html += '&product_guid=' + product_guid + '&token=' + CookiesJS.getCookie('user_token');
        }

        if(typeof(flexible_baht_price) != "undefined" && flexible_baht_price !== null)
        {
            html += '&flexible_baht_price=' + flexible_baht_price;
        }

        html += '&outdex=1">';
        html += '</iframe>';

        html += '<div class="width100Percent" style="text-align: right;"><i class="fa fa-question-circle" aria-hidden="true"></i> <a href="https://www.readawrite.com/?action=how_to_buy" target="_blank">ดูวิธีซื้อตอนที่ติดเหรียญที่นี่เลยจ้า</a></div>';
        $('#modal_body_pay_via_mebcoin').html('<div id="loading_paycoin" style="background-color: transparent !important;"><img src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/bus_loading.gif?t_8a0ee" style="display: block;margin: 0 auto;background-color: transparent !important;"/></div>');
        $('#modal_body_pay_via_mebcoin').append(html);

        if(Array.isArray(product_guid))
        {
            $('#form_buy_all').submit();
        }
    }

    function setParamDonateModal(user_id_publisher, article_guid, chapter_guid, product_type, order_amount, is_show_donator, donate_item_id, donor_message)
    {
        var html = '';
        html += '<iframe style="width: 100%;height: 71vh;border: none;" src="https://www.readawrite.com/?action=fast_pay_via_mebcoin&product_type=' + product_type + '&token=' + CookiesJS.getCookie('user_token');

        if(user_id_publisher != '')
        {
            html += '&user_id_publisher=' + user_id_publisher;
        }
        if(article_guid != '')
        {
            html += '&article_guid=' + article_guid;
        }
        if(chapter_guid != '')
        {
            html += '&chapter_guid=' + chapter_guid;
        }
        if(donor_message != '')
        {
            html += '&donor_message=' + donor_message;
        }

        html += '&is_show_donator=' + is_show_donator;
        html += '&donate_item_id=' + donate_item_id;
        html += '&order_amount=' + order_amount + '&outdex=1">';
        html += '</iframe>';
        html += '<div class="width100Percent" style="text-align: right;"><i class="fa fa-question-circle" aria-hidden="true"></i> <a href="https://www.readawrite.com/?action=how_to_buy" target="_blank">ดูวิธีซื้อตอนที่ติดเหรียญที่นี่เลยจ้า</a></div>';
        $('#modal_body_pay_via_mebcoin').html('<div id="loading_paycoin" style="background-color: transparent !important;"><img src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/bus_loading.gif?t_8a0ee" style="display: block;margin: 0 auto;background-color: transparent !important;"/></div>');
        $('#modal_body_pay_via_mebcoin').append(html);
    }

    function displayModalPayViaMebcoin()
    {
        if(!check_loaded_modal)
        {
            setCloseModalPayViaMebcoin();
            check_loaded_modal = true;
        }

        if(navigator.userAgent.match(/iPhone|iPad|iPod/i) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1))
        {
            $('#popup_pay_via_mebcoin').on('show.bs.modal', function() {
                $(this)
                    .css({
                        position: 'absolute',
                        marginTop: ($(window).scrollTop()-$('#headerMenuMobile').height()) + 'px',
                        bottom: 'auto'
                    });
                setTimeout( function() {
                    $('.modal-backdrop').css({
                        position: 'absolute',
                        top: 0,
                        left: 0,
                        width: '100%',
                        height: Math.max(
                            document.body.scrollHeight, document.documentElement.scrollHeight,
                            document.body.offsetHeight, document.documentElement.offsetHeight,
                            document.body.clientHeight, document.documentElement.clientHeight
                        ) + 'px'
                    });
                }, 0);
            }).modal('show');
        }
        else
        {
            $('#popup_pay_via_mebcoin').modal({backdrop: "static",show: true});
        }
    }
    function clickChapterTr(guid){
        const is_check = $('#check_chapter_' + guid ).is(':checked');
        $('#check_chapter_' + guid ).prop('checked', !is_check)
        toggleSelectChapter(guid)
    }
    let select_chapter = {}
    function toggleSelectChapter(chap_guid){
        //console.log('toggleSelectChapter ' + chap_guid)
        //console.log(select_chapter)
        if(chap_guid){
            if($('#check_chapter_' + chap_guid ).is(':checked')) {
                select_chapter[chap_guid].selected = true;
            }
            else {
                select_chapter[chap_guid].selected = false;
            }
        }
        else{
            $('.check_chapter').each(function(){
                const __guid = $(this).attr('id').replace('check_chapter_', '')
                if(select_chapter[__guid] != undefined){
                    if($(this).is(':checked')) {
                        select_chapter[__guid].selected = true;
                    }
                    else {
                        select_chapter[__guid].selected = false;
                    }
                }
                
            })
        }


        let selected_all = true;
        let ttl_chap = 0;
        let sum = 0;
        let prod_guid_val = '';
        for(var guid in select_chapter) {
            ttl_chap += select_chapter[guid].selected? 1 : 0;
            sum += select_chapter[guid].selected? parseFloat(select_chapter[guid].price) : 0;
            prod_guid_val += prod_guid_val&&select_chapter[guid].selected? ',' : '';
            prod_guid_val += select_chapter[guid].selected? guid : '';

            selected_all = select_chapter[guid].selected && selected_all
        }
        $('#product_guid').val(prod_guid_val);
        $('#total_price').html(sum);
        $('#ttl_chap').html(ttl_chap);

        if(sum <= 0)
        {
            $('#btnComfirmBuyAll').attr('disabled', true)
        }
        else{
            $('#btnComfirmBuyAll').attr('disabled', false)
        }

        if(selected_all){
            $('#check_all').prop('checked', true)
        }
        else{
            $('#check_all').prop('checked', false)
        }
    }
    function toggleSelectAllChapter(){
        if($('#check_all').is(':checked')){
            $('.check_chapter').prop('checked', true)
        }
        else{
            $('.check_chapter').prop('checked', false)
        }
        toggleSelectChapter('')
    }
    function buyAllChapter(article_name, product_guid_list, product_type)
    {
        var user_token = CookiesJS.getCookie('user_token');
        let more_than_1_chap = 0;
        for(var i in product_guid_list)
        {
            more_than_1_chap++;
            if(more_than_1_chap > 1) break;
        }
        if (user_token) {
            var is_activate_coin_user = CookiesJS.getCookie('is_activate_coin_user');
            // if(is_activate_coin_user != 1)
            // {
            //     var html = '';
            //     html += '<div class="marginTop20">ยังไม่ได้ลงทะเบียนเมพคอยน์เลย ไปลงทะเบียนก่อนนะจ๊ะ</div>';
            //
            //     html += '<div class="marginTop20">';
            //         html += '<button id="regis_mebcoin" class="btn btn-lg btn-warning ">';
            //             html += 'ดำเนินการต่อ'
            //         html += '</button>';
            //         html += '<a href="' + WEB_URL_HTTPS + '?action=how_to_buy" target="_blank">'
            //             html += '<button class="btn btn-lg btn-info marginLeft10">';
            //                 html += 'วิธีการใช้เหรียญ'
            //             html += '</button>';
            //         html += '</a>'
            //     html += '</div>';
            //
            //     articleH.jPopupWidth('', html);
            //
            //     $('#regis_mebcoin').click(function(){
            //         Header.submitFormByElementId('form-submit-to-coin');
            //         articleH.jUnblockUI();
            //     });
            //
            //     return false;
            // }

            var header = '';
            var item_buy = '';
            var button_buy = '';
            var total_baht_price = 0;
            const h_text = more_than_1_chap > 1? 'คุณต้องการซื้อทุกตอนของเรื่อง '+article_name+' โดยจะได้รับตอนต่อไปนี้': 'คุณต้องการซื้อตอนของเรื่อง '+article_name+' โดยจะได้รับตอนต่อไปนี้';
            //console.log(more_than_1_chap)

            header += '<button type="button" class="close" data-dismiss="modal">✖</button>';
            header += '<h4 class="add-modal-title" id="modal-title-buy-all" style="text-align: center;">';
            header += '<strong>'+h_text+'</strong>';
            header += '</h4>';
            header += '<div style="font-size:14px;text-align: center;" class="center-block">(รายการเหล่านี้ไม่รวมถึงตอนที่คุณเคยซื้อไปแล้ว)</div>';


            item_buy += '<table class="table table-hover" id="buy-list" style="margin-bottom: 0;max-width: 500px;margin-right: auto;margin-left: auto;">';
            item_buy += '<thead style="background: #eaeaea;">';
            item_buy += '<tr>';
            item_buy += '<th style="width: 40px; text-align:center;"> </th>';
            item_buy += '<th style="width: 25px;">ลำดับ</th>';
            item_buy += '<th>ชื่อตอน</th>';
            item_buy += '<th style="width: 80px;text-align: center;">ราคา</th>';
            item_buy += '</tr>';

            item_buy += '</thead>';
            item_buy += '<tbody id="item-buy-all" style="cursor: default">';

            let total_chap = 0;
            select_chapter = {}
            for(var i in product_guid_list)
            {
                var chapter_title_name = product_guid_list[i]['chapter_title'] + ' ' + product_guid_list[i]['chapter_subtitle'];
                var baht_price = parseFloat(product_guid_list[i]['baht_price']);
                var chapter_order = product_guid_list[i]['chapter_order'];
                var chapter_guid = product_guid_list[i]['chapter_guid'];

                select_chapter[chapter_guid] = {price:baht_price, selected: true};

                item_buy += '<tr onclick="clickChapterTr(\''+chapter_guid+'\')">';
                item_buy += '<td style="text-align:center;"><input type="checkbox" name="check_chapter" class="check_chapter" id="check_chapter_'+chapter_guid+'" onclick="clickChapterTr(\''+chapter_guid+'\')" checked></td>';
                item_buy += '<td style="text-align: center; color: #3ee0c2;">'+chapter_order+'</td>';
                item_buy += '<td>'+chapter_title_name+'</td>';
                item_buy += '<td style="color: #f1b040;"><div style="margin-left: 5px; width: 60px;"><img class="imgCoin" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/littlecoin.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/littlecoin.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/littlecoin@2x.png?t_8a0ee 2x" style="margin-right:5px;"/> '+baht_price+ ' </td>';
                item_buy += '</tr>';
                total_baht_price += baht_price;
                total_chap++;
            }
            item_buy += '</tbody>';
            item_buy += '</table>';

            button_buy += '<div style="width: 100%; text-align: center; padding-bottom: 15px;">';
                button_buy += '<input type="checkbox" id="check_all" onclick="toggleSelectAllChapter()" checked>';
                button_buy += ' ซื้อทุกตอน';
            button_buy += '</div>';

            button_buy += '<button id="btnComfirmBuyAll" type="button" class="btn btn-warning" style="padding: 7px 50px;font-size: 15px; border-radius: 25px; min-width: 300px;">';
            button_buy += 'ซื้อ <span id="ttl_chap">' + total_chap + '</span> ตอน ( ';
            button_buy += '<img class="imgCoin" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/littlecoin.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/littlecoin.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/littlecoin@2x.png?t_8a0ee 2x" style="margin-right:5px;"/>';
            button_buy += '<span id="total_price">' + total_baht_price + '</span> คอยน์ )';
            button_buy += '</button>';

            listRestrictChapter($('#modal-restrict-chapter-all'));
            // buy all
            if(Array.isArray(product_guid_list))
            {
                toggleSelectChapter();
                $('#modal-header-buy-all').html(header);
                $('#modal-body-buy-all').html(item_buy);
                $('#modal-buy-all').find('.modal-footer').html(button_buy);
                $('#btnComfirmBuyAll').click(function(){
                    $('#modal-buy-all').modal('hide');
                    setParamModal(product_guid_list, product_type);
                    displayModalPayViaMebcoin();
                });

                if(navigator.userAgent.match(/iPhone|iPad|iPod/i) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1))
                {
                    $('#modal-buy-all').on('show.bs.modal', function() {
                        $(this)
                            .css({
                                position: 'absolute',
                                marginTop: ($(window).scrollTop()-$('#headerMenuMobile').height()) + 'px',
                                bottom: 'auto'
                            });
                        setTimeout( function() {
                            $('.modal-backdrop').css({
                                position: 'absolute',
                                top: 0,
                                left: 0,
                                width: '100%',
                                height: Math.max(
                                    document.body.scrollHeight, document.documentElement.scrollHeight,
                                    document.body.offsetHeight, document.documentElement.offsetHeight,
                                    document.body.clientHeight, document.documentElement.clientHeight
                                ) + 'px'
                            });
                        }, 0);
                    }).modal('show');
                }
                else
                {
                    $('#modal-buy-all').modal({backdrop: "static",show: true});
                }

                if((navigator.userAgent.match(/iPhone|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini/i) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) && $(window).height() < 768)
                {
                    $('#modal-buy-all').find('.modal-body').css({
                        maxHeight: '50vh'
                    });
                }


            }
            // buy chapter
            else
            {
                setParamModal(product_guid_list, product_type);
                displayModalPayViaMebcoin();
            }


        }
        else {
            //Login.ShowLogin();
            Login.showFormLoginAndRegister('login');
        }
    }


    function listRestrictChapter(container_element){

        getRestrictChapter(function(data){
            if (!data.status.success)
            {
                console.error(data.status)
                container_element.hide();
            }
            else{
                if(data.data.restrict_chapter_list.length > 0){
                    renderRestrictChapter(data.data.restrict_chapter_list, container_element, function(){
                        container_element.show();
                    })
                }
                
            }
        })
    }
    function renderRestrictChapter(restrict_chapter_arr, container_element, cb){
        cb = cb || function(){}
        var chap_html = '';

        chap_html += '<table id="restr_chapter_table">';
        chap_html += '<thead>';
        chap_html += '<tr>';
        chap_html += '<th>เรื่องนี้มีบางตอนที่ปิดเนื้อหาและเข้าอ่านไม่ได้จ้า</th>';
        chap_html += `<th show="0" class="toggle_restr_btn" onclick="toggleRestrictChapterList(this)">ดูตอนที่ปิด<span class="fa fa-angle-down" style="padding-left: 5px;"></span></th>`;
        chap_html += '</tr>';
        chap_html += '</thead>';
        chap_html += '<tbody class="item-restr" style="cursor: default; display: none;">';
        for(var i in restrict_chapter_arr)
        {
            const __chap = restrict_chapter_arr[i];
            var status = __chap['chapter_status'];
            var chapter_title_name = __chap['chapter_title'] + ' ' + __chap['chapter_subtitle'];

            chap_html += '<tr>';
            chap_html += '<td colspan="2"><div style="text-overflow: ellipsis; white-space: nowrap; width: 400px; overflow: hidden;">'+chapter_title_name+'</div></td>';
            chap_html += '</tr>';
        }
        chap_html += '</tbody>';
        chap_html += '</table>';
        container_element.html(chap_html)
        cb();
    }
    let global_restrict_chapter_list = {};
    function getRestrictChapter(cb){
        if(global_restrict_chapter_list[article_guid])
        {
            cb(global_restrict_chapter_list[article_guid])
            return;
        }

        $.ajax({
            method: 'POST',
            url: "?action=ajax&ajax=1&ajax_case=CallWrapper",
            data: {
                api_call: 'Article',
                method_call : 'userGetRestrictChapter',
                token: CookiesJS.getCookie('user_token'),
                article_guid: article_guid,
                app_id: DEFAULT_APP_ID,
                app_platform: APP_PLATFORM,
                device_id: CookiesJS.getCookie('device_id')
            },
            dataType: "json"
        }).done(function(data){
            global_restrict_chapter_list[article_guid] = data
            if(data.status.code === 3 && data.status.message === "Article_userGetRestrictChapter_NotFoundRestrictChapter"){
                global_restrict_chapter_list[article_guid].data = {restrict_chapter_list:[]}
                data.status.success = true;
            }
            cb(data);
        }).fail(function(){
            cb({
                status: {
                    success: false,
                    message: 'Unable to connect to server!'
                }
            });
        });
    }
    function toggleRestrictChapterList(element)
    {
        if($(element).attr('show') == 1)
        {
            $('.item-restr').hide();
            $('.toggle_restr_btn').html('ดูตอนที่ปิด<span class="fa fa-angle-down" style="padding-left: 5px;"></span>')
            $(element).attr('show', '0')
        }
        else{
            $('.item-restr').show();
            $('.toggle_restr_btn').html('ปิด<span class="fa fa-angle-up" style="padding-left: 5px;"></span>')
            $(element).attr('show', '1')
        }
    }
</script> <div id="fixedArticleInfoBar" class="" style="display:none;"> <div class="container"> <div id="articleNameInFixed" class="txtSize18sm14"></div> <div id="articleSettingInFixed" class=""> <div id="" class="showInlineBlock pull-left"> <div onclick="$('#settingAAModal').modal();" class="showInlineBlock cursorPointer text-center" style=""> <img id="icnAAFixedBar" class="showInlineBlock pull-left" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon_settings_white@2x.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon_settings_white@2x.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon_settings_white@3x.png?t_8a0ee 2x" aria-hidden="true" style="" /> <span class="hidden-xs txtWhite txtSize16 fontWeight300 showInlineBlock pull-left" style="padding-left:5px;padding-right:10px;padding-top: 7px;">ตั้งค่าการอ่าน</span> </div> </div> <div id="" class="showInlineBlock pull-left dropdown"> <a class="dropdown-toggle showInlineBlock" data-toggle="dropdown" href="#" style="padding: 0;"> <img id="icnMenuCovFixedBar" style="" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover@2x.png?t_8a0ee 2x" style="" /> </a> <ul class="dropdown-menu fontWeight300 borderRound10" style="left: unset; right: 0px; top: calc(100% + 12px);border-radius:10px;width:170px;"> <li class="reset_article_btn hide" onclick="resetArticleReading();"><a title="ResetArticleReading" class="showInlineBlock clearfix" style="white-space:normal;"><span id="icnRe-readall" class="marginRight20 showInlineBlock pull-left"></span><span class="showInlineBlock pull-left txtSize16" style="max-width: 65px;word-break: break-word;">อ่านใหม่ทั้งหมด</span></a></li> <li class="showBlock" onclick="doSharePage(function(){ articleH.popupShareLinkOnly(document.URL); });"> <a title="Share" class="showInlineBlock clearfix"> <span id="icnShare" class="marginRight20 showInlineBlock pull-left"></span> <span class="showInlineBlock pull-left txtSize16">แชร์เรื่องนี้</span> </a> </li> <li class="showBlock"><a title="Report" class="report_btn showInlineBlock clearfix"><span id="icnReport" class="marginRight20 showInlineBlock pull-left"></span><span class="showInlineBlock pull-left txtSize16">รายงาน</span></a></li> </ul> </div> </div> </div> </div> <div id="fixedArticleFooterBar" class="" style="display:none;border-top:0.5px solid #e6e6e6;"> <div class="showBlock width100Percent"> <div class="showInlineBlock width50Percent pull-left"> <a target="_blank" style="text-decoration: none;"> <button class="btn bgWhite myshelf_btn borderNone" style="padding: 8px;font-size: 16px;width: 100%;height:50px;" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> รอสักครู่" data-error-text="ลองอีกครั้ง" data-addsuccess-text="<img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 35px;margin-top:-5px;'><span class='txtSize11' style='line-height: 1.18;text-align: center;'>เพิ่มแล้ว</span>" data-removesuccess-text="<img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 35px;margin-top:-5px;'><span class='txtSize11' style='line-height: 1.18;text-align: center;color: #909090;'>เพิ่มเข้าชั้น</span>"> <span class="likeWordOnFixedBar">เพิ่มเข้าชั้น</span> </button> </a> </div> <div class="showInlineBlock width50Percent pull-right bgGreenBlue"> <button class="btn txtEllipsis cont_read_btt bgGreenBlue txtWhite borderNone" disabled style="padding: 10px;font-size: 16px;width: 100%;height:50px;"><img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 25px; margin-right: 5px;filter:invert(var(--invertFixedBottomIconMainCover));'> อ่านเลย</button> </div> </div> </div> <div id="main-cover" class="content-container"> <div id="cover_background" style="position: absolute;left: 0;width: 100%;overflow: hidden; min-height: 460px; background-color: #000000;"> <img class="main_cover_background_thumbnail visible-xs visible-tablet" src="" onerror="articleH.coverSizeLargeError(this)" style=""/> </div> <div class="visibile-xs visible-tablet showFading"></div> <div id="cover_data" class="panel panel-default width100Percent paddingTopNone smPaddingTop0" style="background: transparent;position: relative;border: none;z-index: 2;box-shadow: none; min-height: 460px;"> <div class="width100Percent showInlineBlock"> <div class="showInlineBlock width100Percent"> <div id="divThumbnailImage" class="showInlineBlock smShowBlock smWidth100Percent pull-left sm-pull-none smPaddingTop30 hidden-xs" style="width: 460px; margin: auto;position: relative; height: 460px;"> <img id="id_article_thumbnail" title="รูปประจำงานเขียน" onerror="articleH.thumbnailError(this)" onload="articleH.stretchImage(this)" class="imageIcon showInlineBlock articleImgThumbnail hidden-xs" style="height: 460px;width: 460px;padding: 0;"/> <div class="hidden-xs showFadingRightSide"></div> </div> <div id="divArticleInfo" class="showInlineBlock smShowBlock smWidth100Percent smMarginTop10" style="width: calc(100% - 460px);max-height:460px;vertical-align: top;"> <div class="width100Percent clearfix showBlock toolBoxRight"> <div class="showInlineBlock pull-right"> <div id="tool_setting" class="showInlineBlock marginRight10 pull-left btnWhiteNoBgEffectHover"> <div onclick="$('#settingAAModal').modal();" class="showInlineBlock cursorPointer" style="padding: 2px 15px;text-align: center;" onMouseOver="toggleLabel('show');" onMouseOut="toggleLabel('hide');"> <img id="icnAA" class="showInlineBlock pull-left" src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon_settings_white@2x.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon_settings_white@2x.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/icon_settings_white@3x.png?t_8a0ee 2x' aria-hidden='true'> <span id="lblSettingReading" class="hidden-xs txtWhite txtSize16 fontWeight300 marginLeft5 showInlineBlock pull-left hide" style="margin-top:6px;">ตั้งค่าการอ่าน</span> </div> </div> <div id="tool_menu" class="showInlineBlock pull-left marginTop20 dropdown"> <a id="lnkToolMenu" class="dropdown-toggle btnWhiteNoBgEffectHover showInlineBlock" data-toggle="dropdown" href="#" style="padding: 0;border-radius: 50% !important;"> <span id="icnMenuCov"></span> </a> <ul class="dropdown-menu fontWeight300" style="left: unset; right: 0px; top: calc(100% + 12px);border-radius:10px;width:170px;"> <li class="reset_article_btn hide" onclick="resetArticleReading();"><a title="ResetArticleReading" class="showInlineBlock clearfix" style="white-space:normal;"><span id="icnRe-readall" class="marginRight20 showInlineBlock pull-left"></span><span class="showInlineBlock pull-left txtSize16" style="max-width: 65px;word-break: break-word;">อ่านใหม่ทั้งหมด</span></a></li> <li class="showBlock" onclick="doSharePage(function(){ articleH.popupShareLinkOnly(document.URL); });"> <a title="Share" class="showInlineBlock clearfix"> <span id="icnShare" class="marginRight20 showInlineBlock pull-left"></span> <span class="showInlineBlock pull-left txtSize16">แชร์เรื่องนี้</span> </a> </li> <li class="showBlock"><a title="Report" class="report_btn showInlineBlock clearfix"><span id="icnReport" class="marginRight20 showInlineBlock pull-left"></span><span class="showInlineBlock pull-left txtSize16">รายงาน</span></a></li> </ul> </div> </div> <div class="clearfix visible-xs visible-tablet showInlineBlock pull-right text-right"> <div class="boxChapterAmount txtSize13 marginRight10 marginTop10 hide" style="border-radius:12px;background-color:#00000069;color:var(--textOnMainCoverColor);padding: 3px 9px;vertical-align: middle;"> <span class="chapter_amount showInlineBlock"></span> <span class="">ตอน</span> </div> </div> </div> <div id="divArticleBasicInfo" class="showBlock width100Percent clearfix" style=""> <div class="lblCategory txtSize16sm15 fontWeight300 smPaddingBottom10" style=""> <div class="showInlineBlock"> <img id="txtChatArticle" class="hide hidden-xs" aria-hidden="true" style="width: 19px; margin-right: 5px;" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/chat-icon-maincover.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/chat-icon-maincover.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/chat-icon-maincover@2x.png?t_8a0ee 2x"> <a class="fontWeight300 height1Line category_link txtGreenBlue" style="text-decoration: none;"></a> </div> <div class="boxChapterAmount txtSize16 marginLeft10 showInlineBlock hidden-xs hidden-tablet hide" style="border-radius:15px;background-color:#ffffff33;color:var(--textOnMainCoverColor);padding: 3px 9px;vertical-align: middle;"> <span class="chapter_amount showInlineBlock"></span> <span class="">ตอน</span> </div> <span id="cover_end_text" class="showInlineBlock txtWhite txtSize15 smTxtSize12" style="background: var(--linkColor);padding: 0 8px 3px;border-radius: 12px;vertical-align: middle;display:none;">จบ</span> </div> <div id="blockArticlNameAndSynopsis"> <p id="virtualDesktopArticleName" class="txtSize36 smTxtSize23 fontWeight500" style="display: none;"></p> <div id="divSetHeightArticleName" class="showInlineBlock width100Percent" style="margin-bottom: 0px;max-height: 105px;"> <div class="showInlineBlock" style="width:100%;"> <p id="desktopArticleName" class="articleName txtSize36sm28 fontWeight500 showInline" style="margin-bottom: 0;vertical-align: middle;"> <a class="txtWhite" style="text-decoration: none;"></a> </p> </div> </div> <div class="showInlineBlock width100Percent hidden-xs author_in_main_cover marginRight20" style="margin-top:5px;"></div> <div class="showInlineBlock author_in_main_cover visible-xs-inline-block text-center sm-text-left" style="width:100%;margin: 10px auto 6px;"></div> <div class="showInlineBlock smPaddingTop10 width100Percent articleSynopsisBox" style="overflow: hidden;"> <p class="txtWhite articleSynopsis txtSize16sm15 fontWeight300 " style="max-height: 68px;"></p> </div> </div> <div class="visible-xs visible-tablet marginTop10 smMarginTopNone width100Percent"> <div class="showInlineBlock txtWhite col-xs-6 paddingLeftRightNone text-left give_rating_parent" style="height:17px; vertical-align: text-top;"> <div class="showInlineBlock txtSize10" style="" id="give_rating_2"> <input type="hidden" class="cursorPointer form-control article_rating_avg" value="" data-readonly/> </div> <div class="showInlineBlock" style="word-break: keep-all;"> <span class="txtNewGrey2 txtSize12 fontWeight300"> <img style="" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart14.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart14.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart14@2x.png?t_8a0ee 2x"> <span class="current_rating_count"></span> <span class="ratingDescription"></span> </span> </div> </div> <div class="txtSize18 smTxtSize12 fontWeight500 text-right sm-text-left smViewCountBox" style="float:right;"> <div class="txtNewGrey2 txtSize10 fontWeight300 visible-xs-inline-block visible-tablet-inline-block" style="vertical-align: sub;"> <span class="viewCount mobile_elem txtSize12 marginRight10" title=""></span> <span class="icnCommentMini" title="ยอดคอมเม้น" alt="ยอดคอมเม้น"></span> <span class="commentCount txtSize12 marginRight10" style="" title=""></span> <span class="icnInShelfMini" title="ยอดเพิ่มเข้าชั้น" alt="ยอดเพิ่มเข้าชั้น"></span> <span class="favoriteCount txtSize12" title=""></span> </div> </div> </div> <div id="zoneButtonMobile" class="visible-xs visible-tablet smMarginBottom20 clearfix" style="text-align: center;margin-top:28px;"> <div class="marginTop10" style="position: relative;text-align: center;display: inline-flex;margin-left: auto;margin-right: auto;width: 100%;"> <div class="showInlineBlock marginRight10 mobile_rating_btn_parent" style="width:42px;"> <span class="rating_btn_parent"> <span style="position: relative;"> <a onclick="" style="text-decoration: none;" class=""> <button class="btn btn-default btn-xs btn_chapter" style="height: 44px;width: 44px;border-radius: 50%;padding: 0;border-color: #dbdbdb;"> <div class="rating_item_img_cover"></div> </button> </a> <div class="rating_item_list" style="display: none;position: absolute;left: 0px;transform: translate(-15px, 10px);width: 234px;z-index: 1;"> <span class="span_rating_item_list main_cover" style="display: inline-block;border-radius: 15px;padding: 5px 5px 5px 5px;background: #e6e6e6;box-shadow: 0 5px 5px 0 rgba(0, 0, 0, 0.08);"></span> <span style="content: '';position: absolute;top: 0;left: 20px;width: 0;height: 0;border: 15px solid transparent;border-bottom-color: #e6e6e6;border-top: 0;margin-top: -10px;"></span> </div> </span> </span> </div> <div class="showInlineBlock clearfix mobile_button_parent" style="width: calc(100% - 52px);"> <div id="box_btn_add_shelf_mobile" class="showInlineBlock" style="width: calc(50% - 5px);"> <a target="_blank" style="text-decoration: none;"> <button class="btn btnBorderWhite btn-xs myshelf_btn btnRound20Pt txtEllipsis" style="padding: 8px;font-size: 16px;width: 100%;" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> รอสักครู่" data-error-text="ลองอีกครั้ง" data-addsuccess-text="<img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 35px; margin-right: 5px;margin-top:-5px;'>เพิ่มแล้ว" data-removesuccess-text="<img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 35px; margin-right: 5px;margin-top:-5px;'>เพิ่มเข้าชั้น"> <span class="likeWord">เพิ่มเข้าชั้น</span> </button> </a> </div> <div id="box_btn_cont_read_mobile" class="showInlineBlock pull-right marginLeft10" style="width: calc(50% - 5px);"> <button class="btn btn-continue-chat btn-xs btn_chapter btnRound20Pt txtEllipsis cont_read_btt" disabled style="padding: 9px;font-size: 16px;width: 100%;"><img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 25px; margin-right: 5px;filter:invert(var(--invertFixedBottomIconMainCover));'> อ่านเลย</button> </div> </div> </div> </div> <div class="showBlock width100Percent marginTop20 hidden-xs hidden-tablet relativePos" style="bottom:20px;"> <div id="divRatingAllValue" class="showBlock width100Percent clearfix" style="color: #909090;"> <div class="showInlineBlock txtWhite give_rating_parent pull-left" style="height:17px; vertical-align: text-top;" id="give_rating_1"> <input type="hidden" id="is_hide_rating" value=""/> <img style="width: 20px;" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart25.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart25.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart25@2x.png?t_8a0ee 2x"> <span class="current_rating_count txtSize14"></span> <span class="ratingDescription txtSize14"></span> </div> <div class="showInLineBlock pull-left marginLeft10" style=""> <span class="viewCount desktop_elem txtSize14 marginRight10" title=""></span> <span class="icnCommentMini" title="ยอดคอมเม้น" alt="ยอดคอมเม้น"></span> <span class="commentCount txtSize14 marginRight10" style="" title=""></span> <span class="icnInShelfMini" title="ยอดเพิ่มเข้าชั้น" alt="ยอดเพิ่มเข้าชั้น"></span> <span class="favoriteCount txtSize14" title=""></span> </div> </div> <div id="divBtnAddShelfContinueRead" class="showBlock width100Percent marginTop20 clearfix" style=""> <div class="showInlineBlock pull-left sm-pull-none sm-text-center smallFitDiv hidden-xs" style="width: 100%"> <span class="rating_btn_parent" style="position:relative;"> <a onclick="" style="text-decoration: none;" class=""> <button class="btn btn-default btn-xs btn_chapter" style="height: 44px;max-width: 44px;border-radius:50%;padding:0;"> <div class="rating_item_img_cover" style=""></div> </button> </a> <div class="rating_item_list" style="display: none;position: absolute;left: 0px;transform: translate(-150px, 10px);width: 354px;z-index: 1;"> <span class="span_rating_item_list main_cover" style="display: inline-block;border-radius: 15px;padding: 5px 5px 5px 5px;background: #e6e6e6;box-shadow: 0 5px 5px 0 rgba(0, 0, 0, 0.08);"></span> <span style="content: '';position: absolute;top: 0;left: 50%;width: 0;height: 0;border: 15px solid transparent;border-bottom-color: #e6e6e6;border-top: 0;margin-left: -18px;margin-top: -10px;"></span> </div> </span> <button id="btn_add_shelf_desktop" class="btn btnBorderWhite btn-xs myshelf_btn txtEllipsis" style="padding: 8px 20px;font-size: 16px;border-radius:25pt;" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> รอสักครู่" data-error-text="ลองอีกครั้ง" data-addsuccess-text="<img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-green-add@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 30px;margin-top:-5px;'>เพิ่มแล้ว" data-removesuccess-text="<img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/shelf-dark-grey-add@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 35px; margin-right: 5px;margin-top:-5px;'>เพิ่มเข้าชั้น"> <span class="likeWord">เพิ่มเข้าชั้น</span> </button> <button id="btn_cont_read_desktop" class="btn btn-default btn-xs btn_chapter txtEllipsis cont_read_btt txtWhite" disabled style="padding: 9px 20px; font-size: 16px;border-radius:25pt;background-color: #1FB49F;border-color: #1FB49F;"><img src='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light.png?t_8a0ee' srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/eye-light@2x.png?t_8a0ee 2x' aria-hidden='true' style='width: 20px;filter:invert(var(--invertFixedBottomIconMainCover));'> อ่านเลย</button> </div> </div> </div> </div> </div> </div> </div> </div> <div style="display: none;"> <input id="main_cover_article_rating_total" value=""> <input id="main_cover_article_rating_count" value=""> <input id="main_cover_this_user_rating"> <input id="main_cover_tmp_input_rating"> </div> </div> <div id="id_tag_list_div" class="smPaddingTop10 bgWhite content-container smFullScreen smBorderLeftRightNone paddingLeftRight10 paddingTop20 marginBottom20" style="margin-top: -20px;"></div> <div class="modal fade" id="settingAAModal" tabindex="-1" role="dialog" aria-labelledby="settingAAModalLabel" aria-hidden="true"> <div class="modal-dialog" role="document" style="width:auto;"> <div id="settingAA" class="modal-content" style="border:none;"> <div class="txtSize16 width100Percent clearfix showBlock marginBottom10">ฟอนต์</div> <div class="fontFamilyLabel dropdown text-center"> <button class="btn btn-default dropdown-toggle width100Percent txtSize16" type="button" data-toggle="dropdown"> <span class="glyphicon glyphicon-menu-down txtSize10" style="margin-left: 10px;"></span> </button> <ul class="dropdown-menu"> </ul> </div> <div class="txtSize16 width100Percent clearfix showBlock marginTopBottom10">ขนาดตัวอักษร</div> <div class="txtSize16 padding10 text-center width100Percent showBlock clearfix"> <button type="button" class="btn btn-default showInlineBlock pull-left" aria-label="Zoom Out" onclick="contentH.size(-2)" style="width:130px;"> <img class="imgZoomOut" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/zoom_out.png?t_8a0ee" srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/zoom_out.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/zoom_out@2x.png?t_8a0ee 2x' style="width:24px;" /> </button> <button type="button" class="btn btn-default showInlineBlock pull-right" aria-label="Zoom In" onclick="contentH.size(2)" style="width:130px;margin-left:10px;"> <img class="imgZoomIn" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/zoom_in.png?t_8a0ee" srcset='https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/zoom_in.png?t_8a0ee 1x, https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/zoom_in@2x.png?t_8a0ee 2x' style="width:24px;" /> </button> </div> <div class="txtSize16 width100Percent clearfix showBlock marginTopBottom10">ธีมสี</div> <div class="padding10 center-block showBlock clearfix" style="width:fit-content;"> <div id="normal_moblie" title="ปกติ" alt="ปกติ" class="themeBtn themeMenu" onclick="selectTheme('normal');applyReadMode('normal');"><span class="themePic theme_normal"></span> </div> <div id="sepia_moblie" title="ซีเปีย" alt="ซีเปีย" class="themeBtn themeMenu" onclick="selectTheme('sepia');applyReadMode('sepia');"><span class="themePic theme_sepia"></span> </div> <div id="night_moblie" title="กลางคืน" alt="กลางคืน" class="themeBtn themeMenu" onclick="selectTheme('night');applyReadMode('night');"><span class="themePic theme_night"></span></div> <div id="dark_moblie" title="มืด" alt="มืด" class="themeBtn themeMenu" onclick="selectTheme('dark');applyReadMode('dark');"><span class="themePic theme_dark"></span></div> </div> <div class="txtSize16 width100Percent clearfix showBlock marginTopBottom10">ระยะห่างบรรทัด</div> <div class="txtSize16 padding10 text-center width100Percent showBlock clearfix"> <div class="borderLightGrey borderRound cursorPointer showInlineBlock pull-left ch_line_height" onclick="contentH.line('small');selectLineHight('small');" style="width:83px;margin-right:10px;"> <div class="select_lineheight_s img_bs"></div> </div> <div class="borderLightGrey borderRound cursorPointer showInlineBlock pull-left ch_line_height" onclick="contentH.line('medium');selectLineHight('medium');" style="width:83px;margin-right:10px;"> <div class="select_lineheight_m img_wm"></div> </div> <div class="borderLightGrey borderRound cursorPointer showInlineBlock pull-left ch_line_height" onclick="contentH.line('large');selectLineHight('large');" style="width:83px;"> <div class="select_lineheight_l img_wl"></div> </div> </div> </div> </div> </div> <div class="modal fade" id="modal_show_tags" tabindex="-1" role="dialog" aria-hidden="true"> <div class="modal-dialog width90Percent" id="modal_dialog_tags" style="max-width: 300px; margin: auto;" role="document"> <div class="modal-content" style="border-radius:17px;"> <div class="modal-header" style="border: 0;"> <div class="modal-title showInlineBlock text-center" style="width: calc(100% - 30px);"> <label class="txtSize16 fontWeight500 modal-header-message" style="float: unset;text-align: unset;margin: 0;">แท็กนิยาย</label> </div> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">✖</span> </button> </div> <div id="id_modal_tag_list" class="modal-body paddingAll10 customScrollBar" style="padding: 0 10px 20px;overflow-y: auto;min-height:70px;max-height:290px;"></div> <div class="modal-footer" style="border: none;padding: 0 0 15px;"></div> </div> </div> </div> <script>
    (function(){
        function authorInfoDsk(){
            const publisher_image_url = PUBLIC_ASSETS_URL + user_id_publisher + '/profile_picture/tiny.gif?' + publisher_thumbnail_edition;
            const pm_logo_url =  CDN_ASSETS_IMAGES + 'PM_white.png?' + ASSET_IMAGES_VERSION;
            const pm_logo_url2x =  CDN_ASSETS_IMAGES + 'PM_white@2x.png?' + ASSET_IMAGES_VERSION;
            const pm_btn_html = '<button type="button" class="btn btnBorderGrey btn-xs" style="min-width: 80px;height: 25px;vertical-align: text-top;" ' +
                'onclick="location.href=\''+WEB_URL_HTTPS+'?action=activity_center&tab=message&user_id='+user_id_publisher+'&page_no=1&from=user_page\';">' +
                '<span>' +
                '<img src="' + pm_logo_url + '" ' +
                'srcset="' + pm_logo_url + ' 1x, ' + pm_logo_url2x + ' 2x" ' +
                'aria-hidden="true" style="width: 16px;"> พูดคุย' +
                '</span>' +
                '</button>\n';
            return(
                `<div class="showInlineBlock width100Percent">
                    <a href="${WEB_URL_HTTPS}?action=user_page&user_id_publisher=${user_id_publisher}" style="text-decoration: none;" title="นามปากกา: ${author_name}">
                        <img alt="รูปนักเขียน" class="showInlineBlock bgWhite pull-left img-thumbnail imageIcon" onerror="articleH.profileError(this);"
                        src="${publisher_image_url}" style="padding: 0;border-radius: 50%;width: 30px;height: 30px;margin-right: 12px;border-color:var(--lineColor);" />
                    </a>
                    <div class="txtSize16 fontWeight300 smMarginTop5" style="width:calc(100% - 45px); overflow: hidden;float:left;">
                        <p class="height1Line author_publihser showInlineBlock" style="margin-bottom: 0px;margin-top:2px;max-width: calc(100% - 120px);white-space: nowrap;text-overflow: ellipsis;">
                            <a class="txtSize16" href="${WEB_URL_HTTPS}?action=user_page&user_id_publisher=${user_id_publisher}" style="color: white;text-decoration: none;"
                               title="นามปากกา: ${author_name}">${author_name}</a>
                        </p>
                        ${!jMeb.empty(trophy_data) ? `
                        <div class="showInlineBlock" style="vertical-align: top;">
                            <img src="${trophy_data.trophy_thumbnail_path}?${trophy_data.trophy_edition}" style="max-height: 1.4em;">
                        </div>
                        ` : ``}
                        <div class="showInlineBlock" style="margin-left: 10px; vertical-align: top;">
                            <button type="button" class="btn btnBorderGrey btn-xs follow_btn btnRound20Pt" style="padding: 3px 13px;vertical-align: text-top;line-height:1.4;" data-check="${author_guid}"
                                onclick="MyShelf.addFollow('author','${author_guid}',this);">
                                <span class="follow_text txtSize14sm12">ติดตาม</span>
                            </button>
                        </div>
                    </div>
                </div>`
            )
        }
        function authorInfoSm(){
            return(
                '<img alt="รูปนักเขียน" class="showInlineBlock bgWhite" ' +
                'onerror="articleH.profileError(this);" ' +
                'src="' + PUBLIC_ASSETS_URL + user_id_publisher +'/profile_picture/tiny.gif?' + publisher_thumbnail_edition + '" ' +
                'style="padding: 0;border-radius: 50%;width: 20px;margin-right: 5px;vertical-align: text-top;" />' +
                '<div class="txtSize14 fontWeight300 showInlineBlock" style="max-width:calc(100% - 135px); overflow: hidden; white-space: nowrap;text-overflow: ellipsis; vertical-align: text-top;">' +
                '<p class="height1Line author_publihser showInlineBlock" style="margin: 0px;">' +
                '<a href="'+WEB_URL_HTTPS+'/?action=user_page&user_id_publisher='+user_id_publisher+'" ' +
                'style="color: white; text-decoration-line: none;" ' +
                'title="นามปากกา: '+(author_name)+'">' + (author_name) + '</a>' +
                '</p>' +
                '</div>' +
                (!jMeb.empty(trophy_data) ?
                '<div class="showInlineBlock" style="margin-left: 5px; vertical-align: top;">' +
                '<img src="' + (trophy_data.trophy_thumbnail_path) + '?' + (trophy_data.trophy_edition) + '" style="max-height: 1.4em;">' +
                '</div>' : '') +
                '<div class="showInlineBlock" style="margin-left: 8px; vertical-align: middle;">' +
                '<button type="button" class="btn btnBorderGrey btn-xs btnRound20Pt follow_btn" ' +
                'style="padding: 3px 13px;vertical-align: text-top;" data-check="' + author_guid + '" ' +
                'onclick="MyShelf.addFollow(\'author\',\'' + author_guid + '\',this);">' +
                '<span class="follow_text txtSize16sm12">ติดตาม</span>' +
                '</button>' +
                '</div>'
            )
        }

        // data
        let rating_count_number = (rating_count_full).replace(',','');
        $('#main_cover_article_rating_total').attr('value', rating_total);
        $('#main_cover_article_rating_count').attr('value', rating_count_number > 0 ? rating_count : 0);

        // text data
        // content_rating
        let content_rating_text = '';
        if(content_rating === 5 || content_rating === 6) {
            content_rating_text = content_rating === 5 ? ' (18+)' : ' (20+)';
        }

        // category link
        $('.category_link').text(decodeString(category_name)+content_rating_text)
            .attr('href','/?action=list_article_by_category&category_id='+category_id+'&category_name='+category_name.replace(/&amp;/gi,'%26').replace(/&/gi,'%26')+'&article_species='+article_species);

        // article name
        const article_name_decoded = decodeString(article_name);
        //var cutArticleNAme = article_name_decoded.substr(0,40) + '...';
        $('#virtualDesktopArticleName').text(article_name_decoded);
        $('#desktopArticleName a').text(article_name_decoded).attr({'title':'เรื่อง: '+article_name_decoded,'href':WEB_URL_HTTPS+"a/"+article_guid});        
        $('#cover_end_text').prependTo('#desktopArticleName');
        $('#articleNameInFixed').text(article_name_decoded);

        // chapter count label
        let chapter_count_label = '';
        if(article_type !== 'NO_CHAPTER'){
            if (article_type === 'SINGLE_CHAPTER'){
                chapter_count_label = 'ตอนเดียวจบ';
            }
            else{
                chapter_count_label = chapter_count.length > 0 ? chapter_count + ' ตอน':'0 ตอน';
                $('.chapter_amount').text(chapter_count);
                $('.boxChapterAmount').removeClass('hide');
            }
        }
        if(is_end) {
            $('#cover_end_text').show();
            //$('#desktopArticleName').parent().css('width','calc(100% - 45px)');
            chapter_count_label += ' (จบแล้ว)';
        }
        $('#id_chapter_count_label').text(chapter_count_label);

        // article synopsis
        $('.articleSynopsis').html(article_synopsis);

        if(article_species == 'CHAT')
        {
            $('#txtChatArticle').removeClass('hide');
        }

        // article stat
        if(article_species == 'CHAT')
        {
            $('.viewCount.desktop_elem').attr('title',bubble_count_full).text(bubble_count+' ');
            $('.viewCount.desktop_elem').before('<span id="" class="marginRight5 icnReadMini" title="ยอดคลิกอ่านนิยายแชท" alt="ยอดคลิกอ่านนิยายแชท"></span>');

            $('.viewCount.mobile_elem').attr('title',bubble_count_full).text(bubble_count+' ');
            $('.viewCount.mobile_elem').before('<span title="ยอดคลิกอ่านนิยายแชท" class="marginRight5 icnReadMini" alt="ยอดคลิกอ่านนิยายแชท"></span>');
        }
        else
        {
            $('.viewCount.desktop_elem').attr('title',view_count_full).text(' '+view_count).css('margin-right', '10px');
            $('.viewCount.desktop_elem').before('<span class="icnViewMini" title="ยอดวิว" alt="ยอดวิว"></span>');

            $('.viewCount.mobile_elem').attr('title',view_count_full).text(' '+view_count).css('margin-right', '8px');
            $('.viewCount.mobile_elem').before('<span class="icnViewMini" title="ยอดวิว" alt="ยอดวิว"></span>');
        }
        $('.commentCount').attr('title',comment_count_full).text(comment_count);
        $('.favoriteCount').attr('title',favorite_count_full).text(favorite_count);

        // rating count
        if(!is_hide_rating){
            $('.current_rating_count').attr('title', rating_count_full).text(rating_count_number > 0 ? rating_count : '');
            $('.ratingDescription').text(rating_count === '0' ? 'รอใครสักคนเลิฟเรื่องนี้' : ' คน เลิฟเรื่องนี้');
            $('.article_rating_avg').attr('value', rating_count.length <= 0 ? '0' : (rating_total / rating_count_number) > 5 ? '5' : rating_total / rating_count_number);
        }else{
            $('.give_rating_parent').remove();
            $('.smViewCountBox').css('float','');
        }

        // report btn
        $('.report_btn').attr('onclick', "articleH.showFormReportArticle('" + article_guid + "');");

        // last edit date
        $('.last_edit_date').text('แก้ไขล่าสุด ' + last_edit_thai_date);

        // author info
        $('.author_in_main_cover.hidden-xs').html(authorInfoDsk());
        $('.author_in_main_cover.visible-xs-inline-block').html(authorInfoSm());

        // img
        var article_cover_path_large_size = article_cover_path.replace('/small.gif','/large.gif');
        if (unpromoted_cover_image === '1' || unpromoted_cover_image === '2'){
            if (unpromoted_cover_image === '1'){
                $('.main_cover_background_thumbnail').attr('onclick',"articleH.showArticleThumbnail(document.getElementById('id_article_thumbnail'),'"+ article_cover_path_large_size.substring(0,article_cover_path_large_size.indexOf('/large.gif')+1) +"', '" + thumbnail_edition + "' , '" + article_guid + "');");
            }
            article_cover_path_large_size = unpromoted_cover_image_path;
        } 

        $('.main_cover_background_thumbnail').attr('src',article_cover_path_large_size).css('background-image','url('+article_cover_path_large_size+')');

        let article_thumbnail_src = article_thumbnail_path + 'small.gif?' + thumbnail_edition;
        const article_thumbnail_elem = $('#id_article_thumbnail');
        if (unpromoted_cover_image === '1'){
            article_thumbnail_src = unpromoted_cover_image_path;
            article_thumbnail_elem.addClass('cursorPointer');
            article_thumbnail_elem.attr('onclick',"articleH.showArticleThumbnail(this,'"+article_thumbnail_path+"', '"+thumbnail_edition+"' , '"+article_guid+"')");
            $('.showFadingRightSide').attr('onclick',"articleH.showArticleThumbnail(document.getElementById('id_article_thumbnail'),'"+article_thumbnail_path+"', '"+thumbnail_edition+"' , '"+article_guid+"')").addClass('cursorPointer');
        }
        else if(unpromoted_cover_image === '2'){
            article_thumbnail_src = unpromoted_cover_image_path;
        }
        article_thumbnail_elem.attr('src',article_thumbnail_src);

        // BEG tag gen =======================================================
        function tagElemSwiper(tag_id,tag_name,tag_group_id){
            let tag_href = WEB_URL_HTTPS + '?action=search_article&tab=tag_only';
            if (tag_name != null && tag_group_id != null) {
                tag_href += '&tag_group_id_list=' + tag_group_id + '&article_species=' + article_species;
            }
            else if (tag_name != null && tag_id != null) {
                tag_href += '&tag_id_list=' + tag_id + '&article_species=' + article_species;
            }

            return (
                `
                <div class="swiper-slide tags-swiper-slides borderNewGrey1 paddingLeft5 showInlineBlock" style="border-radius: 15px;padding: 5px 14px;border: solid 0.5px var(--textOnCardDarkColor);">
                    <a href="${tag_href}" class="data_link cursorPointer" style="text-decoration: none;font-size:15px;"
                        title="${tag_name.replace(/'/g, "&apos;").replace(/"/g, "&quot;")}">
                        ${decodeString(tag_name)}
                    </a>
                </div>`
            );
        }
        function tagElem(tag_id,tag_name,tag_group_id){
            let tag_href = WEB_URL_HTTPS + '?action=search_article&tab=tag_only';
            if (tag_name != null && tag_group_id != null) {
                tag_href += '&tag_group_id_list=' + tag_group_id + '&article_species=' + article_species;
            }
            else if (tag_name != null && tag_id != null) {
                tag_href += '&tag_id_list=' + tag_id + '&article_species=' + article_species;
            }

            return (
                `<span class="borderNewGrey1 paddingLeft5 marginRight5 showInlineBlock" style="border-radius: 15px;padding: 5px 14px;border: solid 0.5px #303030;">
                    <a href="${tag_href}" class="data_link cursorPointer" style="text-decoration: none;font-size:15px;"
                        title="${tag_name.replace(/'/g, "&apos;").replace(/"/g, "&quot;")}">
                        ${decodeString(tag_name)}
                    </a>
                </span>`
            );
        }
        function showTagList(tag_list_json) {
            const ic_tag_url = CDN_ASSETS_IMAGES + 'tag_black.png?' + ASSET_IMAGES_VERSION;
            const ic_tag_url2x = CDN_ASSETS_IMAGES + 'tag_black@2x.png?' + ASSET_IMAGES_VERSION;
            let tag_list_elem = '';
            tag_list_json.forEach(function(elem){
                tag_list_elem += tagElemSwiper(elem.tag_id,elem.tag_name,elem.tag_group_id);
            });
            return (
                `<div class="showInlineBlock divShowTags" id="divShowTags" style="margin-bottom: 0;color: white; padding: 2px 0;width: calc(100% - 30px);">
                    <div class="showInlineBlock width100Percent showTags fontWeight300" id="showTags" style="">
                        <img class="icn-tags showInlineBlock pull-left" src="${ic_tag_url}" srcset="${ic_tag_url} 1x, ${ic_tag_url2x} 2x" aria-hidden="true" style="width: 30px;filter:invert(var(--invertTagsIcon));">
                        <div id="box-swiper-tags" class="showInlineBlock" style="width:calc(100% - 30px);">
                            <div class="swiper-container width100Percent container-swiper-tags" style="z-index : 0;">
                                <div class="swiper-wrapper">
                                    ${tag_list_elem}
                                </div>
                                <div class="swiper-scrollbar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <span class="txtNewGrey3 divShowTags notShowOnDesktop showInlineBlock relativePos pull-right" id="seeMoreTags" style="right: 0;top:10px;width:30px;" onclick="$('#modal_show_tags').modal();">
                    <span class="cursorPointer center-block" title="Tag ทั้งหมด" style="width:15px;">
                        <img src="${CDN_ASSETS_IMAGES}more@2x.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ASSETS_IMAGES}more@2x.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ASSETS_IMAGES}more@3x.png?${ASSET_IMAGES_VERSION} 2x" aria-hidden="true" style="width: 15px;">
                    </span>
                </span>`
            )
        }
        function modalTagElem(tag_id,tag_name,tag_group_id) {
            let tag_href = WEB_URL_HTTPS + '?action=search_article&tab=tag_only';

            if (tag_name != null && tag_group_id != null) {
                tag_href += '&tag_group_id_list=' + tag_group_id + '&article_species=' + article_species;
            }
            else if (tag_name != null && tag_id != null) {
                tag_href += '&tag_id_list=' + tag_id + '&article_species=' + article_species;
            }
            return(
                `<span class="borderNewGrey1 paddingLeft5 marginRight5 showInlineBlock marginTop10 lstTag" style="border-radius: 15px;padding: 5px 14px;border: solid 0.5px var(--textOnCardLightColor) !important;">
                    <a href="${tag_href}" class="data_link cursorPointer" style="display: inline-block;"  title="${tag_name.replace(/'/g, "&apos;").replace(/"/g, "&quot;")}">
                        ${decodeString(tag_name)}
                    </a>
                </span>`
            )
        }


        if (tag_list_json.length > 0)
        {
            $('#id_tag_list_div').html(showTagList(tag_list_json));
            let modal_tag_elem = '';
            tag_list_json.forEach(function (elem) {
                modal_tag_elem += modalTagElem(elem.tag_id, elem.tag_name, elem.tag_group_id);
            });
            $('#id_modal_tag_list').html(modal_tag_elem);
        }
        else
        {
            $('#modal_show_tags').remove();
            $('#id_tag_list_div').remove();
            $('#contentArticle').css('margin-top','-20px');
        }

        // END tag gen =======================================================
    })();

    $(window).scroll(function() {
        var mainCoverH = $('#main-cover').height();
        var headerMenuH = $('#headerMenu').height();
        if($(window).scrollTop() >= (mainCoverH + headerMenuH)){
            //console.log($(window).scrollTop(),(mainCoverH + headerMenuH))
            $('#fixedArticleInfoBar').show();
            $('#fixedArticleFooterBar').show();
            if($(window).width() <= 767) $('#footerMobile').css('bottom','50px');
            else $('#footerMobile').css('bottom','');
        }else{
            //console.clear();
            $('#fixedArticleInfoBar').hide();
            $('#fixedArticleFooterBar').hide();
            if($(window).width() <= 767) $('#footerMobile').css('bottom','');
        }
    });
</script> <script type="text/javascript">
    var first_chapter_guid = '';
    if(chapter_list.length > 0 && chapter_list !== 'null'){
        first_chapter_guid = JSON.parse(chapter_list).sort(function(a,b){
            return a.chapter_order-b.chapter_order;
        })[0].chapter_guid;
    }

    var setting = {
        token: CookiesJS.getCookie('user_token'),
        article_guid: article_guid,
        article_species: article_species,
        action: action,
        status: article_status,
        article_type: article_type,
        meb_book_id: meb_book_id,
        author_guid: author_guid,
        article_name: article_name,
        chapter_list: jMeb.empty(sell_chapter_list) || sell_chapter_list === 'null' ? chapter_list : sell_chapter_list,
        first_chapter_guid: first_chapter_guid
    };

    var mainCover = MainCover.getInstance(setting);
    $(function () {
        mainCover.ready();
    });

    MyPurchaseChapterObj.config(setting)
    $(function () {
        MyPurchaseChapterObj.ready();
        showTags();
        setHeightCover();
        if(preview === '1')
        {
            $('#main-cover a').removeAttr('href').removeAttr('onclick');
            $('#main-cover *').removeAttr('onclick').css('cursor', 'default');
            $('#main-cover button').prop('disabled',true);
        }
    });

    var setting = {
        article_guid : article_guid,
        article_type : article_type,
        unpromoted_content_image : unpromoted_content_image
    };
    contentH.config(setting);
    articleH.getBtnOpenAppReading(article_guid, track_chapter_guid);

    var track_article_guid = article_guid;
    // var track_chapter_guid = track_chapter_guid;

    if(track_chapter_guid == ''){
        fbq('trackCustom', 'viewArticle', {
            article_guid: track_article_guid
        });
    }
    else
    {
        paid_chapter = MyPurchaseChapterObj.checkPurchasedChapter(article_guid, track_chapter_guid);

        if (paid_chapter)
        {
            $('.button_purchase_chapter').css('display', 'none');

        }
    }

    var token = CookiesJS.getCookie('user_token');

function setHeightCover() {

    resetHeightCover = function () {
        var width_screen = $(window).width();
        if(width_screen >= 768)
        {
            var height_data = '350px';

            $('#cover_data').css('height', height_data);
            $('#cover_background').css('height', height_data);
        }
        else
        {
            $('#cover_data').css('height', '');

            var height_data = Math.ceil($('#cover_data').height());

            $('#cover_data').css('height', height_data+'px');
            $('#cover_background').css('height', height_data+'px');

        }
    };

    resetHeightCover();

    $(window).resize(function () {
        resetHeightCover();
    });

}

function showTags() {
    resetSeeMoreTags = function () {

        $('#seeMoreTags').removeClass('showInlineBlock').addClass('notShowOnDesktop');
        $('#divShowTags').removeClass('widthWithSeeMore').addClass('width100Percent');
        
        if($('#showTags').get(0) && article_species !== 'CHAT'){
            var totalTagsWidth = 0;
            $('.tags-swiper-slides').each(function(index){
                totalTagsWidth += $(this).find('a').width() + 28 + 5; // 28->padding-left and padding-right, 5->margin-right
            })
            if(totalTagsWidth > $('#showTags').find('.swiper-container').width())
            {
                $('#divShowTags').removeClass('width100Percent')
                $('#seeMoreTags').removeClass('notShowOnDesktop').addClass('showInlineBlock');
            }
            var swiper = new Swiper4('.container-swiper-tags', {
                scrollbar: {
                    el: '.swiper-scrollbar',
                    hide: true,
                    draggable: true,
                },
                slidesPerView: 'auto',
            });
            $(window).resize(function(){
                $('.tags-swiper-slides').each(function(index){
                    totalTagsWidth += $(this).find('a').width() + 28 + 5; // 28->padding-left and padding-right, 5->margin-right
                })
                if(totalTagsWidth > $('#showTags').find('.swiper-container').width())
                {
                    $('#divShowTags').removeClass('width100Percent')
                    $('#seeMoreTags').removeClass('notShowOnDesktop').addClass('showInlineBlock');
                }else{
                    $('#divShowTags').addClass('width100Percent')
                    $('#seeMoreTags').addClass('notShowOnDesktop').removeClass('showInlineBlock');
                }
                var swiper = new Swiper4('.container-swiper-tags', {
                    scrollbar: {
                        el: '.swiper-scrollbar',
                        hide: true,
                        draggable: true,
                    },
                    slidesPerView: 'auto',
                });
            });
        }
    };

    resetSeeMoreTags();

    $(window).resize(function () {
        resetSeeMoreTags();
    });
}

function resetArticleReading() {
    var token = CookiesJS.getCookie('user_token');

    if(!jMeb.empty(token))
    {
        var user_id = CookiesJS.getCookie('user_id');

        var user_reading_history = storage.getStorage('user_reading_history');
        user_reading_history = (user_reading_history === null) ? {} : JSON.parse(user_reading_history);
        if (user_reading_history[user_id] === undefined)
        {
            user_reading_history[user_id] = {};
        }

        for (var index_guid in user_reading_history[user_id])
        {
            if (user_reading_history[user_id][index_guid].article_guid === article_guid)
            {
                delete user_reading_history[user_id][index_guid];
            }
        }

        storage.setStorage('user_reading_history', JSON.stringify(user_reading_history));

        $.ajax({
            type: "Post",
            url: "?action=ajax&ajax=1&ajax_case=CallWrapper",
            data: ({
                api_call : 'My',
                method_call : 'userResetViewChatArticle',
                article_guid : article_guid,
                token : token,
                app_id : DEFAULT_APP_ID,
                app_platform : APP_PLATFORM,
                app_ver : 1
            }),
            success: function(res)
            {
                var result = jQuery.parseJSON(res);
                if(result.status.success)
                {
                    mainCover.initReadingHistory();
                    $('.reset_article_btn').addClass('hide');
                }
            }
        });
    }
    else
    {
        if(storage.checkSupportLocalStorage())
        {
            var reading_history = JSON.parse(storage.getStorage('reading_history_position'));
            if (!jMeb.empty(reading_history))
            {
                for (var i = 0; i < reading_history.length; i++)
                {
                    if (reading_history[i].article_guid === article_guid)
                    {
                        reading_history.splice(i, 1);
                        break;
                    }
                }
            }
            storage.setStorage('reading_history_position', JSON.stringify(reading_history));
        }
        mainCover.initReadingHistory();
        $('.reset_article_btn').addClass('hide');
    }
}

var timerDelay = null;
function toggleLabel(process){
    clearTimeout(timerDelay);
    timerDelay = setTimeout(function () {
        if(process == 'show') $('#lblSettingReading').removeClass('hide').animate(500,'swing');
        else $('#lblSettingReading').addClass('hide').animate(500,'swing');
    },250);
}
</script> <style>
    .b_icon {
        display: none;
        margin: 0 auto;
    }

    .w_icon {
        display: block;
        margin: 0 auto;
    }

    .btnBorderBlue .b_icon {
        display: block;
    }

    .btnBorderBlue .w_icon {
        display: none;
    }

    .btnBorderSetting {
        color: #909090 !important;
        background-color: transparent;
        border-color: #dbdbdb !important;
    }

    .btnBorderSetting:focus, .btnBorderSetting:hover {
        color: #7d7d7d !important;
        background-color: transparent;
        border-color: #ababab !important;
    }

    span.arrow_down {
        width: 12px;
        height: 6px;
        display: inline-block;
        vertical-align: middle;
        background-size: contain;
        background-repeat: no-repeat;
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/down_arrow@2x.png);
    }

    span.arrow_up {
        width: 12px;
        height: 6px;
        display: inline-block;
        vertical-align: middle;
        background-size: contain;
        background-repeat: no-repeat;
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/up_arrow2x.png);
    }

    span.sound_on,  span.sound_off {
        width: 14px;
        height: 14px;
        margin-top: -1px;
        display: inline-block;
        vertical-align: middle;
        background-size: contain;
        background-repeat: no-repeat;
        filter: invert(var(--invertSoundOffIcon)) grayscale(var(--greyScaleImg)) contrast(var(--contrastImg));
    }

    span.sound_on {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/sound_on@2x.png);
    }

    span.sound_off {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/sound_off@2x.png?t_8a0ee);
    }

    span.theme_normal, span.theme_sepia, span.theme_night, span.theme_dark {
        width: 25px;
        height: 25px;
        display: inline-block;
        vertical-align: middle;
        background-size: contain;
        background-repeat: no-repeat;
        margin-top: 5px;
    }

    #normal_moblie{
        background-color: #ffffff;
        padding: 2px;
        border: solid 1px #e6e6e6;
    }

    #sepia_moblie{
        background-color: #f4eddf;
        padding: 2px;
        border: solid 1px #e6e6e6;
    }

    #night_moblie{
        background-color: #424242;
        padding: 2px;
        border: solid 1px #e6e6e6;
    }

    #dark_moblie{
        background-color: #000000;
        padding: 2px;
        border: solid 1px #e6e6e6;
    }

    ul > li span.theme_normal, .themeBtn span.theme_normal {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_normal@2x.png?t_8a0ee);
    }

    ul > li span.theme_sepia, .themeBtn span.theme_sepia {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_sepia@2x.png?t_8a0ee);
    }

    ul > li span.theme_night, .themeBtn span.theme_night {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_night@2x.png?t_8a0ee);
    }

    ul > li span.theme_dark, .themeBtn span.theme_dark {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_dark@2x.png?t_8a0ee);
    }

    #chosen_theme span.theme_normal, ul > li .active span.theme_normal, .themeBtn.active span.theme_normal {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_normal@2x.png?t_8a0ee);
    }

    #chosen_theme span.theme_sepia, ul > li .active span.theme_sepia, .themeBtn.active span.theme_sepia {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_sepia@2x.png?t_8a0ee);
    }

    #chosen_theme span.theme_night, ul > li .active span.theme_night, .themeBtn.active span.theme_night {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_night@2x.png?t_8a0ee);
    }

    #chosen_theme span.theme_dark, ul > li .active span.theme_dark, .themeBtn.active span.theme_dark {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_dark@2x.png?t_8a0ee);
    }

    .read-mode-night span.arrow_down, .read-mode-dark span.arrow_down {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/down_arrow_white@2x.png);
    }


    .read-mode-night span.sound_on, .read-mode-dark span.sound_on {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/sound_on_white@2x.png);
    }

    .read-mode-night span.sound_off, .read-mode-dark span.sound_off {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/chat_story/sound_off_white@2x.png);
    }

    .read-mode-night #chosen_theme span.theme_normal, .read-mode-dark #chosen_theme span.theme_normal,
    .read-mode-night ul > li .active span.theme_normal, .read-mode-night .themeBtn.active span.theme_normal,
    .read-mode-dark ul > li .active span.theme_normal, .read-mode-dark .themeBtn.active span.theme_normal {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_normal_white@2x.png);
    }

    .read-mode-night #chosen_theme span.theme_sepia, .read-mode-dark #chosen_theme span.theme_sepia,
    .read-mode-night ul > li .active span.theme_sepia, .read-mode-night .themeBtn.active span.theme_sepia,
    .read-mode-dark ul > li .active span.theme_sepia, .read-mode-dark .themeBtn.active span.theme_sepia {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_sepia_white@2x.png);
    }

    .read-mode-night #chosen_theme span.theme_night, .read-mode-dark #chosen_theme span.theme_night,
    .read-mode-night ul > li .active span.theme_night, .read-mode-night .themeBtn.active span.theme_night,
    .read-mode-dark ul > li .active span.theme_night, .read-mode-dark .themeBtn.active span.theme_night {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_night_white@2x.png);
    }

    .read-mode-night #chosen_theme span.theme_dark, .read-mode-dark #chosen_theme span.theme_dark,
    .read-mode-night ul > li .active span.theme_dark, .read-mode-night .themeBtn.active span.theme_dark,
    .read-mode-dark ul > li .active span.theme_dark, .read-mode-dark .themeBtn.active span.theme_dark {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_dark_white@2x.png);
    }

    .settingSection {
        text-align: center;
    }

    .settingSection > div, .settingSection ul {
        background-color: #ffffff !important;
    }

    .settingSection > div > button, .read-mode-night .settingSection > div > button, .read-mode-dark .settingSection > div > button,
    .settingSection > div > button *, .read-mode-night .settingSection > div > button *, .read-mode-dark .settingSection > div > button * {
        border: unset !important;
        background-color: unset !important;
    }

    .settingSection > div {
        border: solid 1px #bdbdbd !important;
    }

    .read-mode-night .settingSection > div, .read-mode-dark .settingSection > div,
    .read-mode-night .settingSection ul, .read-mode-dark .settingSection ul {
        background-color: #36373b !important;
    }

    .read-mode-night .settingSection > div, .read-mode-dark .settingSection > div {
        border: solid 1px #18191c !important;
    }

    .setting_topic {
        font-weight: 300;
        line-height: 1.5;
        float: left;
        color: #909090 !important;
    }

    .current_setting {
        line-height: 1;
        color: #2c2b32 !important;
    }

    .themeBtn {
        float: left;
        color: #909090 !important;
        cursor: pointer;
    }

    .themeBtn.active {
        color: #2c2b32 !important;
    }

    .read-mode-night .setting_topic, .read-mode-dark .setting_topic,
    .read-mode-night .themeBtn,.read-mode-dark .themeBtn {
        color: #707070 !important;
    }

    .read-mode-night .current_setting, .read-mode-dark .current_setting,
    .read-mode-night .themeBtn.active,.read-mode-dark .themeBtn.active {
        color: #ffffff !important;
    }

    #setting_section_mobile .settingSection .dropdown  {
        width: 50% !important;
    }

    .settingSection ul > li *, .themeBtn {
        color: #909090 !important;
    }

    .settingSection ul > li *.active, .themeBtn.active {
        color: #2c2b32 !important;
    }

    .settingSection > div > button{
        height: 50px;
    }

    .read-mode-night .setting_topic, .read-mode-dark .setting_topic,
    .read-mode-night .settingSection ul > li *, .read-mode-dark .settingSection ul > li *,
    .read-mode-night .themeBtn,.read-mode-dark .themeBtn {
        color: #707070 !important;
    }

    .read-mode-night .current_setting, .read-mode-dark .current_setting,
    .read-mode-night .current_setting *, .read-mode-dark .current_setting *,
    .read-mode-night .settingSection ul > li *.active,.read-mode-dark .settingSection ul > li *.active,
    .read-mode-night .themeBtn.active,.read-mode-dark .themeBtn.active {
        color: #ffffff !important;
    }

    .arrow_down {
        width: 10.7px;
        height: 5.4px;
    }

    .dropdown-menu {
        min-width: unset;
    }

    .themeBtn {
        vertical-align: middle;
        border-radius: 5px;
        border: unset;
        width: 60px;
        height: 40px;
        display: inline-block;
        text-align: center;
        margin-right: 10px;
    }

    .themeBtn:last-child {
        margin-right: 0;
    }

    .themeBtn.active, #normal_moblie.active, #sepia_moblie.active, #night_moblie.active, #dark_moblie.active {
        border: 3px solid #1fb49f;
        padding: 0;
    }

    .ch_line_height {
        padding-top: 7px;
        padding-bottom: 7px;
    }
    .ch_line_height.active {
        border-width: 3px!important;
        border-style: solid !important;
        padding-top: 5px;
        padding-bottom: 5px;
    }

    .read-mode-night .themeBtn.active, .read-mode-dark .themeBtn.active {
        border: 3px solid #ffffff;
    }

    @media screen and (min-width: 768px)
    {

        .setting_topic {
            font-size: 12px;
        }

        .current_setting {
            font-size: 16px;
        }

        .settingSection > div:nth-child(1) {
            border-top-left-radius: 5px;
            border-bottom-left-radius: 5px;
        }

        .settingSection > div:nth-child(5) {
            border-top-right-radius: 5px;
            border-bottom-right-radius: 5px;
        }

        .settingSection > div + div {
            border-left: 0 !important;
        }
    }

    @media screen and (max-width: 767px)
    {
        .setting_topic {
            font-size: 10px;
        }

        .current_setting {
            font-size: 14px;
        }

        .settingSection > div:nth-child(1) {
            border-top-left-radius: 5px;
        }

        .settingSection > div:nth-child(2) {
            border-top-right-radius: 5px;
        }

        .settingSection > div:nth-child(6) {
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }

        .settingSection > div:nth-child(2), .settingSection > div:nth-child(4) {
            border-left: 0 !important;
        }

        .settingSection > div:nth-child(3), .settingSection > div:nth-child(4) {
            border-top: 0 !important;
            border-bottom: 0 !important;
        }

        #setting_section .dropdown, .settingSection .dropdown  {
            width: 50% !important;
        }
    }
</style> <div id="setting_section_mobile" class="modal fade bs-example-modal-sm" role="dialog"> <div class="modal-dialog modal-sm" role="document" style="width:300px;"> <div class="modal-content"> <div class="content-container settingSection" style="max-width: 300px !important;"> <div class="dropdown pull-left" style="display: inline-block;"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" style="width: 100%; border-radius: 2px;"> <span class="setting_topic">ฟอนต์</span><br> <span id="chosen_font_mobile_size" class="current_setting"><span style="font-family: MEBCloudLoop !important;">MEB</span> <span class="arrow_down"></span></span> </button> <ul class="dropdown-menu width100Percent"> <li class="text-center"><a onclick="contentH.font('MEB');"><span id="MEB_mobile" class="menuFont" style="font-family: MEBCloudLoop !important;">MEB</span></a></li> <li class="text-center"><a onclick="contentH.font('Droid Sans');"><span id="Droid_mobile" class="menuFont" style="font-family: Droid Sans,Droid-Sans-Thai !important;">Droid Sans</span></a></li> <li class="text-center"><a onclick="contentH.font('Pridi');"><span id="Pridi_mobile" class="menuFont" style="font-family: Pridi !important;">Pridi</span></a></li> <li class="text-center"><a onclick="contentH.font('Taviraj');"><span id="Taviraj_mobile" class="menuFont" style="font-family: Taviraj !important;">Taviraj</span></a></li> <li class="text-center"><a onclick="contentH.font('Trirong');"><span id="Trirong_mobile" class="menuFont" style="font-family: Trirong !important;">Trirong</span></a></li> <li class="text-center"><a onclick="contentH.font('Garuda');"><span id="Garuda_mobile" class="menuFont" style="font-family: Garuda !important;">Garuda</span></a></li> <li class="text-center"><a onclick="contentH.font('Jindara');"><span id="Jindara_mobile" class="menuFont" style="font-family: Jindara !important;font-size: 20px;line-height: 1;">Jindara</span></a></li> <li class="text-center"><a onclick="contentH.font('System');"><span id="System_mobile" class="menuFont" style="font-family: Thonburi,Tahoma !important">System</span></a></li> </ul> </div> <div class="lineHeightLabel dropdown pull-left" style="display: inline-block;"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" style="width: 100%; border-radius: 2px;"> <span class="setting_topic">ระยะห่างระหว่างบรรทัด</span><br> <span id="chosen_lineheight_mobile_size" class="current_setting"><span class="btn_lineheight img_bs" style="margin-right: 10px;"></span><span class="arrow_down"></span></span> </button> <ul class="dropdown-menu width100Percent"> <li class="text-center"> <a style="padding: 7px 15px" onclick="contentH.line('small')"><div class="select_lineheight_s img_bs"></div></a> </li> <li class="text-center"> <a style="padding: 7px 15px" onclick="contentH.line('medium')"><div class="select_lineheight_m img_wm"></div></a> </li> <li class="text-center"> <a style="padding: 7px 15px" onclick="contentH.line('large')"><div class="select_lineheight_l img_wl"></div></a> </li> </ul> </div> <div class="width50Percent pull-left" style="padding: 15px;" onclick="contentH.size(-2)"> <i class="fa fa-search-minus" aria-hidden="true"></i> </div> <div class="width50Percent pull-left" style="padding: 15px;" onclick="contentH.size(2)"> <i class="fa fa-search-plus" aria-hidden="true"></i> </div> <div class="txtSize14 fontWeight300 center-block" style="height: 50px;padding: 5px;clear: both;width:fit-content;"> <div id="normal_moblie" title="ปกติ" class="themeBtn themeMenu" onclick="selectTheme('normal'); applyReadMode('normal');"><span class="themePic theme_normal"></span> </div> <div id="sepia_moblie" title="ซีเปีย" class="themeBtn themeMenu" onclick="selectTheme('sepia'); applyReadMode('sepia');"><span class="themePic theme_sepia"></span> </div> <div id="night_moblie" title="กลางคืน" class="themeBtn themeMenu" onclick="selectTheme('night'); applyReadMode('night');"><span class="themePic theme_night"></span></div> <div id="dark_moblie" title="มืด" class="themeBtn themeMenu" onclick="selectTheme('dark'); applyReadMode('dark');"><span class="themePic theme_dark"></span></div> </div> </div> </div> </div> </div> <script>

    var action = 'view';
    var article_species = 'NONFICTION';

    var chat_font = storage.getStorage('chat_font') == undefined ? 'System' : storage.getStorage('chat_font');
    var chat_size = storage.getStorage('chat_size') == undefined ? 'M' : storage.getStorage('chat_size');
    var chat_speed = storage.getStorage('chat_speed') == undefined ? '1x' : storage.getStorage('chat_speed');
    var chat_theme = CookiesJS.getCookie('read_mode') == undefined ? 'normal' : CookiesJS.getCookie('read_mode');

    var font =  storage.getStorage('font') == undefined ? '' : storage.getStorage('font');
    var height =  storage.getStorage('line-height') == undefined ? '' : storage.getStorage('line-height');

    // ready
    $(document).ready(function(){

        selectTheme(chat_theme);
        if(article_species === 'CHAT' && action !== 'view')
        {
            selectSpeed(chat_speed);
            selectFont(chat_font);
            selectSize(chat_size);

            if (storage.getStorage('chat_sound') === 'off') {
                hassound = false;
                $('#chosen_sound').html('<span class="sound_off"></span> (ปิด)');
                $('#chosen_sound_mobile_size').html('<span class="sound_off"></span> (ปิด)');
            }

        }
        else
        {
            contentH.font(font);
            contentH.line(height);
            selectLineHight(height);
        }

    });


    function selectFont(font)
    {
        var chat_font = storage.getStorage('chat_font');
        var html = '';
        switch (font) {
            case 'MEB':
                html += '<span style="font-family: MEBCloudLoop !important;">';
                break;
            case 'Droid':
                html += '<span style="font-family: \'Droid Sans\',Droid-Sans-Thai !important;">';
                break;
            case 'Pridi':
                html += '<span style="font-family: Pridi !important;font-weight: 300;">';
                break;
            case 'Taviraj':
                html += '<span style="font-family: Taviraj !important;">';
                break;
            case 'Trirong':
                html += '<span style="font-family: Trirong !important;">';
                break;
            case 'Garuda':
                html += '<span style="font-family: Garuda !important;">';
                break;
            case 'Jindara':
                html += '<span style="font-family: Jindara !important;font-size: 22px;line-height: 1;">';
                break;
            case 'Tahoma':
                html += '<span style="font-family: Tahoma !important;">';
                break;
            default:
                font = 'System';
                html += '<span style="font-family: \'Droid Sans\',Droid-Sans-Thai !important;">';
                break;
        }
        html += font+'</span>';

        $('#chosen_font').html(html +' <span class="arrow_down"></span>');
        $('#chosen_font_mobile_size').html(html +' <span class="arrow_down"></span>');
        $('.menuFont').removeClass('active');
        $('#'+ font).addClass('active');
        $('#'+ font + '_mobile').addClass('active');

        if(content_version === '2'){
            $('#chatStoryArea, #chapterContents').removeClass('txtFontContent'+ chat_font).addClass('txtFontContent'+ font);

        }
        else{
            $('#chatStoryArea, #chapterContents').removeClass('txtFont'+ chat_font).addClass('txtFont'+ font);
        }

        storage.setStorage('chat_font', font);
    }

    function selectSize(size)
    {
        switch (size) {
            case 'XS': text = "S-Small"; font_size = 14; break;
            case 'S': text = "Small"; font_size = 16; break;
            case 'M': text = "Medium"; font_size = 18; break;
            case 'L': text = "Large"; font_size = 20; break;
            case 'XL': text = "X-Large"; font_size = 22; break;
            case 'XXL': text = "2X-Large"; font_size = 24; break;
            case '3XL': text = "3X-Large"; font_size = 26; break;
            case '4XL': text = "4X-Large"; font_size = 28; break;
            default: text = "Medium"; font_size = 18;
        }
        var chat_size = storage.getStorage('chat_size');
        switch (chat_size) {
            case 'XS': old_font_size = 14; break;
            case 'S': old_font_size = 16; break;
            case 'M': old_font_size = 18; break;
            case 'L': old_font_size = 20; break;
            case 'XL': old_font_size = 22; break;
            case 'XXL': old_font_size = 24; break;
            case '3XL': old_font_size = 26; break;
            case '4XL': old_font_size = 28; break;
            default: old_font_size = 18;
        }

        if(content_type == '2'){
            $('#chosen_size').html(text +' <span class="arrow_down"></span>');
            $('#chosen_size_mobile_size').html(text +' <span class="arrow_down"></span>');
            $('.'+ chat_size).removeClass('active');
            $('.'+ size).addClass('active');

            $('#chatStoryArea, #chapterContents')
                .removeClass('txtChatSize'+ old_font_size)
                .addClass('txtChatSize'+ font_size);
            storage.setStorage('chat_size', size);
        }
    }

    function selectSpeed(speed)
    {
        var chat_speed = storage.getStorage('chat_speed');
        var text_chat_speed = "1x";

        if(!jMeb.empty(chat_speed))
        {
            text_chat_speed = chat_speed.replace(".", "_");
        }

        var text_speed = speed.replace(".", "_");

        $('#chosen_speed').html(speed);
        $('#chosen_speed_mobile_size').html(speed);
        $('.'+ text_chat_speed).removeClass('active');
        $('.'+ text_speed).addClass('active');

        storage.setStorage('chat_speed', speed);

        if($('#chatStoryPause').css('display') != 'none')
        {
            $("#chatStoryPause").click();
            $("#chatStoryPlay").click();
        }
    }

    function selectSound()
    {
        var chat_sound = storage.getStorage('chat_sound');

        if (chat_sound == 'on' || chat_sound == undefined) {
            $('#chosen_sound').html('<span class="sound_off"></span> (ปิด)');
            $('#chosen_sound_mobile_size').html('<span class="sound_off"></span> (ปิด)');
            storage.setStorage('chat_sound', 'off');
            hassound = true;
        }
        else if (chat_sound == 'off') {
            $('#chosen_sound').html('<span class="sound_on"></span> (เปิด)');
            $('#chosen_sound_mobile_size').html('<span class="sound_on"></span> (เปิด)');
            storage.setStorage('chat_sound', 'on');
            hassound = false;
        }
    }

    function selectTheme(theme)
    {
        switch (theme) {
            case 'normal': text = "ปกติ"; break;
            case 'sepia': text = "ซีเปีย"; break;
            case 'night': text = "กลางคืน"; break;
            case 'dark': text = "มืด"; break;
            default: text = "ปกติ";
        }
        var chat_theme = CookiesJS.getCookie('read_mode');

        $('#chosen_theme').html('<span class="theme_'+theme+'"></span> ' + text + ' <span class="arrow_down"></span>');
        $('#chosen_theme_mobile_size').html('<span class="theme_'+theme+'"></span> ' + text + ' <span class="arrow_down"></span>');
        $('#'+ chat_theme).removeClass('active');
        $('#'+ theme).addClass('active');

        $('#'+ chat_theme +'_moblie').removeClass('active');
        $('#'+ theme +'_moblie').addClass('active');

        if(jMeb.empty(CookiesJS.getCookie('read_mode_clear'))){
            CookiesJS.deleteCookie('read_mode');
            CookiesJS.setArticleCookie('read_mode_clear', 1);
        }
        CookiesJS.setArticleCookie('read_mode', theme);
    }

    function selectLineHight(line_height_size){
        switch (line_height_size) {
            case 'small': ele_id = "select_lineheight_s"; break;
            case 'medium': ele_id = "select_lineheight_m"; break;
            case 'large': ele_id = "select_lineheight_l"; break;
            default: ele_id = "select_lineheight_m";
        }
        $('.ch_line_height').removeClass('active');
        $('.' + ele_id).parent().addClass('active');
    }

</script> <div class="black-screen" style="display:none;"></div> <div id="contentArticle" class="clearfix marginBottom20 smMarginTopNone borderRound bgWhite content-container smFullScreen smBorderLeftRightNone"> <div id="id_article_intro" class="paddingTopBottom10 width100Percent setFontNotoSans articleContentsDiv" style="display: none;background-color: var(--cardBgColor) !important;"> <span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">แนะนำเรื่อง</span> </div> <div id="id_article_content_intro" class="articleContentsDiv" style="background-color: var(--chapterContentBgColor);"> <div id="id_article_contents_div" class="paddingBottom20 smPaddingTopBottom20" style="display: none"> <div class="hidden-xs showInlineBlock width100Percent"> <div class="pull-right"> <style>

    .img_bs, .img_ws {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/BS.png?t_8a0ee);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        width: 39px;
        height: 11px;
        display: inline-block;
        vertical-align: middle;
    }

    .img_bm, .img_wm {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/WM.png?t_8a0ee);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        width: 39px;
        height: 17px;
        display: inline-block;
        vertical-align: middle;
    }

    .img_bl, .img_wl {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/WL.png?t_8a0ee);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        width: 39px;
        height: 23px;
        display: inline-block;
        vertical-align: middle;
    }

    .read-mode-night .img_bs, .read-mode-dark .img_bs {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/BS.png?t_8a0ee);
    }

    .read-mode-night .img_bm, .read-mode-dark .img_bm {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/WM.png?t_8a0ee);
    }

    .read-mode-night .img_bl, .read-mode-dark .img_bl {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/WL.png?t_8a0ee);
    }

    .read-mode-night .img_ws, .read-mode-dark .img_ws {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/BS.png?t_8a0ee);
    }

    .read-mode-night .img_wm, .read-mode-dark .img_wm {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/WM.png?t_8a0ee);
    }

    .read-mode-night .img_wl, .read-mode-dark .img_wl {
        background-image: url(https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/WL.png?t_8a0ee);
    }

</style> <div id="read_option_menu" name="read_option_menu" class="showInlineBlock width100Percent notShowOnDesktop" style="text-align: center;"> <div class="paddingTopBottom10"> <div class="fontFamilyLabel dropdown" style="display: inline-block;"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> <span class="caret"></span> </button> <ul class="dropdown-menu"> </ul> </div> <button type="button" class="btn btn-default" aria-label="Left Align" onclick="contentH.size(-2)"> <i class="fa fa-search-minus" aria-hidden="true"></i> </button> <button type="button" class="btn btn-default" aria-label="Left Align" onclick="contentH.size(2)"> <i class="fa fa-search-plus" aria-hidden="true"></i> </button> <div class="lineHeightLabel dropdown marginRight10 smMarginRightNone" style="display: inline-block;"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> <div class="btn_lineheight img_bs"></div> <span class="caret" style="margin-left: 5px; "></span> </button> <ul class="dropdown-menu" style="right: 0; left: unset; margin-top: 5px;"> <li style="display: flex;"> <a style="padding: 7px 15px" onclick="contentH.line('small')"> <div class="select_lineheight_s img_bs"></div> </a> <a style="padding: 7px 15px" onclick="contentH.line('medium')"> <div class="select_lineheight_m img_wm"></div> </a> <a style="padding: 7px 15px" onclick="contentH.line('large')"> <div class="select_lineheight_l img_wl"></div> </a> </li> </ul> </div> <div class="themeReadLabel dropdown marginRight10 smMarginRightNone visible-xs-inline-block"> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"> <img src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/theme_normal.png?t_8a0ee" style="height: 20px;"/> <span class="caret" style="margin-left: 5px; "></span> </button> </div> </div> </div> <script>
    contentH.font(storage.getStorage('font'));
    contentH.line(storage.getStorage('line-height'));

    function rerenderDropdownLineHeight(height){
        const lineheight_btn = $('.btn_lineheight');
        const selector_small = $('.select_lineheight_s');
        const selector_medium = $('.select_lineheight_m');
        const selector_large = $('.select_lineheight_l');
        switch (height) {
            case 'small':
                lineheight_btn.attr('class','btn_lineheight img_bs');
                selector_small.attr('class','select_lineheight_s img_bs');
                selector_medium.attr('class','select_lineheight_m img_wm');
                selector_large.attr('class','select_lineheight_l img_wl');
                break;
            case  'medium':
                lineheight_btn.attr('class','btn_lineheight img_bm');
                selector_small.attr('class','select_lineheight_s img_ws');
                selector_medium.attr('class','select_lineheight_m img_bm');
                selector_large.attr('class','select_lineheight_l img_wl');
                break;
            case 'large' :
                lineheight_btn.attr('class','btn_lineheight img_bl');
                selector_small.attr('class','select_lineheight_s img_ws');
                selector_medium.attr('class','select_lineheight_m img_wm');
                selector_large.attr('class','select_lineheight_l img_bl');
                break;
        }
    }

    function rerenderDropdownFontFamily(font, os='Windows') {
        var html = '';
        var html_popup_show = '';
        html += '<button class="btn btn-default dropdown-toggle width100Percent txtSize16" type="button" data-toggle="dropdown">';
        const font_list = [
            {display_name: 'MEB', font_name: 'MEBCloudLoop', show_os: []},
            {display_name: 'Droid Sans', font_name: "\'Droid Sans\',Droid-Sans-Thai", show_os: []},
            {display_name: 'Pridi', font_name: 'Pridi', show_os: []},
            {display_name: 'Taviraj', font_name: 'Taviraj', show_os: []},
            {display_name: 'Trirong', font_name: 'Trirong', show_os: []},
            {display_name: 'Garuda', font_name: 'Garuda', show_os: []},
            {display_name: 'Jindara', font_name: 'Jindara', show_os: []},
            {display_name: 'Tahoma', font_name: 'TahomaThai, Tahoma', show_os: ['Windows']},
            {display_name: 'System', font_name: 'System', show_os: []}
        ];

        function fontListElem({font_name,display_name,font_name_custom = null}){
            var style_font = '';
            if(font_name == 'Jindara')
            {
                style_font = 'font-size: 20px;line-height: 1;';
            }
            return '<li class="text-center"><a onclick="contentH.font(\'' + display_name + '\')">' +
                        '<span style="font-family: '+(font_name_custom == null ? font_name:font_name_custom)+' !important;'+style_font+'">ฟอนต์ '+display_name+'</span>' +
                    '</a></li>'
        }

        const valid_font = font_list.find(function (elem) {
            return elem.display_name === font;
        });

        if(valid_font != null){
            if (font !== 'System') {

                var style_font = '';
                if(valid_font.font_name == 'Jindara')
                {
                    style_font = 'font-size: 20px;line-height: 1;';
                }

                html += '<span style="font-family:' + valid_font.font_name + ';'+style_font+'" >ฟอนต์ ' + valid_font.display_name + '</span>';
                html_popup_show += '<span style="font-family: '+ valid_font.font_name +' !important;'+style_font+'">' + valid_font.display_name +'</span>';
            }
            else {
                let font_name = '';
                if (os === 'Windows') {
                    font_name = 'TahomaThai, Tahoma';
                }
                else if (os === 'Android') {
                    font_name = '\'Droid Sans\',Droid-Sans-Thai';
                }
                html += '<span style="font-family:' + font_name + ';">ฟอนต์ System</span>';
                html_popup_show = '<span style="font-family:' + font_name + ' !important;">System</span>';
            }
        }

        html += '<span class="glyphicon glyphicon-menu-down txtSize10" style="margin-left: 10px;"></span>';
        html += '</button>';
        html += '<ul class="dropdown-menu width100Percent">';
        font_list.forEach(function(elem){
           if (font !== elem.display_name){
               if (elem.font_name === 'System'){
                   if (os === 'Windows') {
                       html += fontListElem({
                           font_name: 'System',
                           display_name: 'System',
                           font_name_custom: 'TahomaThai, Tahoma'
                       });
                   }
                   else if (os === 'Android') {
                       html += fontListElem({
                           font_name: 'System',
                           display_name: 'System',
                           font_name_custom: '\'Droid Sans\',Droid-Sans-Thai'
                       });
                   }
               }
               else{
                   // console.log(elem);
                   if (elem.show_os.length === 0){
                       html += fontListElem(elem);
                   }
                   else{
                       if(elem.show_os.indexOf(os) > -1){
                           html += fontListElem(elem);
                       }
                   }
               }
           }
        });
        html += '</ul>';
        $('.fontFamilyLabel').html(html);

        $('#chosen_font_mobile_size').html(html_popup_show +' <span class="arrow_down"></span>');
        $('.menuFont').removeClass('active');
        if(font == 'Droid Sans')
        {
            font = 'Droid';
        }
        $('#'+ font).addClass('active');
        $('#'+ font +'_mobile').addClass('active');

    }
</script> </div> </div> <div id="articleContents" class="loadedContent articleContent paddingTopBottom10 smPaddingTopBottom20 widthContent" style="line-height: 1.7;margin-left: auto; margin-right: auto; max-width: 100%;"></div> <script id="articleContentScript" async>

            </script> </div> </div> <script>
        if (article_thumbnail_path.length > 0  && (article_status === '2' || preview === '1' && user_id_publisher === CookiesJS.getCookie('user_id'))){
            if(article_type === 'MULTI_CHAPTER'){
                $('#id_article_intro').show()
            }
            $('#id_article_contents_div').show();
        }
        else if (article_status === '3') {
            $('#id_article_content_intro').html('<div class="text-center paddingAll30"><strong>บทความเรื่องนี้ถูกปิดเนื้อหา</strong></div>');
            $('#id_article_contents_div').remove();
        }
        else{
            $('#id_article_content_intro').html('<div class="text-center paddingAll30"><strong>ไม่พบเนื้อหาบทความเรื่องนี้</strong></div>');
            $('#id_article_contents_div').remove();
        }
    </script> <div id="socialPlugin" class="smMarginTopNone bgWhite content-container smBorderLeftRightNone" style="display: table;"> <hr id="fb_hr" style="display: none;"> <div id="show_fb_page" class="paddingLeft widthContent" style="margin: 20px auto; " align="center"></div> <style>#show_twitter_timeline iframe {border: solid 1px #00000033 !important;}</style> <div id="show_twitter_timeline"></div> <script>
    (function (){
        if (!jMeb.empty(twitter_address)){
            $('#show_twitter_timeline').addClass('paddingLeft widthContent').css({'margin':'20px auto'}).attr('align','center').html(
                `<a class="twitter-timeline" data-width="500" data-height="340" href="${twitter_address}?ref_src=twsrc%5Etfw">Tweets by readAwrite</a>`
            );
        }
    })()
</script> </div> </div> <style>
  .txtArticleAuthorInfo {
    font-size: 16px;
    line-height: 1.33;
    color: var(--textOnCardDarkColor);
    max-width: calc(100% - 190px);
    width: fit-content;
    padding-top: 5px;
    margin-left: 30px;
    margin-right: 10px;
  }

  .txtArticlePublish {
    font-size: 16px;
    line-height: 1.33;
    color: var(--textOnCardDarkColor);
    height: 32px;
    padding-top: 5px;
    margin-left: 30px;
  }

  .btnFollow {
    border-radius: 18px;
    border: solid 1px var(--textOnCardDarkColor);
    padding: 4px 18px 7px;
    font-size: 16px;
    line-height: 1.38;
    text-align: center;
    color: var(--textOnCardDarkColor);
    background-color: transparent;
    height: 32px;
  }

  .nameInfo {
    width: 100%;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  @media(max-width: 767px) {
    .txtArticlePublish {
      font-size: 15px;
      margin-left: 15px;
      padding-top: 0px;
      height: 25px;
    }

    .txtArticleAuthorInfo {
      font-size: 15px;
      max-width: calc(100% - 125px);
      margin-left: 15px;
    }

    .btnFollow {
      font-size: 12px;
      line-height: 1.42;
      border-radius: 13px;
      padding: 3px 13px;
      height: 24px;
    }

    .smWidth100 {
      width: 100px;
    }

    .smPaddingRight20 {
      padding-right: 20px;
    }
  }
</style> <div id="boxPublisherInfo" class="marginBottom20 bgWhite content-container smFullScreen smBorderLeftRightNone clearfix"> <div class="showInlineBlock width50Percent pull-left smWidth100Percent"> <div class="paddingTopBottom10 width100Percent setFontNotoSans"> <span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">ข้อมูลนักเขียน</span> </div> <div class="width100Percent paddingTop10 paddingBottom30 smPaddingBottom10"> <div class="width100Percent clearfix"> <div class="txtArticleAuthorInfo showInlineBlock pull-left" style=""> <div class="nameInfo">
            นามปากกา : <span id="article_author_name"></span> </div> </div> <div class="showInlineBlock pull-right width150 smWidth100 text-right paddingRight40 smPaddingRight20"> <button type="button" id="btn_follow_author" class="btn btnFollow follow_btn" data-check="" style=""> <span class="follow_text">ติดตาม</span> </button> </div> </div> <div class="width100Percent marginTop10 clearfix"> <div class="txtArticleAuthorInfo showInlineBlock pull-left" style=""> <div class="nameInfo">
            นักเขียน : <span id="publisher_display_name"></span> </div> </div> <div class="showInlineBlock pull-right width150 smWidth100 text-right paddingRight40 smPaddingRight20"> <button type="button" class="btn btnFollow follow_publisher_btn" style=""> <span class="follow_text">ติดตาม</span> </button> </div> </div> </div> </div> <div class="showInlineBlock width50Percent pull-left smWidth100Percent" style="border-left: solid 1px var(--lineColor);"> <div class="paddingTopBottom10 width100Percent setFontNotoSans"> <span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">เผยแพร่</span> </div> <div class="width100Percent paddingTop10 paddingBottom30 smPaddingBottom10"> <div class="txtArticlePublish" style="">
        วันที่เผยแพร่ : <span id="article_first_publish"></span> </div> <div class="txtArticlePublish marginTop10" style="">
        แก้ไขล่าสุด : <span id="article_update"></span> </div> </div> </div> </div> <script type="text/javascript">
  (function() {
    var publisher_name = 'spuspita'.replace(/'/g,'&apos;');
    var article_edit = '26 ก.พ. 2565';
    var first_publish_date = '26 ก.พ. 2565';
    $('#article_author_name').html(author_name)
      .attr('onclick', 'window.open("' + WEB_URL_HTTPS + '?action=user_page&user_id_publisher=' + user_id_publisher +
        '", "_blank")')
      .addClass('cursorPointer');
    $('#publisher_display_name').html(publisher_name)
      .attr('onclick', 'window.open("' + WEB_URL_HTTPS + '?action=user_page&user_id_publisher=' + user_id_publisher +
        '", "_blank")')
      .addClass('cursorPointer');
    $('#article_first_publish').html(first_publish_date)
    $('#article_update').html(article_edit);
    $('#btn_follow_author').attr('data-check', author_guid);
  })();
</script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/comment_helper.js?t_8a0ee"></script> <style type="text/css">
    .mebBookImage {
        display: block;
        max-height: 145px;
        max-width: 110px;
        width: auto;
        height: auto;
        margin: 0 auto;
    }

    .mebBookBorder {
        height: 100px;
        width: 70px;        
    }

    .mebBookImageOutside{
        width: 110px;
        height: 145px;
        padding: 0px 0px 30px;
    }

    @media screen and (max-width: 767px) {
        .mebBookImageOutside{
            width: 78px;
            height: 103px;
        }
        .mebBookImage {
            max-width: 78px;
            max-height: 103px;
        }
    }
</style> <div id="divSeller" class="marginBottom20 bgWhite content-container smFullScreen smBorderLeftRightNone clearfix" style="display: none;"> </div> <script>
        function mebBook({render_half}){
        return(
            '<div class="showInlineBlock ' + (render_half ? 'width50Percent pull-left smWidth100Percent' : 'width100Percent') + '">' +
                '<div class="paddingTopBottom10 width100Percent setFontNotoSans">' +
                    '<span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">ซื้อ e-book ได้ที่นี่</span>' +
                '</div>' +
                '<div class="width100Percent paddingTop10 paddingBottom30 smPaddingBottom10">' +
                    '<div class="paddingLeft30 smPaddingLeft15" style="max-width: 550px; min-width: 250px; margin: 0 auto;">' +
                        // image
                        '<div class="mebBookImageOutside marginRight20 borderNone showInlineBlock" style="">' +
                            '<img id="meb_book_thumbnail" class="mebBookImage imageIcon" onerror="articleH.thumbnailError(this)" style="border-radius:5px;" onload="articleH.stretchImage(this)">' +
                        '</div>' +
                        // article name
                        '<div style="display: inline-block; vertical-align: top; width: calc(100% - 150px);">' +
                            '<p class="height1Line txtBold txtSize16sm14 marginBottom5 txtTitleRelatedBook" style="">' +
                                '<a id="meb_book_name" href="'+meb_book_seller_link+'" style="color:#303030;">'+decodeString(article_name)+'</a>' +
                            '</p>' +
                            // synopsis
                            '<div class="txtSize16sm12" style="height: 4.2em; overflow: hidden; word-wrap: break-word;color: #909090; margin-bottom: 5px;">' +
                                '<p id="meb_book_description"></p>' +
                            '</div>' +
                            '<a href="'+meb_book_seller_link+'" target="_blank">' +
                                '<button class="btnSellerLinkMEBBook btn btnRound20Pt txtWhite width100 txtSize16sm14 smWidthNone" style="padding: 3px 20px; margin-top: 10px;background-color:#1fb469;">ซื้อเลย</button>' +
                            '</a>' +
                        '</div>' +
                    '</div>' +
                '</div>' +
            '</div>'
        )
    }
    function paperVersion({render_half,is_preorder,image_src}){
        return(
            '<div class="showInlineBlock '+(render_half?'width50Percent smmarginBottom20 smWidth100Percent smBorderNone" style="border-left: solid 1px #d3d3d3;"':'width100Percent"')+' >' +
                '<div class="paddingTopBottom10 width100Percent setFontNotoSans">' +
                    '<span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">' +
                        (is_preorder ? 'Pre-Order':'สนใจเวอร์ชั่นกระดาษ') +
                    '</span>' +
                '</div>' +
                '<div class="width100Percent paddingTop10 paddingBottom30 smPaddingBottom30">' +
                    '<div class="paddingLeft30 smPaddingLeft15" style="max-width: 550px; min-width: 250px; margin: 0 auto;">' +
                        '<div class="mebBookImageOutside marginRight20 showInlineBlock" style="border: none;">' +
                            '<img src="'+image_src+'" class="mebBookImage imageIcon" onerror="'+(is_preorder ? 'articleH.thumbnailError(this)':'articleH.thumbnailBookError(this)')+'" style="border-radius:5px;" onload="articleH.stretchImage(this)">' +
                        '</div>' +
                        '<div style="display: inline-block; vertical-align: top; width: calc(100% - 150px);">' +
                            '<p class="height1Line txtBold txtSize16sm14 marginBottom5 txtTitleRelatedBook" style="color:#303030;">' +
                                (is_preorder ? 'Pre-Order ได้ที่นี่':'สั่งซื้อผ่านเว็บไซต์นักเขียน') +
                            '</p>' +
                            '<div class="txtSize16sm12 txtBodyRelatedBook" style="height: 4.2em; overflow: hidden; word-wrap: break-word;color: #909090; margin-bottom: 5px;">' +
                                (is_preorder ?
                                    '<p>เรื่องนี้มีการเปิดรับ Pre-Order <span class="hidden-xs">สามารถกดที่ปุ่มด้านล่างเพื่อดูรายละเอียด </span>หากสงสัยเกี่ยวกับการสั่งซื้อ ติดต่อคนขายโดยตรงเลยจ้า</p>'
                                    :
                                    '<p>เรื่องนี้มีเวอร์ชันกระดาษวางขายผ่านเว็บไซต์ <span class="hidden-xs">สามารถกดที่ปุ่มด้านล่างเพื่อสั่งซื้อ </span>หากสงสัยเกี่ยวกับการสั่งซื้อ ติดต่อคนขายโดยตรงเลยจ้า</p>'
                                ) +
                            '</div>' +
                            '<a href="' + (is_preorder ?'/?action=view_preorder_detail&article_guid=' + pre_order_guid:published_article_url) + '" target="_blank">' +
                                '<button class="btnSellPaperVersion btn btnRound20Pt txtWhite ' + (is_preorder ? '':'width100') +' txtSize16sm14 smWidthNone" style="padding: 3px 20px; margin-top: 10px;background-color:#1fb49f;">' +
                                (is_preorder ? 'View Detail':'สั่งซื้อ') +'</button>' +
                            '</a>' +
                        '</div>' +
                    '</div>' +
                '</div>' +
            '</div>'
        );
    }

    // function testInitRelatedMebBook(){
    (function(){
        let meb_book_id_exist = meb_book_id.length > 0;
        let pre_order_list_exist = !jMeb.empty(pre_order_guid);
        let published_article_url_exist = published_article_url.length > 0;

        const render_half = (meb_book_id_exist && (pre_order_list_exist || published_article_url_exist));
        // console.log(meb_book_id_exist,pre_order_list_exist,published_article_url_exist);

        if (meb_book_id_exist || pre_order_list_exist || published_article_url_exist) {
            $('#divSeller').show();
            // col 1
            if (meb_book_id_exist) {
                $('#divSeller').append(mebBook({render_half: render_half}));
            }
            // col 2
            if (pre_order_list_exist) {
                $('#divSeller').append(paperVersion({
                    render_half: render_half,
                    is_preorder: true,
                    image_src: pre_order_thumbnail_path + 'small.gif?' + ASSET_IMAGES_VERSION
                }));
            } else if (published_article_url_exist) {
                $('#divSeller').append(paperVersion({
                    render_half: render_half,
                    is_preorder: false,
                    image_src: published_article_thumbnail
                }));
            }
        }
    })();
</script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/social_plugin.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/donate.js?t_8a0ee"></script> <script type="text/javascript" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/sanitize-html.min.js?t_8a0ee"></script> <style>
    .button_purchase_chapter_all{
        border-radius: 15px;
        padding: 2px 10px 2px 2px;
        border-style: solid !important;
        border-width: 1px !important;
        color: var(--textOnButtonBuyColor) !important;
        height: auto;
        line-height: 1.19;
        font-size: 16px;
        margin-top:35px;
    }
    .button_purchase_chapter{
        border-radius: 15px;
        padding: 3px 2px 3px 2px;
        border-style: solid !important;
        border-width: 1px !important;
        color: var(--textOnButtonBuyColor) !important;
        height: auto;
        line-height: 1.19;
        font-size: 16px;
        width: 70px;
    }
    .author_publihser a {
        color: #FFF !important;
    }
    .page-listing-disable-button {
        font-size: 14px;
        font-weight: normal;
        color: #FFF;
        background: #393939;
        cursor: pointer;
        border: 1px solid #393939;
        padding: 4px 5px 0 5px;
        height: 30px;
        border-radius: 3px;
        float: right;
    }

    .page-listing-disable-button-mobile {
        font-size: 11px;
        font-weight: normal;
        color: #FFF;
        background: #393939;
        cursor: pointer;
        border: 1px solid #393939;
        padding: 3px 5px 0 5px;
        height: 30px;
        border-radius: 3px;
        float: right;
    }

    #sort_chapter button, #sort_chapter button:active {
        padding: 0;
        background-color: transparent;
    }

    #sort_chapter button .caret {
        right: 4px;
    }

    #sort_chapter .dropdown-menu > li > a {
        padding: 6px 15px;
        color: #1fb49f;
    }

    #sort_chapter > ul.dropdown-menu {
        position: absolute;
        min-width: 85px;
        float: left;
        background-color: #fff;
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: 1px solid rgba(204, 204, 204, .15);
        -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
        box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
        right: 0;
        left: auto;
    }

    .sortChapter > a {
        padding: 2px 5px;
        border-radius: 5px;
        background-color: transparent !important;
        color: #000;
    }

    .sortChapter > a:focus, .sortChapter > a:active {
        background-color: transparent !important;
        color: #000;
    }


    .blur_chapter {
        height: 60px;
        margin-top: -60px;
        background: linear-gradient(to top, #fff 60%, #fff0);
    }

    .read-mode-sepia .blur_chapter {
        height: 60px;
        margin-top: -60px;
        background: linear-gradient(to top, #f5efdc 60%, #fff0);
    }

    .read-mode-night .blur_chapter, .read-mode-dark .blur_chapter {
        height: 60px;
        margin-top: -60px;
        background: linear-gradient(to top, #000 60%, #fff0);
    }

    .arrow {
        width: 12.1px;
        height: 6.1px;
    }

    .desktopIcon {
        display: block;
    }

    .mobileIcon {
        display: none;
    }

    .cartoonSettingOptions:not(.active) img.darkIcon {
        display: none;
    }

    .cartoonSettingOptions.active img.lightIcon {
        display: none;
    }

    .cartoonSettingContainer {
        margin-top: 10px;
        padding: 7px;
    }

    .cartoonSettingOptions:not(.active) > a,
    .cartoonSettingOptions:not(.active) > a:focus {
        background-color: #f8f8f8;
    }

    .cartoonSettingOptions:not(.active) > a p {
        color: #acacac;
    }

    .cartoonSettingOptions:not(.active) img.darkIcon {
        display: none;
    }

    .cartoonSettingOptions.active img.lightIcon {
        display: none;
    }

    .cartoonSettingOptions img {
        width: 32px;
        margin: 0 auto;
    }

    .tabCartoonSettingStyle {
        /*border-radius: 5px;*/
        border: 1px solid #707070;
        width: 100%;
        text-align: center;
    }

    .activeTabCartoonSetting {
        background-color: #909090;
        color: #fff;
    }

    .subMenuPill > li.active > a {
        background-color: #acacac;
    }

    #popup_cartoon_setting_dialog {
        width: 500px;
    }

    .cartoonDisplayStyle {
        padding: 7px 15px;
    }

    .read-mode-dark .donate_banner {
        -webkit-filter: grayscale(100%);
        filter: grayscale(100%);
    }

    .blank_event {
        opacity: 0.5;
    }

    .blank_event:hover {
        opacity: 1;
    }

    .read-mode-night .collapseTable, .read-mode-dark .collapseTable, .read-mode-night .collapseTable thead td, .read-mode-dark .collapseTable thead td {
        background-color: black !important;
    }

    .read-mode-night .collapseTable tbody tr:hover, .read-mode-night .collapseTable thead td:hover {
        background-color: #303030 !important;
    }

    .read-mode-dark .collapseTable tbody tr:hover, .read-mode-dark .collapseTable thead td:hover {
        background-color: #303030 !important;
    }

    ::placeholder {
        color: #ccc;
    }

    .tdGroupChapter{
        padding-top: 26px !important;
        padding-bottom: 20px !important;
    }

    .unpublishChapter{
        background-color: #f4f4f4;
    }

    @media (max-width: 370px) {
        .xxs-hidden {
            display: none !important;
        }

        .td_select_item {
            border: 3px solid #e5e5e5 !important;
        }
    }

    @media (min-width: 768px) {
        #box_purchase_chapter_all {
            padding-left: 5px;
            padding-right: 5px;
        }

        .blur_chapter {
            height: 40px;
            margin-top: -40px;
            background: linear-gradient(to top, #fff 40%, #fff0);
        }

        .read-mode-sepia .blur_chapter {
            height: 40px;
            margin-top: -40px;
            background: linear-gradient(to top, #f5efdc 40%, #fff0);
        }

        .read-mode-night .blur_chapter, .read-mode-dark .blur_chapter {
            height: 40px;
            margin-top: -40px;
            background: linear-gradient(to top, #000 40%, #fff0);
        }

        #bookmarkIconSm {
            width: unset;
        }
        .running_number{
            width: 35px;
            margin-right: 15px;
        }
        .span_lock{ display: none !important; }
        .chapterTitleAndSubTitle{
            width: 100%;
        }
    }

    @media screen and (max-width: 767px) {        
        .button_purchase_chapter_all{
            line-height: 1.23;
            font-size: 13px;
            margin-top: 15px;
        }

        .desktopIcon {
            display: none;
        }

        .mobileIcon {
            display: block;
        }

        .cartoonSettingContainer {
            margin-top: 5px;
        }

        .cartoonSettingOptions > a {
            padding: 5px !important;
        }

        #popup_cartoon_setting_dialog {
            width: 390px;
        }

        .cartoonDisplayStyle {
            padding: 5px 2px;
        }

        .tdGroupChapter{
            padding-top: 15px !important;
            padding-bottom: 16px !important;
        }

        .group_get_chapter td{
            border-top-width: 0.5px !important;
            border-top-style: solid !important;
            border-top-color: #e6e6e6 !important;
        }

        .arrow{
            width: 8px;
            height: 4px;
            opacity: 0.65;
        }
        
        .running_number{
            width: 30%;
        }
        .span_lock{ 
            display: inline-block !important; 
            float: left;
            width: 16px;
            height: 16px;
        }
        .boxChapterTitle{
            max-width: calc(100% - 90px);
        }
        .chapterTitleAndSubTitle{
            width: calc(100% - 22px);
        }
        .chapterNoButtonBuy{
            width:100% !important;
            max-width: 100%;
        }
    }

    @media screen and (max-width: 360px) {
        .choose_img {
            width: 65px;
        }
    }

    .select_item_block {
        background-color: white;
        padding: 0 10px 0;
        border-radius: 5px;
        min-height: 85px;
        position: relative;
    }

    .select_item_block:hover {
        background-color: lightgrey;
    }

    .giftcode_block {
        background-color: white;
        padding: 4px 0;
        border-radius: 5px;
    }

    .giftcode_block:hover {
        background-color: lightgrey;
    }

    @media screen and (max-width: 520px) {
        .select_item_block {
            padding: 0 !important;
        }

        .swal2-modal {
            padding: 0 !important;
        }

        .swal2-modal.swalNewStyle {
            padding: 20px !important;
        }
    }

    @media (min-width: 505px) {
        .bottom-myshelf-btn {
            width: 200px;
        }
    }


</style> <div id="chapterListBox" class=""> </div> <div id="share_article_div"> </div> <fieldset style="margin-bottom:50px;display:none;"> <legend>canvas</legend> <div id="canvasBox" style=""> <img id="imgLoadingCanvas" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/bus_loading.gif?t_8a0ee" /> <canvas id="export_share_thumbnail" width="1200" height="630"></canvas> <span class="hide lnkUploadToServer cursorPointer txtGreenBlue showInlineBlock paddingTop20" onclick="uploadToServer('8fd93e98f08cf435517b028ee150ff03')">Upload to Server</span> | <span class="hide lnkDeleteFromServer cursorPointer txtGreenBlue showInlineBlock paddingTop20" onclick="deleteOldThumb('8fd93e98f08cf435517b028ee150ff03')">Delete from Server</span> </div> </fieldset> <fieldset style="visibility: hidden;position:fixed;top:0;"> <legend>html</legend> <div id="html_share_thumbnail" style=""> <div id="articleInfo" class="showInlineBlock" style=""> <div id="authorInfoDiv" class="width100Percent fontWeight500" style=""> <span id="txt1">โดย</span> <span id="authorName" class="marginLeft10"></span> </div> <div id="articleName" style=""></div> <div id="logoRAW" class="width100Percent" style="    "> <img id="full-logo" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/share-logo@3x.png?t_8a0ee" crossorigin="anonymous" style="" /> </div> </div> <div id="imgThumbnail" class="" style=""> <img id="thumbnailArticle" src="" onerror="articleH.coverSizeLargeError(this)" crossorigin="anonymous" style="" /> </div> </div> <iframe id="framedoCallViewPage" style="display:none;"></iframe> </fieldset> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/rasterizeHTML.allinone.js"></script> <script type="text/javascript">
  var flagDrawCanvas = false;
  $(function () {
    //updatePositionArticleName();
    //drawCanvas();
  });

  function updatePositionArticleName(){
    return new Promise(resolve=>{
      if(!flagDrawCanvas){
        var use_article_cover_path = article_cover_path.replace('/small.gif','/large.gif') + '_drawShareNew';
        if (unpromoted_cover_image === '1' || unpromoted_cover_image === '2'){          
            use_article_cover_path = unpromoted_cover_image_path + '_drawShareNew';
        } 
        $('#authorName').text(decodeString(author_name));
        $('#articleName').text(decodeString(article_name));
        //$('#thumbnailArticle').attr('src',use_article_cover_path);
        var infoH = 630; // 1x = 315
        var articlNameH = $('#articleName').height();
        var authorH = $('#authorInfoDiv').height() + 52; // 1x = 26
        var logoRawH = 84; // 1x = 42
        var halfRemainH = Math.floor((infoH - (articlNameH + authorH + logoRawH)) / 2);
        $('#articleName').css('margin-top',halfRemainH);
        var img = document.getElementById('thumbnailArticle');
        img.src = use_article_cover_path;
        img.onload = function(){
          resolve(true);
        };
        img.onerror = function(error){
          use_article_cover_path = article_cover_path.replace('/large.gif','/small.gif') + '_drawShareNew';
          img.src = use_article_cover_path;
          img.onload = function(){
            resolve(true);
          };
          img.onerror = function(error){
            resolve(false);
          };
        };
        
      }else{
        resolve(true);
      }
    });
  }

  /*function drawCanvas(callback){
    if(!flagDrawCanvas){
      var scale = 1;
      var headerHTML = '<style>';
          headerHTML += "@font-face {font-family: 'NotoSans';font-style: normal;src: url('"+ASSETS+"fonts/NotoSans-Regular.ttf') format('truetype');}";
          headerHTML += "</style>";
          headerHTML += "<style>";
          headerHTML += "body{margin: 0;";
          headerHTML += "transform:scale(" + scale + ");";
          headerHTML += "-moz-transform:scale("+scale+");";
          headerHTML += "-webkit-transform:scale(" + scale + ");";
          headerHTML += "transform-origin: 0% 0%;";
          headerHTML += "-moz-transform-origin:0% 0%;";
          headerHTML += "-webkit-transform-origin:0% 0%;}";
          headerHTML += "</style>";
      var original_clone = $('#html_share_thumbnail').clone();
      articleH.jBlockUI('กำลังดำเนินการ โปรดรอสักครู่...');
      setTimeout(function(){
        articleH.createImageCanvas(original_clone,headerHTML,1200,630,'export_share_thumbnail')
        .then(function (result) {
            if(result.success){
              $('#export_share_thumbnail').css('display','block');
              $('#imgLoadingCanvas').hide();
              $('.lnkUploadToServer').removeClass('hide');
              $('.lnkDeleteFromServer').removeClass('hide');

              if(!jMeb.empty(path_share_thumbnail_file)){
                var img = new Image()
                img.onload = function(){
                  callback();
                }
                img.onerror = function(error){
                  deleteOldThumb(article_guid, function(){
                    uploadToServer(article_guid, callback);
                  });
                }                
                img.crossOrigin = 'anonymous';
                img.src = path_share_thumbnail_file;
              }else{ // not create shared thumbnail
                uploadToServer(article_guid, callback);
              }
              flagDrawCanvas = true;
            }
            else {
              console.log("fail");
            }
        })
      },2000);
    }
  }*/

  function drawCanvas(callback){
    if(!flagDrawCanvas){
      var canvas = document.getElementById('export_share_thumbnail');
      var ctx = canvas.getContext('2d');
      var logo = document.getElementById('full-logo');
      var img = document.getElementById('thumbnailArticle');

      ctx.fillStyle = "#303030";
      ctx.fillRect(0,0,1200,630);
      ctx.fillStyle = "#525050";
      ctx.fillRect(0,546,1200,630);
      ctx.drawImage(logo, 35, 566, 299, 43);
      ctx.font = "28px 'NotoSans'";
      ctx.fillStyle = '#b9b9b9';
      ctx.fillText($('#txt1').text(), 58, 85);
      //ctx.fillText($('#authorName').text(), 116, 85);
      wrapText(ctx, $('#authorName').text() , 116, 85, 322, 42, 1);
      ctx.save()
      
      var y = Number($('#articleName').css('margin-top').replace('px','')) + $('#authorInfoDiv').height() + 85;
      ctx.font = "40px 'NotoSans'";
      ctx.fillStyle = '#ffffff';
      wrapText(ctx, $('#articleName').text() , 58, y, 246, 60, 5);

      ctx.save()
      ctx.beginPath()
      ctx.arc(908, 314, 521, 0.75*Math.PI, Math.PI * 1.35, false);
      ctx.lineTo(1200,0);
      ctx.lineTo(1200,630);
      ctx.lineTo(908,630);
      ctx.fill();
      ctx.clip()
      ctx.drawImage(img, 380, -220, 1068, 1068);

      $('#export_share_thumbnail').css('display','block');
      $('#imgLoadingCanvas').hide();
      $('.lnkUploadToServer').removeClass('hide');
      $('.lnkDeleteFromServer').removeClass('hide');
      if(!jMeb.empty(path_share_thumbnail_file)){
        var img = new Image()
        img.onload = function(){
          callback();
        }
        img.onerror = async function(error){
          deleteOldThumb(article_guid, function(){
            uploadToServer(article_guid, callback);
          });
        }                
        img.crossOrigin = 'anonymous';
        img.src = path_share_thumbnail_file;
      }else{ // not create shared thumbnail
        uploadToServer(article_guid, callback);
      }
      flagDrawCanvas = true;
    }
  }

  function wrapText(context, text, x, y, maxWidth, lineHeight, maxLine) {
    maxWidth = maxWidth;
    lineHeight = lineHeight || 60;
    x = x || 58;
    maxLine = maxLine || 1;

    var arr = ['เ','แ','ไ','ใ','โ',' ',]
    var words = text.split(' ');
    var line = '';
    var cnt_row = 1;
    var start_row = 1;
    for(var n = 0; n < text.length; n++) {
      if(start_row == 1 && text[n] == ''){
        line = '';
        start_row = 1;
        continue;
      }else{
        var testLine = line + text[n];
        var metrics = context.measureText(testLine);
        var testWidth = metrics.width; 
        if (testWidth >= maxWidth && n > 0 && cnt_row < maxLine) {
          cnt_row++;
          context.fillText(line, x, y);
          line = (text[n] != ' ') ? text[n] : '';
          y += lineHeight;
          start_row = 1;
        }
        else if(testWidth >= maxWidth && n > 0 && cnt_row == maxLine) {
          line += !jMeb.empty(text[n+1]) ? '...' : '';
          start_row = 0;
          break;
        }
        else {
          line = testLine;
          start_row = 0;
        }
      }
    }
    context.fillText(line, x, y);
  }

  function uploadToServer(article_guid, callback){
    var canvas = document.getElementById('export_share_thumbnail');
    var imgSrc = $('#thumbnailArticle').attr('src');
    var thumbnail_edition = imgSrc.substr(imgSrc.indexOf('?')+1).replace('_drawShareNew','');
    var data = new FormData();
    data.append('article_guid', article_guid);
    data.append('imgBase64',canvas.toDataURL('image/png', 1.0));
    data.append('article_name',article_name.replace(/&quot;/g, '"').replace(/&apos;/g, "'"));
    data.append('author_name',author_name.replace(/&quot;/g, '"').replace(/&apos;/g, "'"));
    data.append('article_thumbnail_edition',thumbnail_edition);
    data.append('process_type','create');
    $.ajax({
        data: data,
        method: 'POST',
        url: "?action=manage_share_thumbnail",
        dataType: "json",
        cache: false,
        contentType: false,
        processData: false,
        beforeSend: function ()
        {
          articleH.jBlockUI('กำลังดำเนินการ โปรดรอสักครู่...');
        },
        success: function(res){          
          articleH.jUnblockUI();
          if(res.status.success){
            var iframe_url = WEB_URL_HTTPS + "a/" + article_guid;
            $('#framedoCallViewPage').attr('src',iframe_url);

            var iframe = document.getElementById("framedoCallViewPage");
            iframe.addEventListener("load", function() {
              callback();
            });
          }
          else
            articleH.jAlert('อัพโหลดไม่สำเร็จ', 'กรุณาลองใหม่ภายหลัง', null, 'error');
        }
    })
  }

  function deleteOldThumb(article_guid, callback){
    var imgSrc = $('#thumbnailArticle').attr('src');
    var data = new FormData();
    data.append('article_guid', article_guid);
    data.append('article_name',article_name.replace(/&quot;/g, '"').replace(/&apos;/g, "'"));
    data.append('author_name',author_name.replace(/&quot;/g, '"').replace(/&apos;/g, "'"));
    data.append('article_thumbnail_edition',thumbnail_edition);
    data.append('process_type','delete');
    $.ajax({
        data: data,
        method: 'POST',
        url: "?action=manage_share_thumbnail",
        dataType: "json",
        contentType: false,
        processData: false,
        beforeSend: function ()
        {
          articleH.jBlockUI('กำลังดำเนินการ โปรดรอสักครู่...');
        },
        success: function(res){
          articleH.jUnblockUI();
          if(res.status.success){
            if(typeof callback == 'function') callback();
          }else
            articleH.jAlert('ลบรูปไม่สำเร็จ', 'กรุณาลองใหม่ภายหลัง', null, 'error');
        }
    })
  }
</script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/swiper.min.js?t_8a0ee"></script> <link rel="stylesheet" href="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/css/swiper.min.css?t_8a0ee"> <style type="text/css">
    #article_related .swiper-pagination-bullet{
        margin: 0 3px;
    }
                                        
    #article_related .swiper-container {
        width: 100%;
        height: 100%;
    }
    #article_related .swiper-slide {
        text-align: center;
        font-size: 18px;
        width: 80%;
        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        /*-webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;*/
    }
    /*.swiper-slide{*/
        /*width: 15%;*/
    /*}*/
    #article_related .swiper-pagination-bullet-active {
        background: #95DBD5;
    }
    
    .articleRelatedNavi
    {
        position: absolute;
        top: 30%;
        display: none;
        background: #ffffff94;
        border-radius: 50%;
        z-index: 10;
    }
    #article_related:hover .articleRelatedNavi{
        display: block;
    }

    .articleRelatedNavi.navi-left{
        --remain: calc(100% - 980px);
        left: calc(var(--remain) / 2);
    }
    .articleRelatedNavi.navi-right{
        --remain: calc(100% - 980px);
        right: calc(var(--remain)/2);
    }

</style> <div id="related_article_div"> </div> <script>
    (function(preview){
        if(preview !== '1'){
            $('#related_article_div').html(
                `<div id="article_related_box" class="marginTopBottom20 bgWhite content-container smFullScreen smBorderLeftRightNone hide">
                    <div class="paddingTop10 width100Percent setFontNotoSans">
                        <span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">เรื่องที่คุณอาจจะสนใจ</span>
                    </div>
                    <div id="article_related" class="bgWhite marginLeft30 smMarginLeft15 relativePos" style="margin:0 auto;display:none;"></div>
                </div>`
            );
            const related_article_js = document.createElement('script');
            related_article_js.src = 'https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/related_article.js?t_8a0ee';
            document.head.append(related_article_js);
        }
    })(preview);
</script> <style>
    .donate_banner {
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/donate/donate_banner.png?t_8a0ee');
     height: 120px;
    }

    .donate_success_btn {
        border-color: #ff8452;
        background-color: #ff8452;
        color: #ffffff;
    }

    .donate_success_btn:hover {
        border-color: #f56b33;
        background-color: #f56b33;
    }

    .donateItemName {
        font-size: 34px;
        font-weight: 500;
        color: #707070;
    }

    .donateItemDesc {
        font-size: 15px;
        font-weight: 300;
        color: #707070;
        height: 70px;
    }

    .donatePublishDate {
        font-size: 14px;
        font-weight: 300;
        color: #cecece;
    }

    .donateAmount {
        font-size: 20px;
        font-weight: 500;
        color: #8b4e15;
    }

    .donateItemType {
        font-size: 14px;
        font-weight: 300;
        color: #dd215a;
    }

    .modalViewItem {
        overflow-x: unset !important;
        overflow-y: unset !important;
        padding: 10px 0 0 !important;
        border-radius: 20px !important;
        max-height: 90% !important;
    }

    .closeViewItem {
        font-family: 'serif';
        font-size: 26px;
        position: absolute;
        top: -20px;
        right: -10px;
        cursor: pointer;
        color: #fff;
        -webkit-transition: all .1s ease;
        transition: all .1s ease;
        background-color: #222;
        border-radius: 50%;
        width: 30px;
        height: 30px;
    }

    div.td_display_top_donate {
        width: 75px;
    }

    div.td_donate {
        width: calc(100% / 5.5);
    }

    .giftcode_input {
        width: 271.8px;
        height: 36px;
        border-radius: 3px;
        border: solid 1px #c6c1c1;
        background-color: #ffffff;
        font-size: 18px;
        font-weight: 500;
        padding-left: 6px;
        display: block;
    }

    .speech-bubble {
        position: relative;
        border-radius: .4em;
        height: 95px;
        box-shadow: 0 3px 6px 0 rgba(0, 0, 0, 0.16);
        background-color: #e5e5e5;
    }

    .speech-bubble > tbody > tr > td {
        text-align: center;
    }

    .pointer-td {
        position: relative;
    }

    .pointer-td:after {
        content: '';
        position: absolute;
        top: -8px;
        width: 0;
        height: 0;
        border: 15px solid transparent;
        border-bottom-color: #e5e5e5;
        border-top: 0;
    }

    .pointer-td-left:after {
        left: 17.5px;
    }

    .pointer-td-right:after {
        right: 17.5px;
    }

    .main_topic_donate {
        white-space: nowrap;
        width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .donateItemDetailPadding {
        padding: 10px 0;
    }

    @media (min-width: 768px) and (max-width: 894px) {
        .td_display_top_donate {
            padding: 8px 1px !important;
        }
    }

    @media screen and (max-width: 767px) {
        .donate_banner {
            background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/donate/donate_bannerM.png?t_8a0ee');
         height: 120px;
        }
        .donate_container {
            font-size: 16px;
        }
        .donate_btn {
            font-size: 16px;
            display: block;
            margin-top: 25px;
            margin-bottom: 25px;
            width: 100%;
            max-width: calc(100% - 40px);
        }
    }

    @media screen and (max-width: 429px) {
        .td_display_top_donate {
            padding: 8px 1px !important;
        }

        .donate_item_img {
            width: 70px;
        }

        .donateTxtSize18 {
            font-size: 18px;
        }

        .donateTxtSize24 {
            font-size: 24px !important;
        }

        .giftcode_input {
            width: 200px;
        }

        .closeViewItem {
            font-family: 'serif';
            font-size: 26px;
            position: absolute;
            top: -15px;
            right: -15px;
            cursor: pointer;
            color: #fff;
            -webkit-transition: all .1s ease;
            transition: all .1s ease;
            background-color: #222;
            border-radius: 50%;
            width: 30px;
            height: 30px;
        }

        .donateItemDetailPadding {
            padding: 10px 0 0 0;
        }
    }

    @media screen and (max-width: 360px) {
        .donate_item_img {
            width: 60px;
        }

        div.td_donate {
            width: calc(100% / 4.5);
        }

        .donator_item_name {
            width: 60px !important;
        }

        .donate_banner {
            background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/donate/donate_bannerS.png?t_8a0ee');
         height: 120px;
        }

        .td_display_top_donate {
            padding: 8px 1px !important;
        }
    }

    @media (max-width: 425px) {
        .donateItemName {
            font-size: 26px;
        }

        .donateItemDesc {
            font-size: 13px;
            height: 60px;
        }

        .donateItemType {
            font-size: 10px;
        }

        .donatePublishDate {
            font-size: 10px;
        }

        .donateAmount {
            font-size: 16px;
        }

        .donateOrderDate, .donateTotalCount {
            font-size: 13px;
        }
    }

    @media screen and (max-width: 520px) {
        .swal2-modal {
            padding: 0 !important;
        }

        .swal2-modal.swalNewStyle {
            padding: 20px !important;
        }

        .topic_donate {
            padding-top: 35px !important;
        }
    }

</style> <div id="donate_top_div"></div> <script>
    (function (preview, is_accept_donate, article_name, is_donee, chapter_subtitle) {
        function boxDonation(){
            return(
                `<div id="box_donation" class="content-container text-center bgWhite marginTop20 smFullScreen smBorderLeftRightNone" style="border-bottom: none; display:${is_accept_donate === '1'?'block':'none'};">
                    <div class="paddingTopBottom10 width100Percent text-left setFontNotoSans">
                        <span class="txtSize30sm20 fontWeight500 showBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15">
                            ให้กำลังใจนักเขียนผ่านโดเนท
                        </span>
                    </div>
                    <div id="found_donator" class="containDonatorTable" style="display: none;">
                        <div id="div_donator_all" class="smWidth100Percent width50Percent showInlineBlock hide smShowBlock paddingAllNone smPaddingLeftRight20">
                            <table class="table" style="margin-bottom: 0;display: inline-table;vertical-align: top;">
                                <thead class="donate_container">
                                    <tr>
                                        <th class="setFontNotoSans" style="text-align: center; border-right:none; font-weight:500;" colspan="5">
                                            <span id="title_table_all" class="marginTopBottom5 " style="display: inline-block;margin-left: 10px;overflow: hidden;height: 1.4em;vertical-align: text-top;word-break: break-all;">
                                                โดเนทสูงสุดของเรื่อง ${article_name}
                                            </span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="donator_all" class="showBodyTableLarge" >
                                </tbody>
                            </table>
                            <div id="donator_all_div" style="width: 100%; position:relative;"></div>
                        </div>
                        <div id="div_donator_some" class="smWidth100Percent width50Percent showInlineBlock borderLeftDonator hide smShowBlock paddingAllNone smPaddingLeftRight20">
                            <table class="table" style="margin-bottom: 0;display: inline-table;vertical-align: top;">
                                <thead class="donate_container">
                                    <tr>
                                        <th class="setFontNotoSans" style="text-align: center; border-right:none; font-weight:500;" colspan="5">
                                            <span id="title_table_some" class="marginTopBottom5" style="display: inline-block;margin-left: 10px;overflow: hidden;height: 1.4em;vertical-align: text-top;word-break: break-all;">
                                                โดเนทสูงสุดของ ${action === 'view' ? 'บทนำ' : (jMeb.empty(chapter_subtitle) ? 'ตอนย่อยนี้' : chapter_subtitle) }
                                            </span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="donator_some" class="showBodyTableLarge" >
                                </tbody>
                            </table>
                            <div id="donator_some_div" style="width: 100%; position:relative;"></div>
                        </div>
                    </div>
                    <div class="width100Percent clearfix" style="display:${is_donee === '1'?'block':'none' };">
                        <button id="donate_btn" class="donate_btn paddingTop10 paddingBottom10 center-block" style="">
                            <img src="${ASSETS_IMAGES}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${ASSETS_IMAGES}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${ASSETS_IMAGES}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" style="display: inline-block;margin-top: -2px;" />
                            <span class="txtSize16" style="color: #ffffff;display: inline-block;">โดเนทที่นี่</span>
                        </button>
                    </div>
                </div>`
            )
        }

        function modalShowAllDonator(){
            return(
                `<div id="modal-all-donator" class="modal fade" role="dialog">
                    <div class="modal-dialog" style="max-width: 680px;margin-left: auto;margin-right: auto;">
                        ${''}
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">✖</button>
                                <h3 class="add-modal-title text-center" id="modal-all-donator-title">Top Donator ทั้งหมด</h3>
                            </div>
                            <div class="modal-body" style="max-height: 55vh; padding: 0;">
                                <div id="" style="overflow-y: auto; height: 50vh;">
                                    <table class="table" style="margin-bottom: 0;display: inline-table;vertical-align: top;">
                                        <tbody id="all-donator" class="showBodyTableLarge" >
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer" style="text-align: center;">
                            ${''}
                            </div>
                        </div>
                    </div>
                </div>`
            )
        }

        function modalDonateDetailMobile(){
            return(
                `<div id="modal-donate-detail" class="modal fade" role="dialog">
                    <div class="modal-dialog" style="max-width: 680px;margin-left: auto;margin-right: auto;">
                        ${''}
                        <div class="modal-content" style="border-radius: 10px; margin:10px;">
                            <div class="modal-header" style="border-radius: 10px 10px 0 0; background: #e5e5e5;">
                                <button type="button" class="close" data-dismiss="modal">✖</button>
                            </div>
                            <div class="modal-body" style="max-height: 55vh; padding: 5px; background: #e5e5e5; border-radius: 0 0 10px 10px;" id="mobile-donate-detail-content">

                            </div>
                        </div>
                    </div>
                </div>`
            )
        }

        if (preview !== '1'){
            const donate_js = document.createElement('script');
            donate_js.src = 'https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/donate.js?t_8a0ee';
            document.head.append(donate_js);
            $('#donate_top_div').html(
                `${boxDonation()}
                ${modalShowAllDonator()}
                ${modalDonateDetailMobile()}`
            );
        }
    })(preview,'0',decodeString(article_name).replace(/</g,'&lt;').replace(/>/g,'&gt;'), '0','');
</script> <div class="modal fade" id="popup_cartoon_setting" style="width: 100%;"> <div class="modal-dialog" role="dialog" id="popup_cartoon_setting_dialog" style="margin: 0 auto;top: 50%;transform: translateY(-50%);"> <div class="modal-content paddingTopBottom15 smPaddingAllNone" style=""> <div class="modal-body" style="padding-top: 20px;"> <div class="pull-right" style="margin-top: -20px;display: inline-block;"> <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="padding-top: 5px;"> <span aria-hidden="true">✖</span> </button> </div> <div class="fontWeight500 txtSize25 paddingBottom30" style="text-align: center;">ตั้งค่าหน้าอ่าน
                    </div> <div style="display: flex;margin: 0 auto;width: 350px;" class="cursorPointer paddingBottom20 txtNewGrey5"> <div class="paddingTopBottom5 tabCartoonSettingStyle" id="tabManga" style="margin: auto;border-radius: 5px 0 0 5px;width: 50%;" onclick="$('#tabManga').addClass('activeTabCartoonSetting');$('#tabWebtoon').removeClass('activeTabCartoonSetting');$('#divDisplayDescription').css('visibility','visible');$('#settingText').addClass('hidden');changeDisplayStyle(0);$('.cartoonDisplayStyle').removeClass('hidden');">manga</div> <div class="paddingTopBottom5 tabCartoonSettingStyle " id="tabWebtoon" style="margin: auto;border-radius: 0 5px 5px 0;width: 50%;" onclick="$('#tabWebtoon').addClass('activeTabCartoonSetting');$('#tabManga').removeClass('activeTabCartoonSetting');$('#divDisplayDescription').css('visibility','hidden');changeDisplayStyle(1);$('.cartoonDisplayStyle').addClass('hidden');$('#settingText').removeClass('hidden');">webtoon</div> </div> </div> </div> </div> </div> <script>
    function postProcess(chapter_sort_type){
        $(".tbl-accordion").each(function() {
            var thead = $(this).find("thead");
            var tbody = $(this).find("tbody");
            var img = $(this).find("img.arrow-collapse");

            tbody.hide();
            thead.click(function() {
                if (tbody.is(":visible")) {
                    img.attr("src", ASSETS_IMAGES + "down_arrow.png");
                    img.attr("srcset", ASSETS_IMAGES + "down_arrow@2x.png 2x, " + ASSETS_IMAGES + "down_arrow@3x.png 3x");
                } else {
                    img.attr("src", ASSETS_IMAGES + "up_arrow.png");
                    img.attr("srcset", ASSETS_IMAGES + "up_arrow2x.png 2x, " + ASSETS_IMAGES + "up_arrow3x.png 3x");
                }
                tbody.slideToggle();
            });
        });
        $('.group_get_chapter').click(function(){
            const is_loaded = $(this).attr('is_loaded') === 'true';
            if(!is_loaded){
                const group_id_splited = $(this).attr('id').split("_");
                const start_range = group_id_splited[1];
                const end_range = group_id_splited[2];
                getChapterWithRange($(this),start_range,end_range,chapter_sort_type);
            }
        });
        MyPurchaseChapterObj.processMyPurchaseChapter();
        reloadDropdownSortChapter(chapter_sort_type,'newSortChapter');
    }

    // single chapter
    function readingOption(){
        return(
            `<div class="notShowOnDesktop showInlineBlock width100Percent" id="box_option_menu" style="margin-top:-30px;">
                <div class="pull-right">
                    ${$('#read_option_menu').clone().html()}
                </div>
            </div>`
        )
    }
    function cartoonSetting(){
        return (
            `<div class="cartoonSettingBar mainChapter showInlineBlock width100Percent text-right txtGrey fontWeight300 paddingRight20">
                <div class="cartoonDisplayStyle showInlineBlock borderRound" style="background-color: #efefef;">
                    <div class="mangaStyle showInlineBlock marginRight10 ${display_style !== 2 && display_style !== 3 ? 'hidden':''}">
                        <img src="${CDN_ROOT_ASSET_IMAGE}cartoon_settings/manga_small.png" alt="manga"><span> manga</span>
                    </div>
                     <div class="mangaStyle showInlineBlock marginRight10 ${display_style !== 2 ? 'hidden':''}">
                        <img src="${CDN_ROOT_ASSET_IMAGE}cartoon_settings/left_to_right_small.png" alt=""><span> ${display_style === 2 ? ('แบบไทย'): (display_style == 3 ? 'แบบญี่ปุ่น':'')}</span>
                    </div>
                </div>
                 <div class="divPopupCartoonSetting showInlineBlock cursorPointer" onclick="showPopupCartoonSetting();">
                    <i class="fa fa-cog" aria-hidden="true"></i> ตั้งค่า
                </div>
            </div>`
        )
    }
    function chapterContent(){
        return(
            `<div id="${article_species === 'CARTOON'?'chapterCartoonContents':'chapterContents'}"
                class="${jMeb.empty(allow_copy_content)?'disable-selection':''} loadedContent marginBottom20 paddingTopBottom20 widthContent"
                style="margin-left: auto; margin-right: auto;line-height: 1.7;">
            </div>`
        );
    }
    //multi_chapter
    // helper function
    function getChapterWithRange(parent_elem,start_range, end_range, chapter_sort_type){
        $.ajax({
            method: 'POST',
            url: "?action=ajax&ajax=1&ajax_case=CallWrapper",
            data: {
                api_call: 'Article',
                method_call : preview === '1' ? 'publisherGetChapterListWithRange' : 'userGetChapterListWithRange',
                article_guid: article_guid,
                token: CookiesJS.getCookie('user_token'),
                start_range: start_range,
                end_range: end_range,
                sort_type: chapter_sort_type
            },
            dataType: "json"
        }).done(function (res) {
            if(!res.status.success){
                console.error(`${res.status.code}: ${res.message}`);
                return;
            }
            let chapter_list = res.data.chapter_list;
            let chapter_list_html = '';
            updateChapterArr(chapter_list)
            chapter_list.forEach(function (elem, index) {
                let props = {
                    running_number: chapter_sort_type === 'asc'?(parseInt(start_range) + index + 1):parseInt(end_range)-index+1,
                    chapter_status: elem.status,
                    chapter_order: elem.chapter_order,
                    chapter_guid: elem.chapter_guid,
                    baht_price: elem.baht_price,
                    flexible_pricing_enable: elem.flexible_pricing_enable,
                    chapter_title: elem.chapter_title,
                    chapter_subtitle: elem.chapter_subtitle,
                    word_count: elem.word_count,
                    comment_count: contentH.shortenNumbers(elem.comment_count),
                    view_count: contentH.shortenNumbers(elem.view_count),
                    edit_date: elem.edit_date,
                    user_id:CookiesJS.getCookie('user_id'),
                    comment_count_full: contentH.numberWithCommas(elem.comment_count),
                    view_count_full: contentH.numberWithCommas(elem.view_count),                    
                    schedule_baht_price: elem.schedule_baht_price,
                    schedule_original_baht_price: elem.schedule_original_baht_price,
                    schedule_pricing_enable: elem.schedule_pricing_enable,
                    schedule_pricing_end_datetime: elem.schedule_pricing_end_datetime,
                    schedule_pricing_start_datetime: elem.schedule_pricing_start_datetime,
                };
                chapter_list_html += chapterRow(props);
            });
            parent_elem.find('tbody').html(chapter_list_html);
            parent_elem.attr('is_loaded',true);
            MyPurchaseChapterObj.processMyPurchaseChapter();
        });
    }
    // render component
    function chapterListHeader(is_publisher, chapter_count, is_end) {
        const user_id = CookiesJS.getCookie('user_id');
        return (
            `<div class="paddingTop10 width100Percent" style="">
                <span class="showInlineBlock marginTop30 smMarginTop15 marginLeft30 smMarginLeft15 setFontNotoSans">
                    <span class="txtSize30sm20 fontWeight500">ตอนทั้งหมด ${chapter_count > 0 ? `(${chapter_count})` : ``}</span>
                </span>
                ${chapter_count > 0 ? 
                `<span id="sort_chapter" class="showInlinBlock pull-right dropdown marginTop35 smMarginTop15 marginLeft10 smMarginLeftNone marginRight20 smMarginRight15">
                    <a class="dropdown-toggle txtGreenBlue" data-toggle="dropdown" href="#" aria-expanded="false">
                        <img src="${CDN_ROOT_ASSET_IMAGE}sort_orders.png?${ASSET_IMAGES_VERSION}" class="marginRight5 smMarginRightNone" style="width: 26px;" alt=""/>
                        ${''}
                    </a>
                    <ul class="dropdown-menu">
                        ${''}
                    </ul> 
                </span>
                    ${user_id !== user_id_publisher ? (
                        `<span id="button_purchase_all" class="showInlinBlock pull-right button_purchase_chapter_all smMarginBottom5 cursorPointer">
                            <img class="imgCoin showInlinBlock pull-left" src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" style="margin-right: 9px;" alt=""/>
                            <span class="showInlinBlock pull-left" style="margin-top:2px;">ซื้อทุกตอน</span>
                        </span>`
                    ) : (
                        ``
                    )}
                `
                : // else
                `` }
            </div>`
        );
    }
    function chapterListMobileTD(chapter_guid, baht_price, chapter_status, flexible_pricing_enable, chapter_title, chapter_subtitle, word_count, comment_count, view_count, edit_date, running_number, is_publisher, schedule_baht_price, schedule_original_baht_price, schedule_pricing_enable, schedule_pricing_end_datetime, schedule_pricing_start_datetime){
        let first_td_onclick = '';
        if (preview === '1') {
            first_td_onclick = `window.location.href = '${WEB_URL_HTTPS}c/${chapter_guid}?preview=1'`;
        }
        else{
            if(chapter_status !== 3){
                if (baht_price > 0 && !is_publisher){
                    first_td_onclick = `javascript:startPayViaMebcoin('${chapter_guid}', 'CHAPTER', ${flexible_pricing_enable})`;
                }
                else{
                    first_td_onclick = `window.location.href = '${WEB_URL_HTTPS}c/${chapter_guid}'`;
                }
            }
        }
        var txtEndSchdule = '';
        if(schedule_pricing_end_datetime != null){
            var endSchdule = dateTime.convertDatetimeTextShortYear(schedule_pricing_end_datetime);
            var arrTmp = endSchdule.split(' ');
            txtEndSchdule = arrTmp[0] + ' ' + arrTmp[1] + ' (' + arrTmp[3] + ')';
        }   

        var classForColButton = 'hide';
        if((baht_price > 0 && chapter_status === 2) || (chapter_status === 3)) classForColButton = '';

        const own_elem = `<span class="sm-pull-right btnTxtYellowGoldBgLightYellowNewStyleSmall unlock_purchase_chapter_mobile_${chapter_guid} btnRound20Pt txtSize13 notShowOnDesktop smMarginRight15" onclick="window.location.href = '${WEB_URL_HTTPS}c/${chapter_guid}${preview === '1'?'?preview=1':''}'" style="max-height: 2em;float: right; opacity:0;width:75px;text-align:center;border-radius: 15px !important;">ซื้อแล้ว</span>`;
        var edit_dt_text = dateTime.convertDatetimeTextShortYear(edit_date);

        return(
            `<td  id="purchase_chapter_${chapter_guid}" class="${chapter_status === 2?'cursorPointer':''}" style="vertical-align: middle;" onclick="${first_td_onclick}">
                <div>
                    <span class="showInlineBlock smShowBlock pull-left sm-pull-none sm-clearfix smWidth100Percent marginRight5 txtGreenBlue txtSize16sm15" >
                        <span class="showInlineBlock pull-left marginLeft20 smMarginLeft15 running_number" style="vertical-align:top;${((chapter_title + chapter_subtitle).length > 70) ? 'margin-top:15px;' : 'margin-top:3px;'}">#${running_number}</span>
                        ${ (chapter_status === 3 && baht_price <= 0) ?
                            `<span class="visible-xs showInlineBlock pull-right smMarginRight15 lblUnpublishChapter" style="border-radius: 15px;background-color: var(--bgLabelUnpublishChapter);padding: 0px 8px 0px;">
                                <img class="showInlineBlock" src="${CDN_ROOT_ASSET_IMAGE}hide_story.png?${ASSET_IMAGES_VERSION}" style="margin-top: -2px;filter:invert(var(--invertUnpublishIcon));" /> 
                                <span class="showInlineBlock txtSize11" style="color:var(--textOnUnpublishChapterLabel);">ปิดเนื้อหา</span>
                            </span>`
                        :// else
                            (schedule_pricing_enable === 2 && baht_price < schedule_original_baht_price) ?
                                baht_price > 0 ?
                                `<span class="visible-xs showInlineBlock pull-right smMarginRight15 txtSize11 text-right txt_schedule_time" style="color: var(--bgButtonBuyChapterColor);top:0;">
                                    <span class="showInlineBlock">ราคา ${Math.ceil(baht_price)}</span> <img src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" class="imgCoin showInlineBlock marginRight5" style="margin-top: -2px;width:10px;" /><span class="showInlineBlock">ถึง 
                                    ${txtEndSchdule}
                                    </span>
                                </span>`
                                : `
                                <span class="visible-xs showInlineBlock pull-right smMarginRight15 txtSize11 text-right txt_schedule_time" style="color: var(--bgButtonBuyChapterColor);top:0;">
                                    อ่านฟรีถึง ${txtEndSchdule}
                                </span>
                                `
                            : ''
                        }                                            
                    </span>                    
                    <span class="showInlineBlock sm-clearfix pull-left smWidth100Percent txtSize16sm15 boxChapterTitle ${classForColButton == 'hide' ? 'chapterNoButtonBuy' : ''}" style="max-height: 2.9em;width:calc(100% - 75px);word-break: break-all;" >
                        ${chapter_status === 2?
                            (baht_price > 0 && !is_publisher ?
                                `<a class="purchase_chapter linkColorChangeOnHover" id="link_purchase_chapter_${chapter_guid}" style="clear: both; display: block;${((chapter_title + chapter_subtitle).length > 70) ? '' : 'margin-top: 2px;'}" >`
                            : // else
                                `<a class="purchase_chapter linkColorChangeOnHover" style="clear: both;display: block;margin-top: 2px;" href="${WEB_URL_HTTPS}c/${chapter_guid}${preview === '1' ? '?preview=1' : ''}">`
                            )
                        :// else
                            ''
                        }
                        <span class="" style="margin: 0;overflow: hidden; ">
                            <span class="span_lock" style="width: 16px;"></span>
                            <span class="showInlineBlock chapterTitleAndSubTitle" style="display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow:hidden;${((chapter_title + chapter_subtitle).length > 70) || chapter_status === 3 ? 'margin-top:2px;' : ''}">
                            ${chapter_title}
                            ${chapter_subtitle}
                            ${chapter_status !== 2 && chapter_status !== 3 ? '(ไม่เผยแพร่)' : ''}
                            </span>
                        </span>
                        ${chapter_status === 2?
                            '</a>'
                        : // else
                            ''
                        }
                    </span>
                    <span class="sm-pull-right ${classForColButton}" style="max-height: 2.8em;width:90px;word-break: break-all;overflow: hidden;">
                        ${ (schedule_pricing_enable === 2 && baht_price < schedule_original_baht_price) ?
                                baht_price > 0 ?
                                    chapter_status === 2 ?
                                        `<button type="button" class="btn visible-xs pull-right button_purchase_chapter_${chapter_guid} button_purchase_chapter smMarginRight15" onclick="${!is_publisher ? `startPayViaMebcoin('${chapter_guid}', 'CHAPTER', '${flexible_pricing_enable})'`:''}" style="float: right;text-align:left;padding-left: 2px;padding-right: 10px;max-width:75px;">
                                            <span class="showInlineBlock txtSize11 marginRight5" style="text-decoration:line-through;background-image:url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION});background-image:-webkit-image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-image:image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-size: 10px;background-repeat: no-repeat;background-position-y: center;filter: grayscale(var(--greyScaleImg));">&nbsp;&nbsp;&nbsp;${Math.ceil(schedule_original_baht_price)}</span>
                                            <span class="showInlineBlock txtSize16sm15">${Math.ceil(baht_price)}</span>
                                        </button>
                                        ${own_elem}`
                                    : chapter_status === 3 ?
                                         `${own_elem}`
                                        : ''
                                : chapter_status === 3 ?
                                     `${own_elem}`
                                    : `<span class="showBlock width100Percent clearfix visible-xs" style="top:38%;padding-right:15px;">
                                            <span class="showInlineBlock pull-right" style="color: var(--linkColor);">ฟรี</span>
                                            <span class="marginRight10 showInlineBlock pull-right">
                                                <span class="showInlineBlock" style="text-decoration:line-through;background-image:url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION});background-image:-webkit-image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-image:image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-size: 12px;background-repeat: no-repeat;background-position-y: center;padding-left:2px;filter: grayscale(var(--greyScaleImg));color: var(--textOnCardDarkColor);">&nbsp;&nbsp;&nbsp;${Math.ceil(schedule_original_baht_price)}</span>
                                            </span>
                                        </span>`
                            : // else                            
                            baht_price > 0 ?
                            chapter_status === 2 ?
                                `<button type="button" class="btn visible-xs pull-right button_purchase_chapter_${chapter_guid} button_purchase_chapter smMarginRight15" onclick="${!is_publisher ? `startPayViaMebcoin('${chapter_guid}', 'CHAPTER', '${flexible_pricing_enable})'`:''}" style="float: right;text-align:left;padding-left: 2px;padding-right: 10px;max-width:75px;">
                                    <img src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" class="imgCoin showInlineBlock marginRight5 pull-left"  />
                                    <span class="showInlineBlock txtSize16sm15" style="margin-top:2px;margin-left:5px;">${Math.ceil(baht_price)}</span>
                                </button>
                                ${own_elem}`
                            : // else
                                chapter_status === 3?
                                    `${own_elem}`
                                : ''
                        : // else
                            ''
                        }
                    </span>
                </div>
                    <div class="visible-xs clearfix">
                        <span class="showInlineBlock pull-right paddingTop10 smMarginRight15 txtSize12" style="color: var(--textOnCardLightColor);  text-align: right;">
                            ${edit_dt_text}
                        </span>
                        <span class="showInlineBlock pull-left paddingTop10 txtSize12" style="color: var(--textOnCardLightColor); ">
                            <span class="showInlineBlock pull-left marginRight5 smMarginLeft15">
                                <img src="${CDN_ROOT_ASSET_IMAGE}comment.png?${ASSET_IMAGES_VERSION}" style="width:12px;height:12px;" /> ${comment_count}
                            </span>
                            <span class="showInlineBlock pull-left marginRight5">
                                <img src="${CDN_ROOT_ASSET_IMAGE}topic_view.png?${ASSET_IMAGES_VERSION}" style="width:12px;height:12px;" /> ${view_count}
                            </span>
                            ${word_count > 0 ?
                                `<span class="pull-left showInlineBlock" style="color: var(--textOnCardLightColor); text-align: right;">
                                    ${word_count} คำ (${Math.ceil(word_count/250)} หน้า)
                                </span>`
                            : // else
                                ''
                            }
                        </span> 
                    </div>                   
            </td>`
        );
    }
    function chapterRow({running_number,chapter_status,chapter_order,chapter_guid,baht_price,flexible_pricing_enable,chapter_title,chapter_subtitle,word_count,comment_count,view_count,edit_date,user_id,comment_count_full,view_count_full,schedule_baht_price,schedule_original_baht_price,schedule_pricing_enable,schedule_pricing_end_datetime,schedule_pricing_start_datetime}){
        var edit_dt_text = dateTime.convertDatetimeTextShortYear(edit_date);
        const is_publisher = user_id === user_id_publisher;
        
        var txtEndSchdule = '';
        if(schedule_pricing_end_datetime != null){
            var endSchdule = dateTime.convertDatetimeTextShortYear(schedule_pricing_end_datetime);
            var arrTmp = endSchdule.split(' ');
            txtEndSchdule = arrTmp[0] + ' ' + arrTmp[1] + ' (' + arrTmp[3] + ')';
        }        
        return(
            `<tr class="chapter_list${chapter_status === 3? ' unpublishChapter' : ''}" style="${chapter_status === 3?'cursor: default;':''}" chapter="${chapter_order}">
                ${chapterListMobileTD(chapter_guid,baht_price,chapter_status,flexible_pricing_enable,chapter_title,chapter_subtitle,word_count,comment_count,view_count,edit_date,running_number,is_publisher,schedule_baht_price,schedule_original_baht_price,schedule_pricing_enable,schedule_pricing_end_datetime,schedule_pricing_start_datetime)}
                    <td class="hidden-xs" style="${txtEndSchdule != '' ? 'width: 182px;' : 'width: 105px;'}padding: 0px;vertical-align: middle;">
                        ${(schedule_pricing_enable === 2 && 
                        baht_price < schedule_original_baht_price) ? 
                            baht_price > 0 ?
                                chapter_status === 2 ?
                                    user_id === user_id_publisher ?
                                    (`
                                    <div class="clearfix relativePos width100Percent" style="height:80px;">
                                        <span class="showBlock width100Percent txtSize13 absolutePos text-right" style="color: var(--bgButtonBuyChapterColor);top:0;">
                                            <span class="showInlineBlock">ราคา ${Math.ceil(baht_price)}</span> <img src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" class="imgCoin showInlineBlock marginRight5" style="margin-top: -2px;width:12px;" /><span class="showInlineBlock">ถึง 
                                            ${txtEndSchdule}
                                            </span>
                                        </span>
                                        <span class="showBlock width100Percent clearfix relativePos" style="top:38%;">
                                            <span class="height1Line chapter_owner_${chapter_guid} button_purchase_chapter" style="display: block;float: right;padding: 5px 2px 6px;">
                                                <span class="showInlineBlock txtSize13" style="text-decoration:line-through;background-image:url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION});background-image:-webkit-image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-image:image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-size: 12px;background-repeat: no-repeat;background-position-y: center;padding-left:2px;filter: grayscale(var(--greyScaleImg));margin-left:5px;">&nbsp;&nbsp;&nbsp;&nbsp;${Math.ceil(schedule_original_baht_price)}</span>
                                                <span class="showInlineBlock text-left" style="width:30px;">${Math.ceil(baht_price)}</span>
                                            </span>
                                        </span>
                                    </div>
                                    `)
                                    : (`
                                    <div class="clearfix relativePos width100Percent" style="height:80px;">
                                        <span class="showBlock width100Percent txtSize13 absolutePos text-right txt_schedule_time" style="color: var(--bgButtonBuyChapterColor);top:0;">
                                            <span class="showInlineBlock">ราคา ${Math.ceil(baht_price)}</span> <img src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" class="imgCoin showInlineBlock marginRight5" style="width:12px;" /><span class="showInlineBlock">ถึง 
                                            ${txtEndSchdule}
                                            </span>
                                        </span>
                                        <span class="showBlock width100Percent clearfix relativePos" style="margin-top:20px;">
                                            <button type="button" class="btn button_purchase_chapter_${chapter_guid} button_purchase_chapter" onclick="startPayViaMebcoin('${chapter_guid}', 'CHAPTER', ${flexible_pricing_enable})" style=" float: right;padding: 5px 2px 6px;">
                                                <span class="showInlineBlock text-center txtSize13" style="text-decoration:line-through;background-image:url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION});background-image:-webkit-image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-image:image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-size: 12px;background-repeat: no-repeat;background-position-y: center;padding-left:2px;filter: grayscale(var(--greyScaleImg));margin-left:5px;">&nbsp;&nbsp;&nbsp;&nbsp;${Math.ceil(schedule_original_baht_price)}</span>
                                                <span class="showInlineBlock text-left" style="width:30px;">${Math.ceil(baht_price)}</span>
                                            </button>
                                            <span class="btnTxtYellowGoldBgLightYellowNewStyleSmall unlock_purchase_chapter_${chapter_guid} txtSize16 pull-right" onclick="window.location.href='${WEB_URL_HTTPS}c/${chapter_guid}'" style="
                                            max-height: 2.8em;display: none;border-radius:15px !important;padding-left: 10px;padding-right: 10px;max-width:70px;padding-top: 5px;padding-bottom: 0px;">ซื้อแล้ว</span>
                                        </span>
                                    </div>
                                    `)
                                : chapter_status === 3 ?
                                    (`
                                    <span class="btnTxtYellowGoldBgLightYellowNewStyleSmall unlock_purchase_chapter_${chapter_guid} txtSize16 pull-right" onclick="window.location.href='${WEB_URL_HTTPS}c/${chapter_guid}'" style="
                                    max-height: 2.8em;display: none;border-radius:15px !important;padding-left: 10px;padding-right: 10px;max-width:70px;padding-top: 5px;padding-bottom: 0px;">ซื้อแล้ว</span>
                                    <span class="showBlock lblHideChapter_${chapter_guid} pull-right" style="border-radius: 15px;background-color: var(--bgLabelUnpublishChapter);padding: 5px 5px 3px;width:fit-content;">
                                        <img class="showInlineBlock" src="${CDN_ROOT_ASSET_IMAGE}hide_story.png?${ASSET_IMAGES_VERSION}" style="margin-top: -4px;filter:invert(var(--invertUnpublishIcon));" /> 
                                        <span class="showInlineBlock txtSize16" style="color:var(--textOnUnpublishChapterLabel);">ปิดเนื้อหา</span>
                                    </span>
                                    `)
                                    : (``)
                            : chapter_status === 3 ?
                                (`
                                <span class="showBlock lblUnpublishChapter pull-right" style="border-radius: 15px;background-color: var(--bgLabelUnpublishChapter);padding: 5px 5px 3px;width:fit-content;">
                                    <img class="showInlineBlock" src="${CDN_ROOT_ASSET_IMAGE}hide_story.png?${ASSET_IMAGES_VERSION}" style="margin-top: -4px;filter:invert(var(--invertUnpublishIcon));" /> 
                                    <span class="showInlineBlock txtSize16" style="color:var(--textOnUnpublishChapterLabel);">ปิดเนื้อหา</span>
                                </span>
                                `)
                                : (`
                                <div class="clearfix relativePos width100Percent" style="height:80px;">
                                    <span class="showBlock width100Percent txtSize13 absolutePos text-right" style="color: var(--bgButtonBuyChapterColor);top:0;">
                                        อ่านฟรีถึง ${txtEndSchdule}
                                    </span>
                                    <span class="showBlock width100Percent clearfix relativePos" style="top:38%;">
                                        <span class="showInlineBlock pull-right" style="color: var(--linkColor);">ฟรี</span>
                                        <span class="marginRight10 showInlineBlock pull-right relativePos">
                                            <span class="showInlineBlock" style="text-decoration:line-through;background-image:url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION});background-image:-webkit-image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-image:image-set(url(${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}) 1x, url(${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x));background-size: 12px;background-repeat: no-repeat;background-position-y: center;padding-left:2px;color: var(--textOnCardLightColor);filter: grayscale(var(--greyScaleImg));">&nbsp;&nbsp;&nbsp;${Math.ceil(schedule_original_baht_price)}</span>
                                        </span>
                                    </span>
                                </div>
                                `)
                        : baht_price > 0?
                            chapter_status === 2?
                                user_id === user_id_publisher ?
                                    `<span class="height1Line chapter_owner_${chapter_guid} button_purchase_chapter" style="display: block;float: right;">
                                        <img src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" class="imgCoin showInlineBlock marginRight5 pull-left" style="" />
                                        <span class="showInlineBlock text-left" style="width:30px;margin-top:2px;">${Math.ceil(baht_price)}</span>
                                    </span>`
                                : // else
                                    `<button type="button" class="btn button_purchase_chapter_${chapter_guid} button_purchase_chapter" onclick="startPayViaMebcoin('${chapter_guid}', 'CHAPTER', ${flexible_pricing_enable})" style=" float: right;">
                                        <img class="imgCoin showInlineBlock marginRight5 pull-left" src="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION}" srcset="${CDN_ROOT_ASSET_IMAGE}littlecoin.png?${ASSET_IMAGES_VERSION} 1x, ${CDN_ROOT_ASSET_IMAGE}littlecoin@2x.png?${ASSET_IMAGES_VERSION} 2x" />
                                        <span class="showInlineBlock text-left" style="width:30px;margin-top:2px;">${Math.ceil(baht_price)}</span>
                                    </button>
                                    <span class="btnTxtYellowGoldBgLightYellowNewStyleSmall unlock_purchase_chapter_${chapter_guid} txtSize16 pull-right" onclick="window.location.href='${WEB_URL_HTTPS}c/${chapter_guid}'" style="
                                    max-height: 2.8em;display: none;border-radius:15px !important;padding-left: 10px;padding-right: 10px;max-width:70px;padding-top: 5px;padding-bottom: 0px;">ซื้อแล้ว</span>`
                            : // else
                                chapter_status === 3 ?
                                    `<span class="btnTxtYellowGoldBgLightYellowNewStyleSmall unlock_purchase_chapter_${chapter_guid} txtSize16 pull-right" onclick="window.location.href='${WEB_URL_HTTPS}c/${chapter_guid}'" style="
                                    max-height: 2.8em;display: none;border-radius:15px !important;padding-left: 10px;padding-right: 10px;max-width:70px;padding-top: 5px;padding-bottom: 0px;">ซื้อแล้ว</span>
                                    <span class="showBlock lblHideChapter_${chapter_guid} pull-right" style="border-radius: 15px;background-color: var(--bgLabelUnpublishChapter);padding: 5px 5px 3px;width:fit-content;">
                                        <img class="showInlineBlock" src="${CDN_ROOT_ASSET_IMAGE}hide_story.png?${ASSET_IMAGES_VERSION}" style="margin-top: -4px;filter:invert(var(--invertUnpublishIcon));" /> 
                                        <span class="showInlineBlock txtSize16" style="color:var(--textOnUnpublishChapterLabel);">ปิดเนื้อหา</span>
                                    </span>
                                    `
                                : // else
                                    ''
                        : chapter_status === 3 ?
                            `<span class="showBlock lblUnpublishChapter pull-right" style="border-radius: 15px;background-color: var(--bgLabelUnpublishChapter);padding: 5px 5px 3px;width:fit-content;">
                                <img class="showInlineBlock" src="${CDN_ROOT_ASSET_IMAGE}hide_story.png?${ASSET_IMAGES_VERSION}" style="margin-top: -4px;filter:invert(var(--invertUnpublishIcon));" /> 
                                <span class="showInlineBlock txtSize16" style="color:var(--textOnUnpublishChapterLabel);">ปิดเนื้อหา</span>
                            </span>`
                            : ''}
                    </td>

                    ${word_count > 0?
                        `<td class="hidden-xs" style="width:92px;color: var(--textOnCardLightColor);text-align: center; vertical-align: middle; font-size: 12px;padding: 13px 16px;">${word_count} คำ<br>(${Math.ceil(word_count/250)} หน้า)</td>`
                    : // else
                        '<td class="hidden-xs" style="width:60px;"></td>'
                    }

                <td class="hidden-xs" style="width:112px;text-align: center; vertical-align: middle; font-size: 13px;padding: 13px 16px;word-break: keep-all;color:var(--textOnCardLightColor);">${edit_dt_text.replace(',','')}</td>
                <td class="hidden-xs" style="width:92px; text-align: left; vertical-align: middle; font-size: 16px;padding:20px 16px;color:var(--textOnCardLightColor);" title="${comment_count_full}">
                    <img src="${CDN_ROOT_ASSET_IMAGE}comment.png?${ASSET_IMAGES_VERSION}" style="width:12px;height:12px;" /> ${comment_count}
                </td>
                <td class="hidden-xs" style="width:90px; text-align: left; vertical-align: middle; font-size: 16px;padding:20px 16px 20px 0;color:var(--textOnCardLightColor);" title="${view_count_full}">
                    <img src="${CDN_ROOT_ASSET_IMAGE}topic_view.png?${ASSET_IMAGES_VERSION}" style="width:12px;height:12px;" /> ${view_count}
                </td>
            </tr>`
        );
    }
    function chapterGroup(group_start_index, group_end_index){
        return(
            `<tr id="group_${group_start_index}_${group_end_index}" class="group_get_chapter" is_loaded=false>
                <td colspan="6" style="padding: 0;">
                   <table style="margin-bottom: 0" class="table table-hover tbl-accordion collapseTable">
                        <thead>
                            <tr>
                                <td colspan="6" class="cursorPointer tdGroupChapter"
                                    style="font-weight: bold; background-color: #e4eef0;">
                                    <span class="txtGreenBlue txtSize16sm15 showInlineBlock pull-left width70Percent smWidthNone txtNormal marginLeft30 smMarginLeft15" style="">#${group_start_index+1} - #${group_end_index+1}</span>
                                    <span class=" showInlineBlock pull-right width10Percent text-right paddingRight20 marginRight10 smMarginRightNone" style="">
                                        <img src="${ASSETS_IMAGES}down_arrow.png" srcset="${ASSETS_IMAGES}down_arrow@2x.png 2x, ${ASSETS_IMAGES}down_arrow@3x.png 3x"
                                            class="arrow arrow-collapse">
                                    </span>
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                   </table>
                </td>
            </tr>`
        )
    }
    function chapterListTable(chapter_list_obj,user_id,user_token,chapter_sort_type){
        let chapter_list_html = '';
        let chapter_group_html = '';
        chapter_list_obj.forEach(function (elem, index) {
            let props = {
                running_number: chapter_sort_type === 'desc' ? chapter_count - index : index + 1,
                chapter_status: elem.status,
                chapter_order: elem.chapter_order,
                chapter_guid: elem.chapter_guid,
                baht_price: elem.baht_price,
                flexible_pricing_enable: elem.flexible_pricing_enable,
                chapter_title: elem.chapter_title,
                chapter_subtitle: elem.chapter_subtitle,
                word_count: elem.word_count,
                comment_count: !jMeb.empty(elem.comment_count_full) ? elem.comment_count : contentH.shortenNumbers(elem.comment_count),
                view_count: !jMeb.empty(elem.view_count_full) ? elem.view_count : contentH.shortenNumbers(elem.view_count),
                edit_date: elem.edit_date,
                user_id:user_id,
                comment_count_full: !jMeb.empty(elem.comment_count_full) ? elem.comment_count_full : contentH.numberWithCommas(elem.comment_count),
                view_count_full: !jMeb.empty(elem.view_count_full_full) ? elem.view_count_full_full : contentH.numberWithCommas(elem.view_count),                 
                schedule_baht_price: elem.schedule_baht_price,
                schedule_original_baht_price: elem.schedule_original_baht_price,
                schedule_pricing_enable: elem.schedule_pricing_enable,
                schedule_pricing_end_datetime: elem.schedule_pricing_end_datetime,
                schedule_pricing_start_datetime: elem.schedule_pricing_start_datetime,
            };
            chapter_list_html += chapterRow(props);
        });

        // calculate chapter group count
        const get_chapter_count = chapter_list_obj.length;
        const limit_group_elem = 20;
        let chapter_group_count = Math.ceil((chapter_count - get_chapter_count) / limit_group_elem);

        for(let i = 0;i<chapter_group_count;i++){
            let start_index;
            let end_index;
            if(chapter_sort_type === 'asc'){
                start_index = get_chapter_count + (limit_group_elem * i);
                end_index = Math.min((start_index + limit_group_elem),chapter_count)-1;
            }
            else if(chapter_sort_type === 'desc'){
                end_index = (chapter_count-get_chapter_count-(limit_group_elem*i))-1;
                start_index = Math.max(end_index - limit_group_elem+1,0);
            }
            chapter_group_html += chapterGroup(start_index,end_index,chapter_list_obj);
        }

        return(
            `<div class="chapterListTable">
                     <form id="form_buy_all" method="post" target="iframe_sell" action="${WEB_URL_HTTPS}?action=fast_pay_via_mebcoin&product_type=CHAPTER&token=${user_token}">
                        <input type="hidden" id="product_guid" name="product_guid">
                        <input type="hidden" id="list_product_name" name="list_product_name">
                    </form>
                    <table class="table table-hover" style="margin-bottom: 0;">
                        <tbody style="cursor: default">
                            ${''}
                            ${chapter_list_html}
                            ${chapter_group_html}
                        </tbody>
                    </table>
                </div>`
        )
    }


    // function declaration
    function sortChapter(sort_type) {
        //get tab of content incl. header
        var table_content = $("#chapterListBox .chapterListTable").children().toArray()[1];

        // get tab content body ref
        var tab_content_body = $($(table_content).children().toArray()[1]);

        // convert all row to array
        var tr_array = tab_content_body.children().toArray();

        // store all chapter
        var chapter_arr = [];

        if (typeof sort_type === undefined || sort_type === 'desc') {
            CookiesJS.setArticleCookie('chapter_sort_type', 'desc');
        } else {
            CookiesJS.setArticleCookie('chapter_sort_type', 'asc');
        }

        tr_array.forEach(element => {
            var e_elem = $(element);
            if (e_elem.hasClass("chapter_list")) {
                chapter_arr.push(e_elem[0]);
            } else {
                e_elem.find("tbody").children().toArray().forEach(elem => {
                    chapter_arr.push(elem);
                });
            }
        });

        var count = chapter_arr.length;
        var remnant, level;
        var upper = [];
        var lower = [];

        if ((count - 20) % 50 < 10) {
            remnant = (count - 20) % 50;
            level = Math.floor((count - 20) / 50);
        } else {
            remnant = 0;
            level = Math.ceil((count - 20) / 50);
        }

        var n = 10 + remnant;

        for (var j = 1; j <= level; j++) {
            upper.push(n);
            n = n + 49;
            if (n >= count - 11) {
                n = count - 11;
            }
            lower.push(n);
            n = n + 1;
        }

        var html = "";
        var render_count = 0;
        var level_count = 0;
        //sorting array
        switch (sort_type) {
            case "asc":
                chapter_arr = chapter_arr.sort(function(a,b){
                    return ($(a).attr('chapter') - $(b).attr('chapter'));
                })
                break;
            case "desc":
                chapter_arr = chapter_arr.sort(function(a,b){
                    return ($(b).attr('chapter') - $(a).attr('chapter'));
                })
                break;
            default:
                chapter_arr = chapter_arr.reverse();
                break;
        }

        for (var i = 0; i < count; i++) {
            if (render_count < upper[level_count]) {
                html += chapter_arr[i].outerHTML;
            } else if (render_count === upper[level_count]) {
                html += "<tr>";
                html += '<td colspan="6" style="padding: 0;">';
                html += '<table style="margin-bottom: 0" class="table table-hover tbl-accordion collapseTable">';
                html += "<thead>";
                html += "<tr>";
                html += '<td colspan="6" class="cursorPointer" style="font-size: 16px;padding: 10px 0 10px 25px;font-weight: bold; background-color: #f4f4f4;">';
                html += '<span style="display:inline-block;float:left;width:80%;">';
                var title_text_first = $(chapter_arr[upper[level_count]])[0].innerText.trim().split("\n")[0];
                var title_text_last = $(chapter_arr[lower[level_count]])[0].innerText.trim().split("\n")[0];
                var title_collapse_text = title_text_first + " - " + title_text_last;
                if(sort_type === "desc"){
                    title_collapse_text = title_text_last + " - " + title_text_first;
                }
                html += title_collapse_text;
                html += "</span>";
                html += '<span style="display:inline-block;float:right;width:20%;text-align: right; padding-right: 20px">';
                html += '<img src="' + ASSETS_IMAGES + 'down_arrow.png" srcset="' + ASSETS_IMAGES + "down_arrow@2x.png 2x, " + ASSETS_IMAGES + 'down_arrow@3x.png 3x" class="arrow arrow-collapse">';
                html += "</span>";
                html += "</td>";
                html += "</tr>";
                html += "</thead>";
                html += "<tbody>";
                html += chapter_arr[i].outerHTML;
            } else if (render_count > upper[level_count] && render_count < lower[level_count]) {
                html += chapter_arr[i].outerHTML;
            } else if (render_count == lower[level_count]) {
                html += chapter_arr[i].outerHTML;
                html += "</tbody>";
                html += "</table>";
                html += "</td>";
                html += "</tr>";
                level_count++;
            } else {
                html += chapter_arr[i].outerHTML;
            }
            render_count++;
        }
        tab_content_body.html(html);
        $(".tbl-accordion").each(function() {
            var thead = $(this).find("thead");
            var tbody = $(this).find("tbody");
            var img = $(this).find("img.arrow-collapse");

            tbody.hide();
            thead.click(function() {
                if (tbody.is(":visible")) {
                    img.attr("src", ASSETS_IMAGES + "down_arrow.png");
                    img.attr("srcset", ASSETS_IMAGES + "down_arrow@2x.png 2x, " + ASSETS_IMAGES + "down_arrow@3x.png 3x");
                } else {
                    img.attr("src", ASSETS_IMAGES + "up_arrow.png");
                    img.attr("srcset", ASSETS_IMAGES + "up_arrow2x.png 2x, " + ASSETS_IMAGES + "up_arrow3x.png 3x");
                }
                tbody.slideToggle();
            });
        });
        reloadDropdownSortChapter(sort_type,'sortChapter');
    }

    function newSortChapter(sort_type){
        const user_token = CookiesJS.getCookie('user_token');
        const user_id = CookiesJS.getCookie('user_id');
        $.ajax({
            method: 'POST',
            url: "?action=ajax&ajax=1&ajax_case=CallWrapper",
            data: {
                api_call : 'Article',
                method_call : preview === '1' ? 'publisherGetArticleInfo' : 'userGetArticleInfo',
                article_guid: article_guid,
                token: user_token,
                reduce_query:'1',
                sort_type:sort_type
            },
            dataType: "json"
        }).done(function (res) {
            if(!res.status.success){
                console.error(`${res.status.code}: ${res.message}`);
                return;
            }
            $('.chapterListTable').html(`${chapterListTable(res.data.chapter_list,user_id,user_token,sort_type)}`);
            postProcess(sort_type);
            CookiesJS.setArticleCookie('chapter_sort_type',sort_type);
            reloadDropdownSortChapter(sort_type,'newSortChapter');
        });
    }

    function reloadDropdownSortChapter(sort_type,sort_function) {
        var html = '';
        var aHref = '';
        if (sort_type != 'asc') {
            aHref += 'javascript:' + sort_function + '(\'asc\');';
        }
        if (sort_type == 'asc') {
            aHref += 'javascript:' + sort_function + '(\'desc\');';
        }
        html += '<a href="' + aHref + '" class="txtSize16sm12 txtGreenBlue" style="">';
        html += `   <img src="${CDN_ROOT_ASSET_IMAGE}sort_orders.png?${ASSET_IMAGES_VERSION}" class="marginRight5 smMarginRightNone" style="width: 26px;" alt=""/>`;
        if (sort_type == 'asc')
        {
            html += 'เก่าไปใหม่';
        }
        if (sort_type != 'asc')
        {
            html += 'ใหม่ไปเก่า';
        }
        html += '</a>';

        $('#sort_chapter').html(html);
    }

    function changeDisplayStyle(display_style_) {
        display_style = display_style_;
        contentH.getContent('', 'https://1417094351.rsc.cdn77.org/articles/2811/2810122/chapter/8382177cde6573b7711afa06d81d0e14/0000001.raw?2', null, '8fd93e98f08cf435517b028ee150ff03', '8382177cde6573b7711afa06d81d0e14', 'chapterCartoonContents', 'articleChapterScript', '0', display_style, 0);
        $('#popup_cartoon_setting').modal('hide');
    }

    function showPopupCartoonSetting() {
        $('#popup_cartoon_setting').modal();
        $('.divPopupCartoonSetting').css("color", "#54c0b1");
    }

    // Construct Base HTML
    (function(article_species, display_style, user_id_publisher, is_end){
        const user_id = CookiesJS.getCookie('user_id');
        const user_token = CookiesJS.getCookie('user_token');

        const is_publisher = user_id === user_id_publisher;

        if(jMeb.empty(CookiesJS.getCookie('chapter_sort_type'))){
            CookiesJS.setArticleCookie('chapter_sort_type',chapter_sort_type);
        }
        const chapter_list_json = chapter_list.length > 0 ? JSON.parse(chapter_list) : [];

        const script_elem = document.createElement('script');
        script_elem.id = 'articleChapterScript';

        if(article_status === '2' || (preview === '1' && is_publisher)){
            $('#chapterListBox').addClass('marginBottom20 bgWhite content-container smFullScreen smBorderLeftRightNone');
            if(article_type === 'SINGLE_CHAPTER'){
                $('#chapterListBox').html(
                    `${readingOption()}
                    ${article_species === 'CARTOON' && display_style > 1?cartoonSetting():''}
                    ${chapterContent()}
                    <div class="line-separate" id="line-separate">
                        <a href="javascript:setUsageLineSeparate(0);" style="float: right;font-family: tahoma;font-size: 12px;">
                            ซ่อนที่คั่นบรรทัด
                        </a>
                    </div>
                    ${script_elem.outerHTML}`
                ).addClass('paddingTopBottom30 paddingTop10').append($('#socialPlugin').css('cssText','background-color: var(--chapterContentBgColor) !important'));
                $('#chapterListBox').css('cssText','background-color: var(--chapterContentBgColor) !important');

                if(!jMeb.empty(twitter_address) || !jMeb.empty(facebook_address))
                {
                    $('#fb_hr').show();
                    // if($('#chapterContents').find('p').length > 0){
                    //
                    // }
                }

                contentH.getContent(
                    chapter_opt_key,
                    chapter_content_path,
                    null,
                    article_guid,
                    single_chapter_guid,
                    (article_species === 'CARTOON'?'chapterCartoonContents':'chapterContents'),
                    'articleChapterScript', '0',
                    display_style,
                    is_single_cover
                );
                contentH.runFacebookPixelTrack(single_chapter_guid, '');
                $(window).scroll(function () {
                    if (content_version === '2')
                        contentH.replaceString();
                });
            }
            else if(article_type === 'MULTI_CHAPTER') {
                $('#chapterListBox').html(
                    `${chapterListHeader(is_publisher, chapter_count, is_end)}
                        ${chapter_list_json.length > 0 ? (
                        chapterListTable(chapter_list_json,user_id,user_token,chapter_sort_type)
                    ) : (
                        `<div class="paddingAll10 text-center txtSize18sm16 marginTop70 paddingBottom70 smPaddingBottom30">
                            ยังไม่มีตอนย่อย
                        </div>`
                    )}
                        <div style="width: 100%;position: relative;display: none;" class="blur_chapter"> </div>
                        <div id="div-load-more" style="text-align: center;margin-top: 10px;display: none;">
                            <a href="#" id="load-more" style="margin: 0 auto;font-weight: 600;">แสดงตอนเพิ่มเติม</a>
                        </div>`
                );
                postProcess(chapter_sort_type);
                if(chapter_list_json.length === parseInt(chapter_count)){
                    sortChapter(chapter_sort_type);
                }
            }
            else if(article_type === 'NO_CHAPTER'){
                $('#chapterListBox').remove();
            }
        }

        if(preview !== '1'){
            let tag_twitter = "readAwrite,《蝙蝠俠》_高清电影((2022]]~完整版在线观看,spuspita,batman,";
            $('#share_article_div').html(
                `<div class="content-container text-center paddingAll10 marginTopBottom20 smFullScreen smBorderLeftRightNone smPaddingAllNone">
                    <div class="showInlineBlock">
                        <button class="btn btn-default txtSize13 showInlineBlock btn_standard_share_size" style="border: solid 1px #707070;padding: 5px 12px;vertical-align: text-bottom;" onclick="doSharePage(function(){ articleH.popupShareLinkOnly(document.URL); });">
                            <img src="${CDN_ROOT_ASSET_IMAGE}share-dark.png?${ASSET_IMAGES_VERSION}" style="width:20px;" /> แชร์
                        </button>
                        <div id="btn_share" class="btn_standard_share_size" style="display:none;"></div>
                        
                        <span class="btn_standard_share_size cursorPointer text-center showInlineBlock" style="background-color: #1da1f2;line-height: 1.21;color: #ffffff;padding: 8px;vertical-align: text-bottom;" onclick="showPopupShareTwitter('${article_name.replace(/&apos;/g,'#SNGQ#')}','${tag_twitter}');">
                        <img src="${CDN_ROOT_ASSET_IMAGE}TW-logo.png?${ASSET_IMAGES_VERSION}" class="showInLineBlock marginRight5" style="width:15px;" /><span class="showInLineBlock marginTop5">ทวีต</span>
                        </span>
                        
                        <span class="btn_standard_share_size cursorPointer txtWhite text-center showInlineBlock" style="background-color: #2ace4a;line-height: 1.21;color: #ffffff;padding: 8px;vertical-align: text-bottom;" onclick="shareWithLine();">Line it</span>
                    </div>
                </div>`
            );
            var tw_share_script_elem = document.createElement('script');
            tw_share_script_elem.src = '//platform.twitter.com/widgets.js';
            tw_share_script_elem.async = true;
            document.head.append(tw_share_script_elem);
        }
    })(article_species, parseInt(display_style), user_id_publisher, is_end);

    // after process
    $(document).ready(function () {
        $('.twitter-share-button').css('vertical-align','text-bottom');
        $('.twitter-share-button').addClass('btn_standard_share_size');
    });
    $(window).load(function () {
        $('.twitter-share-button').css('vertical-align','text-bottom');
        $('.twitter-share-button').addClass('btn_standard_share_size');
    });

    window.addEventListener("orientationchange", function () {
        if (article_species === 'CARTOON') {
            changeDisplayStyle(display_style);
        }
    });

    $(function () {
        if (navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) {
            $('.line-separate').remove();
        }

        if (!jMeb.empty(articleContents.innerHTML) && article_type === 'SINGLE_CHAPTER') {
            $('#box_option_menu').css('display', 'none');
        }

        /* share to facebook */
        btnShareFB('btn_share');

        /* share to LINE */
        // LineIt.loadButton();

        /* show top donator */
        
        //เคยเปิดรับ donate is_accept_donate = 1 ถ้าเคยรับแล้วอาจจะมีข้อมูลในตาราง top donator
        var is_accept_donate = '0';
        //ปัจจุบันเปิดรับ donate is_donee = 1
        var is_donee = '0';
                        var donate_result_json = '';

        
        if (is_accept_donate == 1) {
            showTopDonator(is_donee, 'article', article_guid, article_guid, '', article_name);
            $('#popup_pay_via_mebcoin').unbind().on('hidden.bs.modal', function (e) {
                showTopDonator(is_donee, 'article', article_guid, article_guid, '', article_name);
            });
        }

        $('#donate_btn').click(function () {
            giveDonateArticle(article_guid, '', article_name);
        });

        if (preview === '1') {
            $('.go_edit').attr('href', WEB_URL_HTTPS + '?action=manage_article&article_id=' + article_guid + '&tab=articleSetting');
            $('.go_view').attr('href', WEB_URL_HTTPS + 'a/' + article_guid);
            $('.header_preview').show();
        } else {
            $('.header_preview').hide();
        }

                            });

    $('#popup_cartoon_setting').on('hidden.bs.modal', function () {
        $('.divPopupCartoonSetting').css("color", "unset");
    });

    async function showPopupShareTwitter(article_name,tag_twitter){
        if(!article_has_shared_thumbnail){
            var flagComplete = await updatePositionArticleName(); // call function in file zone_build_share_thumbnail.tpl
            if(flagComplete){
                drawCanvas(function(){
                    articleH.getPathSharedThumbnail(article_guid,article_name,author_name,thumbnail_edition, function(){
                        showPopupShareTwitter(article_name,tag_twitter);
                    })
                }); // call function in file zone_build_share_thumbnail.tpl
            }
            else{
                article_has_shared_thumbnail = true;
                showPopupShareTwitter(article_name,tag_twitter);
            }
        }else{
            if(tag_twitter.charAt(tag_twitter.length - 1) == ',')
            {
                tag_twitter = tag_twitter.slice(0,-1);
            }

            var article_name_2 = article_name.replace(/#/g,'%23');
            var article_name_3 = article_name_2.replace(/\|/g,'%7C');

            var top   = ($(window).height()/2)-(200/2);
            var left  = ($(window).width()/2)-(600/2);
            var cur_url = document.URL;
            var url = cur_url.replace("&", "&amp;");
            window.open('https://twitter.com/share?text=' + article_name_3.replace(/#SNGQ#/g,'&apos;') +'&url=' + url + '&hashtags=' + tag_twitter.replace('#','') ,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600,top=' + top + ',left=' + left );
        }
    }

    async function shareWithLine(){
        if(!article_has_shared_thumbnail){
            var flagComplete = await updatePositionArticleName(); // call function in file zone_build_share_thumbnail.tpl
            if(flagComplete){
                drawCanvas(function(){
                    articleH.getPathSharedThumbnail(article_guid,article_name,author_name,thumbnail_edition, function(){
                        shareWithLine();
                    })
                }); // call function in file zone_build_share_thumbnail.tpl
            }else{
                article_has_shared_thumbnail = true;
                shareWithLine();
            }
        }else{
            window.open('https://social-plugins.line.me/lineit/share?url=' + window.location.href , '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=600');
        }
    }

    async function shareWithFacebook(callback){
        if(!article_has_shared_thumbnail){
            var flagComplete = await updatePositionArticleName(); // call function in file zone_build_share_thumbnail.tpl
            if(flagComplete){
                drawCanvas(function(){
                    articleH.getPathSharedThumbnail(article_guid,article_name,author_name,thumbnail_edition, function(){
                        callback();
                    })
                }); // call function in file zone_build_share_thumbnail.tpl
            }
            else{
                article_has_shared_thumbnail = true;
                callback();
            }
        }else{
            callback();
        }
    }

    async function doSharePage(callback){
        if(!article_has_shared_thumbnail){
            var flagComplete = await updatePositionArticleName(); // call function in file zone_build_share_thumbnail.tpl
            if(flagComplete){
                drawCanvas(function(){
                    articleH.getPathSharedThumbnail(article_guid,article_name,author_name,thumbnail_edition, function(){
                        callback();
                    })
                }); // call function in file zone_build_share_thumbnail.tpl
            }
            else{
                article_has_shared_thumbnail = true;
                callback();
            }
        }else{
            callback();
        }
    }
</script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/bootstrap-rating.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/comment_helper.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/my_shelf.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/parsley.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/parsley.th.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/comment.js?t_8a0ee"></script> <style>
    .iconManageComment{
        -webkit-filter: grayscale(100%);
        filter: grayscale(100%) contrast(40%);
        width: 30px;
        margin-top: -25px;
        position: absolute;
        z-index: 10;
        margin-left: -4px;
    }
    #btnSubmitComment{
        font-size: 16px;
        display: inline-block;
        width: 350px;
        border-radius: 22px;
        background-color: #1fb49f;
        border: none;
        padding-top: 10px;
        padding-bottom: 10px;
    }
    #boxNotAllowComment{
        border-radius: 5px;
        background-color: #f4f4f4;
        color: #909090;
        font-size: 16px;
        line-height: 1.19;
        text-align: center;
        padding-top: 26px;
        padding-bottom: 24px;
        width: 100%;        
        max-width: calc(100% - 60px);
    }
    #boxPostFirstComment{
        width: 768px;
        margin: 0 auto;
        padding: 26px 20px 24px;
        border-radius: 5px;
        border: solid 0.5px #909090;
        background-color: transparent;
        text-align: center;
        font-size: 16px;
        line-height: 1.19;
        color: #909090;
        max-width: calc(100% - 20px);
    }

    .sample_sticker{
        width: 70px;
        height: 70px;
    }

    .borderTop {
        border-top: 1px solid #D3D3D3;
    }

    .borderBottom {
        border-bottom: 1px solid #D3D3D3;
    }

    .replyCommentBoxDiv {
        /*border-top: 1px solid #D3D3D3;*/
        position: relative;
        /*border-left: 1px solid #30BAAD;*/
        /*max-width: 90%;*/
        margin: 0 auto;
    }

    .replyCommentBoxDiv:before{
        border: none;
    }

    .replyCommentBoxDiv .replyCommentBoxDiv:before {
        content: '';
        position: absolute;
        bottom: 10%;
        top: 10%;
        border-left: 5px solid #E6E7E8;
    }

    .replyAuthorPost:before {
        border-left-color: #30BAAD;
    }

    .replyMinePost:before {
        border-left-color: #FFA07A;
    }

    .replyAdminPost:before {
        border-left-color: #E24674;
    }

    .cke_path {
        display: none;
    }

    .cke_bottom {
        display: none;
    }

    .rating_only {
        width: 20%;
    }

    #sort_comment > ul.dropdown-menu{
        position: absolute;
        min-width: 85px;
        float: left;
        background-color: #fff;
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: 1px solid rgba(0,0,0,.15);
        -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
        box-shadow: 0 6px 12px rgba(0,0,0,.175);
        right: 0;
        left: auto;
        border-radius: 4px;
    }

    #sort_comment .dropdown-menu > li > a
    {
        color: #1fb49f;
    }

    .sortComment > a{
        padding: 2px 5px;
        border-radius: 5px;
        background-color: transparent !important;
        /*color: #000;*/
    }

    .sortComment > a:focus, .sortComment > a:active{
        background-color: transparent !important;
        color: #000;
    }

    #sort_comment > ul.dropdown-menu>li>a:focus, #sort_comment > ul.dropdown-menu>li>a:hover{
        border-radius: 4px;
    }

    .span_rating_item_list > img{
        background: #ffffff;
        border-radius: 10px;
        width: 80px;
        max-width: calc(25% - 8px);
        margin-left: 8px;
        margin-top: 5px;
        margin-bottom: 5px;
    }

    .span_rating_item_list > img:first-child{
        margin-left: 0;
    }

    .rating_item_img{
        margin: 0 auto;
        background-size: contain;
        width: 50px;
        height: 50px;
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart_border50@2x.png?t_8a0ee');
    }

    .rating_item_img:hover{
        background-image: url('https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/rating/heart50@2x.png?t_8a0ee');
    }

    #rating{
        position: absolute;
        bottom: -2px;
        right: -5px;
    }

    #ratingOnlyList > div {
        padding-right: 5px;
    }
    
    .login_href{
        color: #1FB49F;
        cursor: pointer;
    }

    .box_suggest_sticker{
        padding: 15px 20px;
    }

    @media (max-width: 767px) {
        .rating_only {
            width: 33.33%;
        }
        /*#formCommentBox.bgWhite, #allCommentListBox.bgWhite{
            background-color: unset;
        }*/
        #allCommentListBox.bgWhite{
            background-color: unset;
        }
        .sample_sticker{
            width: 49px;
            height: 49px;
        }
        .box_suggest_sticker{
            padding: 15px 20px;
        }
        #btnSubmitComment{
            width: 100%;
            max-width: calc(100% - 20px);
        }
        .iconManageComment{
            width: 22px;
            margin-top: -25px;
            z-index: 10;
            position: absolute;
            margin-left: 2px;
        }
        #boxNotAllowComment{
            background-color: #ffffff;
            max-width: calc(100% - 30px);
            margin: 0 auto;
        }
        #boxPostFirstComment{
            padding: 24px 20px;
            width: calc(100% - 30px);
            border: none;
            background-color: #ffffff;
        }
    }

    @media (max-width: 424px) {
        .rating_only {
            width: 50%;
        }
    }

    .btnPickedComment:hover {
        color: gold;
    }

    .glyphicon-star {
        color: gold;
    }

    .glyphicon-star.btnPickedComment:hover {
        color: #cccccc;
    }


</style> <div id="comment_div"> </div> <div style="display: none"> <div id="commentListBoxTemplate" class="width80Percent smWidth100Percent smPaddingLeft10 smPaddingRight10" style="margin: auto;"> <div id="commentBoxDiv" class="commentBoxDiv bgWhite borderRound smBorderNone row" style="max-width: none;"> <div id="mainComment" class="row mainComment"> <div style="float: left;width: 100%;"> <div id="formEditCommentBox" class="paddingAll10 row marginLeftNone marginRightNone" style="display: none;"></div> </div> </div> <fieldset style="float: right;"> <fieldset style="float: right;"> <div class="dropdown menu_comment" style="text-align: center;color: #B3B3B3;font-size: 16px;cursor:pointer;width: 25px;border-radius: 3px;float: right;"> <div class="btn btn-primary dropdown-toggle" data-toggle="dropdown" style="background: none;border: none;padding: 0;color: #c7c7c7;width: 100%"> <img class="iconManageComment" style="" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover.png?t_8a0ee 1x, 
                            https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/menu_cover@2x.png?t_8a0ee 2x"> </div> <ul class="dropdown-menu" style="left: -75px;font-size: 12px;"> <li><a id="btnEditCommentForm" style="cursor:pointer;color:#555;">แก้ไข</a></li> <li><a id="btnShowReplyCommentForm" style="cursor:pointer;color:#555;">ตอบกลับ</a></li> <li><a id="btnHideComment" style="cursor:pointer;color:#555;">ซ่อน</a></li> <li><a id="btnDeleteComment" style="cursor:pointer;color:#555;">ลบ</a></li> <li><a id="btnBlockUserComment" style="cursor:pointer;color:#555;">บล็อก</a></li> <li><a id="btnReportComment" style="cursor:pointer;color:#555;">แจ้งปัญหา</a></li> </ul> </div> </fieldset> <fieldset style="float: right; margin-left: 10px;"> <img id="pinnedIcon" class="cursorPointer" style="width: 16px;height: 16px; margin-top: -20px; display: none;" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/picked-comment/pin.png?t_8a0ee" srcset="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/picked-comment/pin.png?t_8a0ee 16w,
                          https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/picked-comment/pin@2x.png?t_8a0ee 32w,
                          https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/picked-comment/pin@3x.png?t_8a0ee 48w" > </fieldset> </fieldset> <fieldset id="commentText" class="commentContent"> <div class="paddingBottomNone" style="float: left;width: calc(100% - 25px);"> </div> </fieldset> <fieldset id="commentFooter" class="commentFooter" style=""> <div class="width50Percent" style="float:left;margin-top: 8px;"> <div id="commentChapter" class="txtSize14sm12 width100Percent height1Line" style="color: #909090;"></div> <div style="color: #c7c7c7;vertical-align: sub;" class="icon_thumbs_up marginRight20 smMarginRight10 cursorPointer showInlineBlock"> <i class="fa fa-thumbs-o-up "></i> <span class="thumbs_up_text" style="color:#CCC;font-size: 12px;"></span> </div> <div style="color: #c7c7c7;vertical-align: sub;" class="icon_reply marginRight5 cursorPointer showInlineBlock"> <i class="fa fa-reply"></i> </div> </div> <div class="" style="float:right;position: relative;"> <fieldset style="float:right;"> <img class="img-circle-user img-circle pop commentProfile lazy" style="" src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/profile-X.png?t_8a0ee" onerror="articleH.profileError(this);" id="profile" alt="" > <span id="rating" class="pull-right showInlineBlock" style=""> </span> </fieldset> </div> <div class="commentInfo" style="float:right;margin-right: 5px;width: calc(50% - 50px);"> <fieldset style="float:right;max-width: 100%;text-align: right;height:20px;margin-top: 8px;"> <div class="commentName height1Line" style="color: #2c2c2c;max-width: 100%;" id="commentName">[ชื่อคนเขียน] - </div> </fieldset> <fieldset class="txtSize12" style="float:right;width: 100%;text-align: right;margin-top: 2px;"> <span id="commentDate" class="commentDate height1Line" title="สร้างเมื่อ [วันที่สร้างคอมเม้น]" style="color: #a2a2a2;display: inline-block;">[วันที่สร้างคอมเม้น]</span> </fieldset> </div> </fieldset> <div style="width: calc(100% + 30px); margin-bottom:-7px;margin-left: -15px; display: none;"> <button id="btnShowReplyCommentList" class="btn btn-default width100Percent marginTop5 txtSize14 fontWeight300" style="border-radius: 0;color: #6D6E71; border: 0;background-color: #e6e6e6;border-bottom-left-radius: 4px;   border-bottom-right-radius: 4px;" onclick="$(this).blur(); comment.showReplyCommentList(this.id, '', false);">
                    ดูความคิดเห็นย่อย
                </button> </div> </div> <div style="width: 100%; margin-bottom:5px; display: none;" class="" id="replyComment"> <div id="replyCommentList" style="float: right; width: 90%;" class="replyCommentBoxDiv"> <div class="paddingAll10 replyCommentBoxDiv txtSize16" id="replyErrorMessage" style="display: none;"> <div id="replyErrorText" class="paddingAll10 paddingBottomNone commentContent" style="text-align: center; color: #000000; margin-left: -5%; margin-right: 0;"></div> </div> <div id="replyCommentListBox" style="display: none;"></div> </div> </div> <div id="boxFormReplyComment" style="display: none;max-width:none;" class="boxFormReplyComment marginTopBottom5 commentBoxDiv row"></div> <div id="bottomCommentBox"></div> </div> </div> <div id="formReplyBoxTemplate" style="display: none;float: right;width: 100%;margin-bottom: 5px;" class="formReplyBox marginTop10 borderCommentBox"> <div class="paddingLeft20" style=" display: inline-block;"> <div class="replyCommentHeaderText" style="margin: 10px 0; "><span class="fas fa-comment-alt"></span>
            ตอบกลับความคิดเห็น
        </div> </div> <div class="paddingLeftRight20 paddingBottom10" id="frmPostComment"> <div id="replyCommentTab" class="" style="width: 100%;" data-parsley-validate> <div class="tab-content clearfix"> <div class="tab-pane active displayNoLogin" style="display: none;"> <form method="post"> <textarea title="แสดงความคิดเห็น" id="newCommentText" class="form-control" rows="10"
                                  name="newCommentText"></textarea><br> </form> <form class="form-inline" role="form"> <div class="form-group" style="vertical-align: top; "> <label class="sr-only" for="inputname">ชื่อ:</label> <input type="text" class="form-control " name="inputname" id="inputnameTmp" placeholder="ชื่อ"> </div> </form> <div class="pull-left" style="margin-right: 42px;"> <div id="captcha_container" style="margin-bottom: 5px;transform: scale(0.9) !important;transform-origin: 0 0 !important;display: none;" class="g-recaptcha marginTopBottom10"></div> </div> <br class="clearfix"/> </div> <div class="displayLogin" style="display: none;"> <form method="post"> <textarea title="แสดงความคิดเห็น" id="CK_Reply" class="form-control" rows="10"
                                  name="CK_Reply"></textarea><br> </form> <div class="pull-left" style="margin-right: 42px;"> </div> </div> <button id="btnSubmitComment" type="button" class="btn btn-default btnRound20Pt btnComment" onclick="$(this).blur(); comment.submitCommentForm($(this));" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> กำลังส่ง" data-error-text="ลองอีกครั้ง">ส่งความคิดเห็น
                </button> </div> </div> </div> </div> <div> <div id="modal-comment" class="modal fade" role="dialog"> <div class="modal-dialog" style="max-width: 800px;"> <div class="modal-content"> <div class="modal-header" style="text-align: center;border-bottom: none;"> <button type="button" class="close" data-dismiss="modal">✖</button> <h4 class="add-modal-title" id="modal-title-comment">ช่วยทักทายเพื่อเป็นกำลังใจให้นักเขียนหน่อยจ้า</h4> </div> <div class="modal-footer" style="text-align: inherit;border-top: none;padding: 0;"> <div id="formCommentBoxModal" class="panel panel-default smBorderLeftRightNone smFullScreen" style="display: block;border-bottom: none;width: 100%;margin: 0 auto;"> <div class="paddingLeftRight20 paddingTopBottom10 width100Percent bgMainTheme"> <span class="txtSize18 txtBold"><span class="fas fa-comment-alt"></span> เพิ่มความคิดเห็น</span> </div> <div class="paddingLeftRight20 paddingTop10 paddingBottom20" id="frmPostCommentModal" style="overflow: hidden;"> <div id="commentTabModal" class="" style="width: 100%;" data-parsley-validate> <ul class="nav nav-pills displayNoLogin marginBottom10" style="display: none;"> <li class="active"> <a data-toggle="tab" style="background-color: lightsalmon;">บุคคลทั่วไป</a> </li> <li><a onclick="comment.loginCommentModalsuggest();">สมาชิก</a></li> </ul> <div class="tab-content clearfix"> <div class="tab-pane active displayNoLogin" style="display: none;"> <form method="post"> <textarea title="แสดงความคิดเห็น" id="newCommentTextModal" class="form-control" rows="10" name="newCommentTextModal"></textarea><br> </form> <form class="form-inline" role="form"> <div class="form-group" style="vertical-align: top; "> <label class="sr-only" for="inputnameModal">ชื่อ:</label> <input type="text" class="form-control " name="inputnameModal" id="inputnameModal" placeholder="ชื่อ"> </div> </form> <div class="pull-left" style="margin-right: 42px; margin-top: 20px;"> <div id="captcha_container_main_modal" style="margin-bottom: 5px;transform: scale(0.9) !important;transform-origin: 0 0 !important;display: none;" class="g-recaptcha marginTopBottom10"></div> <button id="btnSubmitCommentModal" type="button" class="btn btnSubmitComment btnRound20Pt btnSubmitCommentModal" onclick="$(this).blur(); comment.verifiedCommentFormModalsuggest($(this));" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> กำลังส่ง" data-error-text="ลองอีกครั้ง">ส่งความคิดเห็น</button> </div> </div> <div class="displayLogin" style="display: none;"> <form method="post"> <textarea title="แสดงความคิดเห็น" id="CK_Comment_Modal" class="form-control" rows="10"
                                                  name="CK_Comment_Modal"></textarea><br> </form> <div id="starRatingCommentModal" class="showInlineBlock text-center width100Percent rating_btn_parent" style="font-size:26px;"> <p class="txtSize12 rating_item_ms" style="margin-top: -5px;margin-bottom: 0px;    color: #949494;"> <span class="rating_item_ms">กดหัวใจบอกเลิฟ</span>นิยายเรื่องนี้</p> <div> <div id="rating_item_img" class="cursorPointer rating_item_img"></div> </div> <div class="rating_item_list" style="display: none;position: absolute;left: 50%;transform: translateX(-50%);max-width: calc(90%);width: 500px;"> <span class="span_rating_item_list" style="display: inline-block;border-radius: 15px;padding: 5px 5px 5px 5px;background: #e6e6e6;box-shadow: 0 5px 5px 0 rgba(0, 0, 0, 0.08);"></span> <span style="content: '';position: absolute;top: 0;left: 50%;width: 0;height: 0;border: 15px solid transparent;border-bottom-color: #e6e6e6;border-top: 0;margin-left: -15px;margin-top: -10px;"></span> </div> </div> <div class="showBlock text-center marginBottom5 marginTop10"> <button id="btnSubmitCommentModal" type="button" class="btn btnSubmitComment btnRound20Pt btnSubmitCommentModal" style="width: 200px; color: white;" onclick="$(this).blur(); comment.verifiedUserCommentFormModalsuggest($(this));" data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> กำลังส่ง" data-error-text="ลองอีกครั้ง">ส่งความคิดเห็น</button> </div> </div> </div> </div> </div> <span id="comment_this_user_rating_current_modal" style="display: none;"></span> </div> </div> </div> </div> </div> </div> <div> <style>
    #modalPickedComment .modal-body {
        padding: 15px 40px;
    }

    .selectedPickedComment .pickedCommentOverlay
    {
        background-color: rgba(255, 255, 255, 0.9);
    }

    .pickedCommentText,
    .selectCircleDesktopDiv .selectCircleDesktop,
    .pickedCommentOverlay
    {
        display: none;
    }

    .selectedPickedComment .pickedCommentText,
    .selectedPickedComment .pickedCommentOverlay
    {
        display: block;
    }

    .selectCircleDesktopDiv {
        display: inline-block;
    }

    .selectedPickedComment .selectCircleDesktopDiv,
    .selectedPickedComment .selectPinIcon
    {
        display: none;
    }

    .selectCircleMobile
    {
        display: none;
    }

    .selectedCommentBox
    {
        width: calc(100% - 170px);
        margin-left: 90px;
        margin-right: 50px;
    }

    @media screen and (max-width: 640px)
    {
        #modalPickedComment .modal-body
        {
            padding: 15px 10px;
        }

        .selectCircleDesktopDiv
        {
            display: none;
        }

        .selectedCommentBox
        {
            width: 100%;
            margin-left: 0px;
            margin-right: 0px;
        }

        .selectCircleMobile
        {
            display: block;
        }
    }

    /* overflow picked comment text */
    .pickedCommentMessage
    {
        /*width: 300px;*/
        /*margin-bottom: 5px;*/
        /*padding-bottom: 5px;*/
        /*border-bottom: 3px solid #777;*/
        max-height:75px;
        overflow:hidden;
        text-overflow: ellipsis;
        content: "";
        position:relative;
    }
    .pickedCommentMessage:before
    {
        content:'';
        width:100%;
        height:100%;
        position:absolute;
        left:0;
        top:0;
        background:linear-gradient(transparent 30px, white);
    }
</style> <div id="modalPickedComment" class="modal fade" tabindex="-1" role="dialog"> <div class="modal-dialog" role="document"> <div class="modal-content"> <div class="modal-header" style="position: relative; border: none; padding-bottom: 0;"> <p class="text-center txtSize20 fontWeight500">ปักหมุดเต็มแล้ว</p> <p class="text-center txtSize20 fontWeight500">เลือกความคิดเห็นออกอย่างน้อย 1 อัน</p> <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="position: absolute;top: 10px;right: 10px;font-size: 30px;"> <span aria-hidden="true">&times;</span> </button> </div> <div class="modal-body" style="padding-top: 0; padding-bottom: 0;"> <div id="oldPickedComment"></div> <hr> <p class="text-center txtSize20 fontWeight500">ความคิดเห็นใหม่ที่เลือก</p> <div id="newPickedComment"></div> </div> <div class="modal-footer" style="border: none; text-align: center;"> <button id="btnSavePickedComment" type="button" class="btn btnSubmitComment btnRound20Pt txtSize16" style="padding: 5px 40px;" onclick="comment.saveSelectedItem()" disabled>บันทึก</button> </div> </div> </div> </div></div> <script>
    // load variable
    
        var action = `view`;
        var allow_sticker = `1` === '1';
        var allow_comment = `1` === '1';
        var allow_anon_comment = `1` === '1';
        var article_species = `NONFICTION`;
        var preview = `0`;
        var token = CookiesJS.getCookie('user_token');

        var user_id_publisher = '7102525';
        if (user_id_publisher === "" || jMeb.empty(user_id_publisher)) {
            user_id_publisher = '7102525';
        }
        var chapter_guid = '';

        var setting = {
            action: $.urlParam('action'),
            comment: $.urlParam('comment'),
            reply: $.urlParam('reply'),
            article_rating_total: parseInt('0'),
            article_rating_count: parseInt('0'),
            article_guid: '19ca937b7b849800d51c543928d66bd0',
            chapter_guid: jMeb.empty(chapter_guid) ? null : chapter_guid,
            article_species: article_species,
            user_id_publisher: user_id_publisher,
            token: CookiesJS.getCookie('user_token'),
            device_id: CookiesJS.getCookie('device_id'),
            user_id: CookiesJS.getCookie('user_id'),
            display_name: CookiesJS.getCookie('display_name'),
            allow_comment: allow_comment,
            allow_sticker: allow_sticker,
            allow_anon_comment: allow_anon_comment,
            CKFINDER_JS_URL: 'https://www.readawrite.com/web/frontend//assets/ckfinder/ckfinder.js',
            comment_count: parseInt('0'),
            chapter_title: '',
            chapter_subtitle: '',
            is_collab: '0',
            collaborator_list_json: JSON.parse('[]'),
            is_publisher: parseInt('')
        };

    

    // render comment form
    function nonLoginForm(allow_sticker, allow_anon_comment){
        return(
            `<div class="tab-pane active displayNoLogin" style="display: none;">
                <form method="post">
                ${!allow_anon_comment ? (
                    `<p class="txtSize12 bgUltraLightGrey"
                        style="text-align: center;color: #949494;padding-top: 20px;margin-bottom: 0;padding-bottom: 20px;"
                    >
                        กรุณา<span class="login_href">เข้าสู่ระบบ</span> หรือ <span class="login_href">สมัครสมาชิก</span>
                    </p>`
                ) : (
                        allow_sticker ? (
                            `<div id="suggest_sticker_general" style="text-align: center;padding-left: 20px;padding-right: 20px;padding-bottom: 20px;"></div>`
                        ) : (
                            `<div class="text-center paddingTopBottom20 txtSize16 borderRound" style="background-color:var(--bgNotAllowCommentColor) !important;color:var(--textOnDisabledBgColor) !important;max-width: 90%; margin: 10px auto 30px;"><span>ผู้แต่งปิดการแสดงความคิดเห็นด้วยสติกเกอร์</span></div>`
                        )
                    )}
                    <textarea title="แสดงความคิดเห็น" id="CK_Comment_General" class="form-control" rows="10"
                                name="CK_Comment_General" placeholder="เพิ่มความคิดเห็นที่นี่.."
                    ></textarea>
                </form>
                <form class="form-inline" role="form">
                    <div class="form-group"
                            style="vertical-align: top;text-align: center;display: block;padding-top: 15px;"
                    >
                        <label class="sr-only" for="inputname">ชื่อ:</label>
                        <input type="text" class="form-control " name="inputname" id="inputname" placeholder="ชื่อ">
                    </div>
                </form>
                <div
                    style="text-align: center;padding-top: 15px;padding-bottom: 15px;"
                >
                    <div id="captcha_container_main"
                            style="margin-bottom: 5px;transform: scale(0.9) !important;transform-origin: 0 0 !important;display: none;"
                            class="g-recaptcha marginTopBottom10"></div>
                    <button id="btnSubmitComment" style="" type="button"
                            class="btn btnSubmitComment center-block"
                            onclick="$(this).blur(); comment.verifiedCommentForm($(this));"
                            data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> กำลังส่ง"
                            data-error-text="ลองอีกครั้ง">ส่งความคิดเห็น
                    </button>
                </div>
            </div>`
        )
    }

    function loginForm(allow_sticker){
        return (
            `<div class="displayLogin" style="display: none;">
                <form method="post" style="margin-bottom: 0;">
                    ${allow_sticker ? (
                        `<div id="suggest_sticker_login" class="customScrollBar marginBottom10 smMarginBottomNone"
                            style="text-align: center;padding-left: 20px;padding-right: 20px;padding-bottom: 10px;"></div>`
                    ) : (
                        `<div class="text-center paddingTopBottom20 txtSize16 borderRound" style="background-color:var(--bgNotAllowCommentColor) !important;color:var(--textOnDisabledBgColor) !important;max-width: 90%; margin: 10px auto 30px;"><span>ผู้แต่งปิดการแสดงความคิดเห็นด้วยสติกเกอร์</span></div>`
                    )}
                    <textarea title="แสดงความคิดเห็น" id="CK_Comment" class="form-control" rows="10"
                                name="CK_Comment" placeholder="เพิ่มความคิดเห็นที่นี่.."></textarea>
                </form>
                <div id="starRatingComment" class="showInlineBlock text-center width100Percent rating_btn_parent"
                        style="font-size:26px; padding-top: 15px;padding-bottom: 10px;">
                    <p class="txtSize12" style="margin-top: -5px;margin-bottom: 0;    color: #949494;">
                        <span class="rating_item_ms">กดหัวใจบอกเลิฟ</span>นิยายเรื่องนี้</p>
                    <div>
                        <div id="rating_item_img" class="cursorPointer rating_item_img"></div>
                    </div>
                    <div class="rating_item_list" style="color:red;display: none;position: absolute;left: 50%;transform: translateX(-50%);max-width: calc(90%);width: 500px;">
                        <span class="span_rating_item_list" style="display: inline-block;border-radius: 15px;padding: 5px 5px 5px 5px;background: #e6e6e6;box-shadow: 0 5px 5px 0 rgba(0, 0, 0, 0.08);"></span>
                        <span style="content: '';position: absolute;top: 0;left: 50%;width: 0;height: 0;border: 15px solid transparent;border-bottom-color: #e6e6e6;border-top: 0;margin-left: -15px;margin-top: -10px;"></span>
                    </div>
                </div>
                <div class="showBlock text-center" style="padding-bottom: 15px;">
                    <button id="btnSubmitComment" type="button" class="btn btnSubmitComment btnRound20Pt"
                            style="color: white;"
                            onclick="$(this).blur(); comment.verifiedUserCommentForm($(this));"
                            data-loading-text="<i class='fa fa-circle-o-notch fa-spin'></i> กำลังส่ง"
                            data-error-text="ลองอีกครั้ง">ส่งความคิดเห็น
                    </button>
                </div>
            </div>`
        );
    }
    function onlyRatingForm(){
        return(
            `<div class="displayLogin">
                <div id="starRatingComment" class="showInlineBlock text-center borderRound bgUltraLightGrey rating_btn_parent"
                        style="font-size:26px; padding-top: 15px;padding-bottom: 10px;margin: 0 auto;width:90%;display:block;">
                    <p class="txtSize12" style="margin-top: -5px;margin-bottom: 0;    color: #949494;">
                        <span class="rating_item_ms">กดหัวใจบอกเลิฟ</span>นิยายเรื่องนี้</p>
                    <div>
                        <div id="rating_item_img" class="cursorPointer rating_item_img"></div>
                    </div>
                    <div class="rating_item_list" style="color:red;display: none;position: absolute;left: 50%;transform: translateX(-50%);max-width: calc(90%);width: 500px;">
                        <span class="span_rating_item_list" style="display: inline-block;border-radius: 15px;padding: 5px 5px 5px 5px;background: #e6e6e6;box-shadow: 0 5px 5px 0 rgba(0, 0, 0, 0.08);"></span>
                        <span style="content: '';position: absolute;top: 0;left: 50%;width: 0;height: 0;border: 15px solid transparent;border-bottom-color: #e6e6e6;border-top: 0;margin-left: -15px;margin-top: -10px;"></span>
                    </div>
                </div>
            </div>

            </div>`
        )
    }
    function formCommentBox(){
        return(
            `<div id="formCommentBox"
                class="marginTop20 paddingTop20 bgWhite ${action !== 'user_page'?'content-container':''} smBorderLeftRightNone smFullScreen"
                style="display: none;"
            >
                <div class="paddingLeftRight30 smPaddingLeftRight20 paddingTop10 paddingBottom20 width100Percent setFontNotoSans">
                    <span class="txtSize30 smTxtSize20 fontWeight500">เพิ่มความคิดเห็น</span>
                </div>
                ${allow_comment ? 
                    `<div id="frmPostComment" class="" style="overflow: hidden;">
                        <div id="commentTab" class="borderRound" style="width: 100%;" data-parsley-validate>
                            <div class="tab-content clearfix">
                                ${''}
                                ${nonLoginForm(allow_sticker, allow_anon_comment)}
                                ${''}
                                ${loginForm(allow_sticker)}
                            </div>
                        </div>
                    </div>
                    <span id="comment_this_user_rating_current" style="display: none;"></span>` 
                : 
                    `
                    <div class="showBlock width100Percent clearfix paddingAll20 smPaddingLeftNone smPaddingRightNone" style="background-color:var(--bgNotAllowCommentColor) !important;">
                        <span id="boxNotAllowComment" class="txtSize16 paddingAll20 showBlock text-center">ปิดการแสดงความคิดเห็นโดยนักเขียน</span>
                    </div>
                    `
                }
            </div>`
        )
    }

    function formDisableCommentBox(){
        return(
            `<div id="formCommentBox"
                class="marginTop20 paddingTop20 paddingBottom10 bgWhite ${action !== 'user_page'?'content-container':''} smBorderLeftRightNone smFullScreen"
            >
                <div class="paddingLeftRight30 smPaddingLeftRight20 paddingTopBottom10 width100Percent setFontNotoSans">
                    <span class="txtSize30 smTxtSize20 fontWeight500">เพิ่มความคิดเห็น</span>
                </div>
                <div id="frmPostComment" style="overflow: hidden; display: block;">
                    <div id="commentTab" class="frmRatingArticleOnly" style="width: 100%;display:block;" data-parsley-validate>
                        <div class="tab-content clearfix">
                            ${''}
                            ${onlyRatingForm()}
                        </div>
                    </div>
                    <div class="text-center paddingAll20 bgUltraLightGrey borderRound txtNewGrey3" style="max-width: 90%; margin: 10px auto 30px;background-color:var(--bgNotAllowCommentColor) !important;color:var(--textOnDisabledBgColor) !important;"><span class="txtSize16">ปิดการแสดงความคิดเห็นโดยนักเขียน</span></div>
                </div>
                <span id="comment_this_user_rating_current" style="display: none;"></span>
            </div>`
        )
    }
    // render comment list
    function allCommentListBox(){
        return(
            `<div id="allCommentListBox" class="marginTop20 paddingLeftRight10 paddingTopBottom20 borderRound ${action !== 'user_page'?'content-container':''} smBorderLeftRightNone smFullScreen ${action === 'view_chapter' && article_species === 'CARTOON'?'bgUltraLightGrey':'bgWhite'}" style="display: none;">
                <div class="paddingLeftRight20 smPaddingLeftRight10 paddingTop20 width100Percent showInlineBlock setFontNotoSans" style="position: relative;">
                    <p class="txtSize30 smTxtSize20 fontWeight500 showInlineBlock marginBottomNone">ความคิดเห็น (<span class="commentCount ">0</span>)</p>
                    ${allow_comment ? (
                        `<span id="btnGenCommentEditor" class="btn btn-default btn-xs txtSize12 pull-right">
                            <span class="glyphicon glyphicon-plus"></span>
                                    เพิ่มความคิดเห็น
                        </span>`
                    ) : ''}
                    <div class="marginRight20 smMarginRight10" style="position: absolute; right: 0; top: 45%;">
                        <span class="txtSize16sm12 hidden-xs" style="padding: 1px 5px;font-family: Thonburi,Tahoma,sans-serif;font-weight: 300;">เรียงตาม</span>
                        <span id="sort_comment" class="sortComment showInlineBlock" style="padding: 2px 0;margin: 0;">
                            <a class="txtGreenBlue txtSize16sm12 " href="${article_species !== 'TOPIC' ? (`javascript:sortComment('ASC');`) : (`javascript:sortComment('DESC');`)}" aria-expanded="false" style="color: #1fb49f; padding: 0;text-decoration: none;font-family: Thonburi,Tahoma,sans-serif;font-weight: 300;">
                                <img src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/images/sort_orders.png?t_8a0ee" class="marginRight5 smMarginRightNone" style="width: 26px;">${article_species !== 'TOPIC' ? ('ใหม่ไปเก่า') : ('เก่าไปใหม่')}
                            </a>
                        </span>
                    </div>
                </div>
                <div id="pickedCommentBox" class="paddingLeftRight10 hide">
                    <nav class="width80Percent smWidth100Percent paddingTop20 paddingBottom10 txtSize16" style="margin: auto;"><div id="topText">Picked Comment</div></nav>
                    <div id="pickedCommentListBox"></div>
                </div>
                <div id="commentListBox" class="paddingLeftRight10 paddingBottom30 smPaddingLeftNone smPaddingRightNone ${article_species==="CARTOON" && action === 'view_chapter' ? 'cartoonComment' : ''}"></div>
            </div>
            <div id="commentListBox" class="paddingLeftRight10 showTopic"></div>`
        )
    }

    function allPickedCommentListBox(){
        return (`
            <div id="pickedCommentBox" class="marginTop20 paddingLeftRight10 paddingTopBottom20 borderRound content-container smBorderLeftRightNone smFullScreen bgWhite hide">
                <div class="paddingLeftRight20 smPaddingLeftRight10 paddingTop20 width100Percent showInlineBlock setFontNotoSans" style="position: relative;">
                    <p class="txtSize30 smTxtSize20 fontWeight500 showInlineBlock marginBottomNone">ปักหมุด</p>
                </div>
                <div id="pickedCommentListBox" class="marginTop20"></div>
            </div>
        `);
    }

    (function(){
        // if preview is empty render comment
        if(jMeb.empty(preview)){
            $('#comment_div').html(
                `${allow_comment ? formCommentBox() : formDisableCommentBox()}
                ${allPickedCommentListBox()}
                ${allCommentListBox()}`
            );
        }
    })()
</script> <script type="text/javascript">
    var comment = Comment.getInstance(setting);
    $(function () {
        var action = jMeb.gup('action');

        if (jMeb.empty(action)) {
            var url = window.location.href;
            var url_arr = url.split('/');

            if (url_arr[3] !== 'c') {
                comment.ready();
            }
        }
        else {
            if (action !== 'view_chapter') {
                comment.ready();
            }
        }

    });

    var submitCommentForm = comment.submitCommentForm;
    var submitReplyCommentForm = comment.submitReplyCommentForm;
    var renderMainCaptcha = comment.renderMainCaptcha;
    var renderCaptcha = comment.renderCaptcha;

    var submitCommentFormModalsuggest = comment.submitCommentFormModalsuggest;
    var renderMainCaptchaModalsuggest = comment.renderMainCaptchaModalsuggest;

    var sortComment = comment.sortComment;

</script> </div> </div> <style type="text/css">
	.footer_mobile_link_active{text-decoration: underline;color: #fff!important;}

	.display_footer table{
		width: 100%;
	}
	.display_footer table tr{
	}
	.display_footer table tr td{
		height: 20px;
		vertical-align: top;
		text-align: center;
	}	
	.display_footer table tr td a{
		color: #FFF;
		font-size: 14px;
		text-decoration: none;
	}	
	.black_space{
		height: 10px;
	}

	.footer_alert_unpublished {
		width: calc(100% - 215px);
	}

	@media (max-width: 767px) {
		.footer_alert_unpublished {
			width: calc(100% - 185px);
		}

		.footer_go_view_text {
			width: 45px;
		}
	}

</style> <div id="emptySpaceFooter" class="width100Percent hidden-xs hidden-sm"></div> <footer id="footer" class="hidden-xs hidden-sm" style="margin: auto;"> <div class="row display_footer" style="margin: auto; margin-bottom: 5px;"> <div style="display: inline-block;width: calc(100% - 50px);"> <div class="col-xs-3 hidden-xs" style="text-align: left; border-right: 1px solid #FFF;border-right-style: dashed; height: 120px;padding: 0 5px;"> <table> <tr> <td colspan="2"><a class="footer_read_link" href="https://www.readawrite.com/?action=cat_popular_new" style="font-size: 18px;"> อ่าน </a></td> </tr> <tr><td colspan="2" class="black_space"></td></tr> <tr> <td><a href="https://www.readawrite.com/?action=cat_tophits&article_species=FICTION"> เรื่องฮิต</a></td> <td><a href="https://www.readawrite.com/?action=cat_newentry&article_species=FICTION"> มาใหม่ </a></td> </tr> <tr> <td><a href="https://www.readawrite.com/?action=list_category"> หมวดหมู่  </a></td> <td><a href="https://www.readawrite.com/?action=list_history_article"> อ่านล่าสุด </a></td> </tr> <tr> <td><a href="https://www.readawrite.com/?action=my_page"> My Reading  </a></td> <td></td> </tr> </table> </div> <div class="col-xs-3 hidden-xs" id="id_footer_write_col" style="text-align: left; border-right: 1px solid #FFF;border-right-style: dashed; height: 120px;padding: 0 5px;"> <table> <tr><td><a class="footer_write_link" href="https://www.readawrite.com/?action=why_readawrite" style="font-size: 18px;"> เขียน </a></td></tr> <tr><td class="black_space"></td></tr> <tr><td><a href="https://www.readawrite.com/?action=why_readawrite"> ทำไมต้อง readAwrite</a></td></tr> <tr><td><a href="https://www.readawrite.com/?action=about_meb"> รู้จัก meb</a></td></tr> </table> </div> <div class="col-xs-3 hidden-xs" style="text-align: left; border-right: 1px solid #FFF;border-right-style: dashed; height: 120px;padding: 0 5px;"> <table> <tr><td><a class="footer_talk_link" href="https://www.readawrite.com/?action=cat_popular_new&article_species=TOPIC" style="font-size: 18px;"> คุย </a></td></tr> <tr><td class="black_space"></td></tr> <tr><td><a href="https://www.readawrite.com/?action=cat_tophits&article_species=TOPIC"> กระทู้ฮิต </a></td></tr> <tr><td><a href="https://www.readawrite.com/?action=cat_newentry&article_species=TOPIC"> กระทู้มาใหม่ </a></td></tr> <tr><td><a href="https://www.readawrite.com/?action=list_category&article_species=TOPIC"> หมวดหมู่ </a></td></tr> </table> </div> <div class="col-xs-3 hidden-xs" style="text-align: left;padding: 0 5px;"> <table> <tr><td colspan="2"><a class="footer_contact_link" href="https://www.readawrite.com/?action=contact_us" style="font-size: 18px;"> ติดต่อ </a></td></tr> <tr><td class="black_space"></td></tr> <tr> <td><a href="https://www.readawrite.com/?action=contact_us"> ติดต่อเรา </a></td> </tr> <tr> <td><a href="https://www.readawrite.com/?action=term_menu"> ข้อตกลงการให้บริการ </a></td> </tr> <tr> <td><a href="https://www.readawrite.com/a/c68fc38a02c4b2dc3adcf5cd3a2bc618"> How to Buy </a></td> </tr> </table> </div> </div> <div style="display: inline-block;"> <div class="col-xs-12 hidden-xs" style="text-align: left; height: 120px;padding: 0 5px;"> <table> <tr><td class="black_space"></td></tr> <tr><td class="black_space"></td></tr> <tr> <td> <a href="https://www.facebook.com/readAwriteMeb/" target="_blank" class="fa fa-facebook-square" style=" margin:  0 2px;font-size: 24px;"></a> </td> </tr> <tr> <td> <a href="https://twitter.com/readawrite" target="_blank" class="fa fa-twitter-square" style="margin: 0 2px;font-size: 24px;"></a> </td> </tr> </table> </div> </div> </div> <p class="txtSize16 marginBottomNone" style="text-align: center;">&copy; 2022 readAwrite.com by MEB Corporation</p> </footer> <div id="emptySpaceFooterMobile" class="width100Percent hidden-md hidden-lg"></div> <footer id="footerMobile" class="hidden-md hidden-lg"> <p class="marginBottomNone"> <span> <a href="https://www.readawrite.com/?action=cat_tophits&article_species=FICTION" style="" class="linkColorChangeOnHover footer_read_link">อ่าน</a> </span> </span>
        /
        <span> <a id="my_writing_tab" href="https://www.readawrite.com/?action=why_readawrite" style="" class="linkColorChangeOnHover footer_write_link">เขียน</a> </span>
        /
        <span> <a href="https://www.readawrite.com/?action=cat_tophits&article_species=TOPIC" style="" class="linkColorChangeOnHover footer_talk_link">คุย</a> </span>
        /
        <span> <a href="https://www.readawrite.com/?action=contact_us" style="" class="linkColorChangeOnHover footer_contact_link">ติดต่อ</a> </span> <span class="marginLeft510"> <a href="https://www.facebook.com/readAwriteMeb/" target="_blank" class="fa fa-facebook-square linkColorChangeOnHover" style=" margin:  0 2px;font-size: 20px;"></a> <a href="https://twitter.com/readawrite" target="_blank" class="fa fa-twitter-square linkColorChangeOnHover" style="margin: 0 2px;font-size: 20px;"></a> </span> </p> <p class="txtSize14 marginBottomNone">&copy; 2022 readAwrite.com by MEB Corporation</p> </footer> <fieldset id="wrap_btn_dekstop" class="width100Percent headbar_view_unpublished header_preview" style="display:none;position: fixed;bottom: 0;z-index:  1000;border-top: 1px solid #ddd;"> <div class="container paddingTopBottom10 paddingLeftRightNone"> <div class="clearfix"> <span class="marginLeftRight10 showInlineBlock pull-left"> <a class="go_edit" style="text-decoration: unset;"> <span class="glyphicon glyphicon-menu-left txtSize11"></span> <span class="footer_go_view_text" style="display: inline-block;vertical-align: middle;text-decoration: underline;">หน้าแก้ไข</span> </a> </span> <div class="txtSize16 fontWeight500 showInlineBlock footer_alert_unpublished pull-left" style="text-align: center;vertical-align: middle;"> <span>ถ้ายังไม่ได้เผยแพร่ ผู้อ่านทั่วไปจะไม่สามารถอ่านได้</span> </div> <span class="marginLeftRight10 showInlineBlock pull-right"> <a class="go_view" style="text-decoration: unset;"> <span class="footer_go_view_text" style="display: inline-block;vertical-align: middle;text-decoration: underline;">มุมมองนักอ่าน</span> <span class="glyphicon glyphicon-menu-right txtSize11"></span> </a> </span> </div> </div> </fieldset> <script>
	
	var setting = {
		published_status: parseInt(''),
		header_type: 'reading'
	};
	

	(function (published_status, header_type) {
		// set footer_write
		if (CookiesJS.getCookie('user_token') != null) {
			$('.footer_write_link').attr('href', WEB_URL_HTTPS + '?action=main_manage_article');
			[
				$('<tr><td><a href="' + WEB_URL_HTTPS + '?action=main_manage_article&create=1"> เพิ่มงานเขียนใหม่ </a></td></tr>'),
				$('<tr><td><a href="' + WEB_URL_HTTPS + '?action=main_manage_article"> My Writing</a></td></tr>')
			].forEach(function (elem) {
				elem.insertBefore($('#id_footer_write_col').find('tbody').children()[2]);
			});
		}
		// hide reader view
		if (published_status !== 2) {
			$('.go_view').addClass('hide');
		}
		// set style footer active
		let active_elem;
		switch (header_type) {
			case 'reading':
				active_elem = $('#footerMobile').find('.footer_read_link');
				break;
			case 'writing':
				active_elem = $('#footerMobile').find('.footer_write_link');
				break;
			case 'topic':
				active_elem = $('#footerMobile').find('.footer_talk_link');
				break;
			case 'contact':
				active_elem = $('#footerMobile').find('.footer_contact_link');
				break;
		}
		// console.log(typeof active_elem === 'object');
		if (typeof active_elem === 'object'){
			active_elem.addClass('footer_mobile_link_active');
		}

	})(setting.published_status,setting.header_type);

	// google analytics
	(function(i, s, o, g, r, a, m) {
		i['GoogleAnalyticsObject'] = r;
		i[r] = i[r] || function() {
			(i[r].q = i[r].q || []).push(arguments)
		}, i[r].l = 1 * new Date();
		a = s.createElement(o),
				m = s.getElementsByTagName(o)[0];
		a.async = 1;
		a.src = g;
		m.parentNode.insertBefore(a, m)
	})(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');


	ga('create', 'UA-1280159-12', 'auto');
	ga('send', 'pageview');

	$(function() {
		if (!jMeb.empty(CookiesJS.getCookie('user_token')))
		{
			var save_batch_history = saveBatchReadingHistory(false);
			save_batch_history();
			$(window).on("pagehide", save_batch_history);
		}
	});

	function saveBatchReadingHistory(update_now, callback)
	{
		return function()
		{
			var last_update_reading_history = storage.getStorage('last_update_reading_history');
			last_update_reading_history = (last_update_reading_history === null) ? 0 : parseInt(last_update_reading_history);
			var current_time = (+ new Date());

			var token = CookiesJS.getCookie('user_token');
			var user_id = CookiesJS.getCookie('user_id');
			var user_reading_history = storage.getStorage('user_reading_history');
			user_reading_history = (user_reading_history === null) ? {} : JSON.parse(user_reading_history);

			if (user_reading_history[user_id] !== undefined)
			{
				var reading_history_by_id = user_reading_history[user_id];
				var reading_history_list = Object.values(reading_history_by_id);

				update_now = update_now ? reading_history_list.length > 0 : reading_history_list.length >= 20 || (current_time - last_update_reading_history) > 300000;

				if (update_now)
				{
					delete user_reading_history[user_id];
					storage.setStorage('last_update_reading_history', current_time);
					storage.setStorage('user_reading_history', JSON.stringify(user_reading_history));

					$.ajax({
						type: "Post",
						url: "?action=ajax&ajax=1&ajax_case=CallWrapper",
						data: {
							api_call : 'My',
							method_call : 'userSaveBatchReadingHistory',
							token : token,
							app_id : DEFAULT_APP_ID,
							app_platform : APP_PLATFORM,
							app_ver : 1,
							reading_history_list : reading_history_list
						},
						success: function(res)
						{
							var result = jQuery.parseJSON(res);
							if(!result.status.success)
							{
								var user_reading_history = storage.getStorage('user_reading_history');
								user_reading_history = (user_reading_history === null) ? {} : JSON.parse(user_reading_history);
								if (user_reading_history[user_id] === undefined)
								{
									user_reading_history[user_id] = {};
								}
								user_reading_history[user_id] = Object.assign({}, reading_history_by_id, user_reading_history[user_id]);

								storage.setStorage('last_update_reading_history', last_update_reading_history);
								storage.setStorage('user_reading_history', JSON.stringify(user_reading_history));
							}
						},
						error: function()
						{
							var user_reading_history = storage.getStorage('user_reading_history');
							user_reading_history = (user_reading_history === null) ? {} : JSON.parse(user_reading_history);
							if (user_reading_history[user_id] === undefined)
							{
								user_reading_history[user_id] = {};
							}
							user_reading_history[user_id] = Object.assign({}, reading_history_by_id, user_reading_history[user_id]);

							storage.setStorage('last_update_reading_history', last_update_reading_history);
							storage.setStorage('user_reading_history', JSON.stringify(user_reading_history));
						},
						complete: function()
						{
							if (callback !== undefined)
							{
								callback();
							}
						}
					});
				}
				else if (callback !== undefined)
				{
					callback();
				}
			}
			else if (callback !== undefined)
			{
				callback();
			}
		};
	}

</script> </div> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/bootstrap.min.js?t_8a0ee"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/line.js?t_8a0ee"></script> <script defer src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js?12345"></script> <script src="https://1146890965.rsc.cdn77.org/web/frontend/dist/assets/js/article/apple.js?t_8a0ee"></script> <script type="text/javascript">
            var active = false;

        window.addEventListener("load", lazyLoad);
        document.addEventListener("scroll", lazyLoad);
        window.addEventListener("resize", lazyLoad);
        window.addEventListener("orientationchange", lazyLoad);
        document.addEventListener("DOMSubtreeModified", lazyLoad);

        function lazyLoad() {
            if (active === false) {
                active = true;

                setTimeout(function() {
                    var overHeight = $(window).height() * 0.5;
                    $("img.lazy").each(function() {
                        if (($(this).offset().top - ($(window).height() + overHeight) <= $(window).scrollTop() && $(this).offset().top + $(this).height() >= 0) && $(this).css('display') !== "none") {
                            $(this).attr('src',$(this).attr('data-src'));
                            $(this).attr('srcset',$(this).attr('data-srcset'));
                            $(this).removeClass("lazy");
                            $(this).removeAttr('data-src data-srcset');

                            // if ($("img.lazy").length === 0) {
                            //     document.removeEventListener("scroll", lazyLoad);
                            //     window.removeEventListener("resize", lazyLoad);
                            //     window.removeEventListener("orientationchange", lazyLoad);
                            // }
                        }
                    });

                    active = false;
                }, 200);
            }
        };
    </script> <style>.cke_chrome{visibility: inherit}</style> </body> </html><script> var cache_message ='172.30.3.124 - hit'; var all_sum =19.463134765625; var get_article_time =19.031982421875; var display_time=64.375; var php_ver = '7.2.34'; var time_data ={cache_message:cache_message,all_sum:all_sum,get_article_time:get_article_time,display_time:display_time}; </script>