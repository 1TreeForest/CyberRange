<!DOCTYPE html>
<!--
	NOTES:
	1. All tokens are represented by '$' sign in the template.
	2. You can write your code only wherever mentioned.
	3. All occurrences of existing tokens will be replaced by their appropriate values.
	4. Blank lines will be removed automatically.
	5. Remove unnecessary comments before creating your template.
-->
<html>
<head>
    <meta charset="UTF-8">
    <meta name="authoring-tool" content="Adobe_Animate_CC">
    <title>贪玩你就来TanWan.com</title>
    <!-- write your code here -->
    <link rel="stylesheet" type="text/css" href="/flash_style/css/h5_style.css?v=202109">
    <script type="text/javascript">
        var getVar=function(v){return eval('window.'+v)};
        var Cookies={aliases:{},alias:function(alias,name,defaultValue){Cookies.aliases[alias]=name;Cookies[alias]=function(value,days){if(value==null)return Cookies.get(name,defaultValue);else Cookies.set(name,value,days)}},set:function(name,value,days){name=Cookies.aliases[name]||name;var expires='';if(!isNaN(days)){var date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);expires="; expires="+date.toGMTString()};document.cookie=name+"="+escape(value)+expires+"; path=/"},get:function(name,defaultValue){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg)){return unescape(arr[2])}return defaultValue},erase:function(name){Cookies.set(name,'',-1)}};
        function getParamUrl(name,url){try{var reg=new RegExp("(^|\\?|&)"+name+"=([^&]*)(\\s|&|$)","i");if(reg.test(url))return RegExp.$2.replace(/\+/g," ");return""}catch(_e){return''}};
        function getParam(param){try{var reg=new RegExp("(^|&)"+param+"=([^&]*)(&|$)","i");var r=window.location.search.substr(1).match(reg);if(r!=null)return unescape(r[2]);return''}catch(_e){return''}}

        var tc_domain="https://baidu.code.91tw.net/",tc_url="https://baidu.code.91tw.net/flash/",hf_url="http://hf.mianwai.com/flash/", code_url="https://baidu.code.91tw.net/", tj_url="//cnzz.jiehunmishu.com";
        var agent_id=parseInt(1762), placeid=site_id=parseInt(81695), popwin_flag=parseInt("2"), tj_reach_flag=parseInt("1"), url_blank_flag=parseInt("1"), adtype=parseInt("8"), adturn=parseInt("1"),beian="",wd_flag=1,softId=parseInt("2000003183");
        var adtime="0", adwait="0", width=parseInt("0"), height=parseInt("0"), textdetail="", mark="";
        var new_turn_str=[{"adid":"hipi","game_id":"3863","ad_title":"\u2605\u4e0a\u7ebf\u53d8\u5f02\u795e\u517d\u2605","swf_width":1900,"swf_height":900,"tpl_name":"new_pop_html5"}];

        var oldusername = Cookies.get('pusername', '');
        var cplaceid    = getParam("cplaceid");

        var cookie_name = "twun_"+placeid;
        var turn        = Cookies.get(cookie_name,'');
        if(!turn||turn>=adturn){var rand=1; turn=0;}else{var rand=Number(turn)+Number(1);}

        Cookies.set(cookie_name,rand,365);
        var ad_str  =   new_turn_str[turn];
        var game_id =   ad_str["game_id"];
        var adid    =   ad_str["adid"];
        var _title  =   ad_str["ad_title"];

        //h5-js
        var h5_width    = parseInt(ad_str["swf_width"]);
        var h5_height   = parseInt(ad_str["swf_height"]);
        var h5_path     = tc_url+adid+'/';

        var bg_url   = tc_url+adid+"/bg.png";
        var btn_url  = tc_url+adid+"/btn.png";
        var bgm_path = tc_url+adid+"/"+"bgm.mp3";

        //标题是否闪动
        var flash_tit = { step: 0, flag: true, space: '' };
        //是否有icp
        var icp_flag2 = beian.length>10?true:false;
        var icp_flag={ flag:icp_flag2, text:beian };

        //是否有退弹
        var isPopWin = {
            flag:0,
            url:"https://baidu.code.91tw.net/h/8164.html?cplaceid="+agent_id+"_"+placeid+"&"+location.search ,    //退弹地址
            type:2,                       //有2种退弹方式，1:旧的的退弹方式；2：有conform框的退弹方式。
            text:"亲，你舍得离开吗？天价屠龙刀、满血复活戒和亮瞎眼套装你都不要了吗？"
        };
    </script>
    <script type="text/javascript" src="/flash_style/common/jquery-2.2.4.min.js"></script>
    <script type="text/javascript" src="/flash_style/common/createjs-2015.11.26.min.js"></script>
    <script type="text/javascript" src="/flash_style/common/h5_common.js"></script>
    <script type="text/javascript" id="ext-script"></script>
    <script type="text/javascript">
        var width_js = h5_path+h5_width+"x"+h5_height+".js";
        //document.writeln('<scr'+'ipt src="'+width_js+'"></scr'+'ipt>');
        document.getElementById('ext-script').src=width_js;
    </script>
    <script>
        var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;
        function init() {
            canvas = document.getElementById("canvas");
            anim_container = document.getElementById("animation_container");
            dom_overlay_container = document.getElementById("dom_overlay_container");
            var libId = '0F1E9EC48765644487F172BE179FA9E1';
            if(h5_width == 1400){
                libId = 'AB5468677F913C4DA53B36F99CB11D92';
            }
            var comp=AdobeAn.getComposition(libId);
            var lib=comp.getLibrary();
            var loader = new createjs.LoadQueue(false);
            loader.addEventListener("complete", function(evt){handleComplete(evt,comp)});
            var lib=comp.getLibrary();
            loader.loadManifest(lib.properties.manifest);
            loadTrack();
        }
        function handleComplete(evt,comp) {
            //This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
            var lib=comp.getLibrary();
            var ss=comp.getSpriteSheet();
            var queue = evt.target;
            var ssMetadata = lib.ssMetadata;
            for(i=0; i<ssMetadata.length; i++) {
                ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
            }

            dom_overlay_container.style.display = canvas.style.display = 'block';

            var exportName  = 'new lib._'+h5_width+'x'+h5_height+'()';
            exportRoot      = eval(exportName);
            stage = new lib.Stage(canvas);
            //Registers the "tick" event listener.
            fnStartAnimation = function() {
                stage.addChild(exportRoot);
                createjs.Ticker.setFPS(lib.properties.fps);
                createjs.Ticker.addEventListener("tick", stage)
                stage.addEventListener("tick", handleTick)
                function getProjectionMatrix(container, totalDepth) {
                    var focalLength = 528.25;
                    var projectionCenter = { x : lib.properties.width/2, y : lib.properties.height/2 };
                    var scale = (totalDepth + focalLength)/focalLength;
                    var scaleMat = new createjs.Matrix2D;
                    scaleMat.a = 1/scale;
                    scaleMat.d = 1/scale;
                    var projMat = new createjs.Matrix2D;
                    projMat.tx = -projectionCenter.x;
                    projMat.ty = -projectionCenter.y;
                    projMat = projMat.prependMatrix(scaleMat);
                    projMat.tx += projectionCenter.x;
                    projMat.ty += projectionCenter.y;
                    return projMat;
                }
                function handleTick(event) {
                    var cameraInstance = exportRoot.___camera___instance;
                    if(cameraInstance !== undefined && cameraInstance.pinToObject !== undefined)
                    {
                        cameraInstance.x = cameraInstance.pinToObject.x + cameraInstance.pinToObject.pinOffsetX;
                        cameraInstance.y = cameraInstance.pinToObject.y + cameraInstance.pinToObject.pinOffsetY;
                        if(cameraInstance.pinToObject.parent !== undefined && cameraInstance.pinToObject.parent.depth !== undefined)
                            cameraInstance.depth = cameraInstance.pinToObject.parent.depth + cameraInstance.pinToObject.pinOffsetZ;
                    }
                    applyLayerZDepth(exportRoot);
                }
                function applyLayerZDepth(parent)
                {
                    var cameraInstance = parent.___camera___instance;
                    var focalLength = 528.25;
                    var projectionCenter = { 'x' : 0, 'y' : 0};
                    if(parent === exportRoot)
                    {
                        var stageCenter = { 'x' : lib.properties.width/2, 'y' : lib.properties.height/2 };
                        projectionCenter.x = stageCenter.x;
                        projectionCenter.y = stageCenter.y;
                    }
                    for(child in parent.children)
                    {
                        var layerObj = parent.children[child];
                        if(layerObj == cameraInstance)
                            continue;
                        applyLayerZDepth(layerObj, cameraInstance);
                        if(layerObj.layerDepth === undefined)
                            continue;
                        if(layerObj.currentFrame != layerObj.parent.currentFrame)
                        {
                            layerObj.gotoAndPlay(layerObj.parent.currentFrame);
                        }
                        var matToApply = new createjs.Matrix2D;
                        var cameraMat = new createjs.Matrix2D;
                        var totalDepth = layerObj.layerDepth ? layerObj.layerDepth : 0;
                        var cameraDepth = 0;
                        if(cameraInstance && !layerObj.isAttachedToCamera)
                        {
                            var mat = cameraInstance.getMatrix();
                            mat.tx -= projectionCenter.x;
                            mat.ty -= projectionCenter.y;
                            cameraMat = mat.invert();
                            cameraMat.prependTransform(projectionCenter.x, projectionCenter.y, 1, 1, 0, 0, 0, 0, 0);
                            cameraMat.appendTransform(-projectionCenter.x, -projectionCenter.y, 1, 1, 0, 0, 0, 0, 0);
                            if(cameraInstance.depth)
                                cameraDepth = cameraInstance.depth;
                        }
                        if(layerObj.depth)
                        {
                            totalDepth = layerObj.depth;
                        }
                        //Offset by camera depth
                        totalDepth -= cameraDepth;
                        if(totalDepth < -focalLength)
                        {
                            matToApply.a = 0;
                            matToApply.d = 0;
                        }
                        else
                        {
                            if(layerObj.layerDepth)
                            {
                                var sizeLockedMat = getProjectionMatrix(parent, layerObj.layerDepth);
                                if(sizeLockedMat)
                                {
                                    sizeLockedMat.invert();
                                    matToApply.prependMatrix(sizeLockedMat);
                                }
                            }
                            matToApply.prependMatrix(cameraMat);
                            var projMat = getProjectionMatrix(parent, totalDepth);
                            if(projMat)
                            {
                                matToApply.prependMatrix(projMat);
                            }
                        }
                        layerObj.transformMatrix = matToApply;
                    }
                }
            }
            //Code to support hidpi screens and responsive scaling.
            function makeResponsive(isResp, respDim, isScale, scaleType) {
                var lastW, lastH, lastS=1;
                window.addEventListener('resize', resizeCanvas);
                resizeCanvas();
                function resizeCanvas() {
                    var w = lib.properties.width, h = lib.properties.height;
                    var iw = window.innerWidth, ih=window.innerHeight;
                    var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;
                    if(isResp) {
                        if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {
                            sRatio = lastS;
                        }
                        else if(!isScale) {
                            if(iw<w || ih<h)
                                sRatio = Math.min(xRatio, yRatio);
                        }
                        else if(scaleType==1) {
                            sRatio = Math.min(xRatio, yRatio);
                        }
                        else if(scaleType==2) {
                            sRatio = Math.max(xRatio, yRatio);
                        }
                    }
                    canvas.width = w*pRatio*sRatio;
                    canvas.height = h*pRatio*sRatio;
                    canvas.style.width = dom_overlay_container.style.width = anim_container.style.width =  w*sRatio+'px';
                    canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = h*sRatio+'px';
                    stage.scaleX = pRatio*sRatio;
                    stage.scaleY = pRatio*sRatio;
                    lastW = iw; lastH = ih; lastS = sRatio;
                    stage.tickOnUpdate = false;
                    stage.update();
                    stage.tickOnUpdate = true;
                }
            }
            makeResponsive(true,'both',false,1);
            AdobeAn.compositionLoaded(lib.properties.id);
            fnStartAnimation();
        }
    </script>
    <!-- write your code here -->
</head>
<body id='body_id' onload="init();" style="margin:0px;">
<div id="animation_container" style="background-color:rgba(255, 255, 255, 1.00); width:1900px; height:900px">
    <canvas id="canvas" width="1900" height="900" style="position: absolute; display: block; background-color:rgba(255, 255, 255, 1.00);"></canvas>
    <div id="dom_overlay_container" style="pointer-events:none; overflow:hidden; width:1900px; height:900px; position: absolute; left: 0px; top: 0px; display: block;">
    </div>

    <!--下面是新闻弹窗-->
    <div id="twLogin" class="login_wid">
        <div class="mask"></div>
        <div class="login">
            <img class="bgImg" src=""/>
            <div class="login_warp">
                <div class="group">
                    <span class="label">用户名:</span>
                    <div class="bd"><input type="text" class="input" id="login_account" name="login_account" onBlur="checkLoginAccount(this.value);" onKeyPress="checkSubmit();"></div>
                    <p class="infos username_tips" id="u_info"><font color="#fff">6-20个字符,由字母或数字组成</font></p>
                </div>
                <div class="group">
                    <span class="label">密码:</span>
                    <div class="bd"><input id="password" type="password" name="password" class="input" onBlur="checkPassword(this.value);" onFocus="checkLoginAccount($$('login_account').value);" onKeyPress="checkSubmit();"></div>
                    <p class="infos password_tips" id="w_info"><font color="#fff">请控制你的密码在6-20位之内！</font></p>
                </div>
                <!--			<input type="submit" name="SubmitBtn" id="submitbtn">-->
                <div class="start" id="startgame" onClick="submitClick()"><img src="" id="startImg" alt="开始游戏"/></div>
                <div class="agree"><input class="checkboxs" type="checkbox" checked="checked" value="checkbox" id="checkservice" name="checkservice"><a target="_blank" id="agreement" href="http://www.tanwan.com/news/xwgg/2014-02/83.html">阅读并同意《用户协议及隐私协议》</a></div>
                <div class="other">
                    <div class="other_tit">使用其他帐号登录</div>
                    <a href="javascript:;" class="a_reg_qq" onClick="registerWinopen('qq')"></a>
                    <a href="javascript:;" class="a_reg_wx" onClick="registerWinopen('wechat')"></a>
                </div>
                <div>
                    <input type='hidden' id='storage_login_account' value='' />
                    <input type='hidden' id='storage_login_password' value='' />
                </div>
            </div>
        </div>
    </div>
</div>
<div style="display:none"><audio id="audio" preload="auto" src="" autoplay loop></audio></div>
<script type="text/javascript">
    document.getElementById('animation_container').style.width  = h5_width;
    document.getElementById('animation_container').style.height = height;
    document.getElementById('canvas').style.width = h5_width;
    document.getElementById('canvas').style.height = height;

    document.getElementById('dom_overlay_container').style.width    = h5_width;
    document.getElementById('dom_overlay_container').style.height   = height;



    document.getElementsByClassName("bgImg")[0].src = bg_url;
    document.getElementById("startImg").src = btn_url;

    document.documentElement.onclick = function() {
        document.getElementById('twLogin').style.display = 'block';
    }
</script>

<div style="display:none">
    <script type="text/javascript" src="/flash_style/agentjs/1762.js"></script>
</div>
</body>
</html>