
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <style>
        [ng-cloak] {
            display: none;
        }
    </style>
    <script>
        var isSSL = (window.location.protocol === 'https:');
        var ua = window.navigator.userAgent;
        var isApp = /nw/.test(ua);
        if(isApp){
            var version = '2.14.2';  // 老版本桌面端先强制使用 2.14.2
            var groupName = 'dingding';
        }else{
            var version = '3.8.10';
            var groupName = 'DingTalkWeb';
        }
        var forceMatch = /forceversion=([\d\.]+)/.exec(window.location.href);
        if(forceMatch && forceMatch[1]){
            version = forceMatch[1];
        }
        if(isSSL){
            var staticHost = 'g.alicdn.com';
        }else{
            var staticHost = 'g.alicdn.daily.taobao.net'
        }
        if(window.location.href.indexOf('env=beta')>0){
            var staticHost = 'g-assets.daily.taobao.net';
        }

        // 日常资源新域名
        if (window.location.href.indexOf('env=dev') > 0) {
            var staticHost = 'dev.g.alicdn.com';
        }

        var bodyClass = '';
        if(!isApp && window.location.search.indexOf('mode=fullscreen') > 0) {
            bodyClass += ' is-app';
        }
        if(isApp){
            bodyClass+= ' is-app';
            if(ua.indexOf('Mac OS X')!== -1){
                bodyClass += ' mac-os';
            }else{
                bodyClass += ' windows-os';
            }
        }
        window.dingtalkWindowName = "main";
    </script>
    <title>阿里巴巴-钉钉，是一个工作方式！超过1000w家企业正在使用钉钉！</title>
    <meta name="description" content="钉钉网页版,免费提供windows版和Mac版,手机端、Pad、PC端等信息多端同步,提供企业邮箱,免费通话,移动考勤,流程审批,通讯录管理等OA应用.助力企业快速进入智能移动办公时代,一站式管理公司!">
    <meta name="keywords" content="钉钉、阿里钉钉、考勤、智能考勤、无纸化、无纸化办公、免费电话、电话会议、免费电话会议、直播、办公协同、移动crm、节能环保、企业安全、移动办公、移动办公解决方案、移动办公平台、移动办公软件、移动办公系统、移动审批、云办公平台、免费移动办公、手机办公、手机审批、商务、中小企业、移动OA、手机OA">
    <script>
        if(isApp){
            document.write('<lin'+'k rel="stylesheet" href="//'+ staticHost +'/'+ groupName +'/web/'+ version +'/app/stylesheets/app.css">')
        }else{
            document.write('<lin'+'k rel="stylesheet" href="//'+ staticHost +'/'+ groupName +'/web/'+ version +'/assets/app.css">')
        }
    </script>

    <link rel="icon" id="favicon" href="//g.alicdn.com/dingding/web/0.2.6/img/oldIcon.ico" type="image/x-icon" />

</head>
<script>
    document.write('<bo'+'dy class="bo'+'dy'+bodyClass+'" prevent-drag dd-copy dd-click-url>')
</script>

<div id="cdn-error-bar" class="kie-bar cdn-error">
    啊哦，钉钉暂时无法访问，请下载最新的钉钉继续使用。 <a target="_blank" href="http://www.dingtalk.com/mac/d/?spm=a3140.7786765.0.0.5TCYgb">Mac 版</a>&nbsp;&nbsp;&nbsp;<a target="_blank" href="http://www.dingtalk.com/win/d/?spm=a3140.7786765.0.0.5TCYgb">Windows 版</a>
</div>

<div id="kie-bar" class="kie-bar">
    <div class="kie-logo"><img src="//g.alicdn.com/dingding/web/0.1.9/img/logo.png" alt=""></div>
    钉钉不支持你当前使用的浏览器，可能会导致部分图片和信息的缺失。请下载使用最新版<a href="http://pc.uc.cn/" class="kie-setup-taoBrowser" target="_blank" title="UC浏览器">UC浏览器</a>或<a href="http://www.google.com/intl/zh-CN/chrome/" class="kie-setup-taoBrowser" target="_blank" title="谷歌浏览器">谷歌浏览器</a>或下载<a id="app-download" target="_blank" href="https://www.dingtalk.com/?gotoDownload=true">钉钉桌面版（推荐）</a>
</div>

<div id="invalidAppTips" class="kie-bar">
    <div class="kie-logo"><img src="//g.alicdn.com/dingding/web/0.1.8/img/logo.png" alt=""></div>
    您当前的钉钉版本过低，请升级最新的<a target="_blank" href="https://www.dingtalk.com/?gotoDownload=true">钉钉桌面版</a>
</div>

<style>
    .kie-bar {
        font-weight:normal;
        text-align: center;
        background-color:#FFF;
        color:#e27839;
        font-size: 14px;
        text-shadow: 0px 0px 1px #efefef;
        position: absolute;
        width:100%;
        height: 100%;
        box-sizing: border-box;
        padding-top:200px;
        z-index:9999;
        display:none;
    }
    .kie-bar.cdn-error {
        display:block;
    }
    .kie-logo img{
        width: 100px;
        height: 100px;
        margin-bottom: 40px;
    }
    .kie-bar a {
        color:#08c;
        text-decoration: none;
    }
</style>
<div id="layout-container" ng-cloak ui-view></div>
<!--插件-->
<script type="text/javascript">
    var hasScreenshotPlugin = false;
    try{
        var mimetype = navigator.mimeTypes["application/x-dingscreenshot-plugin"];
        if(mimetype){
            hasScreenshotPlugin = true;
        }else{
            hasScreenshotPlugin = false;
        }
    }catch(e){
        hasScreenshotPlugin = false;
    }

    if(hasScreenshotPlugin){
        document.write('<embed id="screenshotPlugin" wmode="opaque" width="1" height="1" type="application/x-dingscreenshot-plugin"></embed>');
    }

</script>
<script>
    if(isApp){
        document.write('<scrip'+'t src="//'+staticHost+'/'+ groupName +'/web/'+version+'/app/js/index-global.js" crossorigin></s'+'cript>')
    }else{
        document.write('<scrip'+'t src="//'+staticHost+'/'+ groupName +'/web/'+version+'/assets/vendor.js" crossorigin></s'+'cript>')
    }
</script>

<script>

    var ua = navigator.userAgent.toLowerCase();

    var _isAtomShell = window.navigator.userAgent.indexOf('AtomShell') !== -1;
    var _isNodeWebkit = window.navigator.userAgent.indexOf('nw') !== -1;

    window.upgradeApp = function(isForce){
        if(isForce){
            $('#invalidAppTips').css("display","block");
        };
    }

    if(_isNodeWebkit){
        var gui = require('nw.gui');
        gui.App.clearCache();
        window._nwrequire = require;
    }

    function checkUpdate(){
        var upd = require('updater'),
                gui = require('nw.gui'),
                win = gui.Window.get(),
                app = gui.App;

        //console.log(app);
        var pkg = {
            "version": app.manifest.version,
            "manifestUrl": app.manifest.manifestUrl
        }

        var tools = upd.tools;
        var appMinVersion = '0.4.0';
        var checkCurrentVersionWithMinVersion = tools.versionCmp(app.manifest.version,appMinVersion);

        var jumpToForceUpdateOnFrontWin = function(){

            global.currentWin.window.location.href= tools.getCurrentExecDir()+"\\update\\forceUpdate.html"
        }

        if(checkCurrentVersionWithMinVersion === "smaller"){
            jumpToForceUpdateOnFrontWin();
        }

    }



    //atom-shell走的逻辑
    function _appSetting(){
        if(_isAtomShell){
            window._require = require;
            $("body").delegate("a", "click", function(event) {
                var href = $(this).attr("href");
                var shell = _require("shell");
                shell.openExternal(href);
            });
            upgradeApp(true);
        }

    }

    window.__WPO = {
        config: {
            //抽样分母，1代表100%上报，10代表10%上报，100代表1%上报
            sample: 10,
            // spmId必须设置,如果没写默认值,会自动抓页面的spm
            spmId: 'web.im',
            // 是否启用动态配置
            dynamic: false
        }
    };

    if(!(/(webkit|Firefox)/i.test(ua))){
        $('#kie-bar').css("display","block");
    }else if(isApp) {
        document.write('<scrip'+'t src="//'+staticHost+'/'+ groupName +'/web/'+version+'/app/js/app.js" crossorigin></s'+'cript>')
    }else{
        document.write('<scrip'+'t src="//'+staticHost+'/'+ groupName +'/web/'+version+'/assets/app.js" crossorigin></s'+'cript>')
    }

</script>
<script src="https://g.alicdn.com/retcode/log/log.js" crossorigin></script>
</body>
</html>
